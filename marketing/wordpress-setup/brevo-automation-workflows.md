# 📧 Brevo 자동화 워크플로우 설계

ACF CSS Manager 판매를 위한 Brevo 이메일 자동화 워크플로우를 설계합니다.

---

## 🎯 개요

### 자동화 목표

| 워크플로우 | 목적 | 예상 효과 |
|-----------|------|----------|
| 환영 시퀀스 | 신규 구독자 온보딩 | 브랜드 인지도 ↑ |
| 구매 후 시퀀스 | 제품 활용 극대화 | 만족도 ↑, 환불 ↓ |
| 만료 알림 | 갱신 유도 | 갱신율 ↑ |
| 장바구니 포기 | 구매 완료 유도 | 전환율 ↑ |
| 재활성화 | 비활성 사용자 복귀 | LTV ↑ |

---

## 🔧 Brevo 설정

### 1. API 연동

```
Brevo 관리자 > SMTP & API > API Keys > 새 API Key 생성
```

### 2. WordPress 플러그인

```
Brevo 공식 플러그인 설치:
1. 플러그인 > 새로 추가 > "Brevo" 검색
2. "Brevo – WooCommerce Email Marketing" 설치
3. API Key 입력
```

### 3. 연락처 속성 설정

Brevo에서 다음 커스텀 속성 추가:

| 속성 이름 | 타입 | 용도 |
|----------|------|------|
| EDITION | Text | 구매 에디션 (free/pro/partner) |
| LICENSE_KEY | Text | 라이센스 키 |
| PURCHASE_DATE | Date | 구매일 |
| EXPIRY_DATE | Date | 만료일 |
| SITES_COUNT | Number | 활성화된 사이트 수 |
| LAST_LOGIN | Date | 마지막 로그인 |

---

## 📋 워크플로우 1: 환영 시퀀스

### 트리거
- 신규 뉴스레터 구독
- 베타 신청 폼 제출

### 시퀀스

```
┌─────────────────────────────────────────────────────────────┐
│                    환영 시퀀스 (7일)                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [Day 0] 즉시 ─── 환영 이메일                               │
│          │       "ACF CSS Manager에 오신 것을 환영합니다!"   │
│          │       - 브랜드 소개                              │
│          │       - 무료 버전 다운로드 링크                   │
│          │       - 주요 기능 하이라이트                      │
│          │                                                  │
│          ▼                                                  │
│  [Day 2] ─────── 가치 제공 이메일                           │
│          │       "WordPress 스타일 관리 5가지 팁"            │
│          │       - 유용한 콘텐츠                            │
│          │       - 블로그 링크                              │
│          │                                                  │
│          ▼                                                  │
│  [Day 4] ─────── 기능 소개 이메일                           │
│          │       "AI가 당신의 디자인을 도와드립니다"         │
│          │       - AI 스타일 생성 데모                      │
│          │       - PRO 기능 소개                            │
│          │                                                  │
│          ▼                                                  │
│  [Day 7] ─────── 전환 유도 이메일                           │
│                  "베타 테스터 50% 할인 마지막 기회!"         │
│                  - 한정 할인                                │
│                  - CTA 버튼                                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Brevo 설정

```json
{
  "name": "ACF CSS Welcome Sequence",
  "trigger": {
    "type": "list_subscription",
    "list_id": "newsletter_subscribers"
  },
  "steps": [
    {
      "type": "send_email",
      "template_id": 1,
      "delay": "0 days"
    },
    {
      "type": "send_email",
      "template_id": 2,
      "delay": "2 days"
    },
    {
      "type": "send_email",
      "template_id": 3,
      "delay": "4 days"
    },
    {
      "type": "send_email",
      "template_id": 4,
      "delay": "7 days"
    }
  ]
}
```

---

## 📋 워크플로우 2: 구매 후 온보딩

### 트리거
- WooCommerce 주문 완료 (status: completed)

### 시퀀스

```
┌─────────────────────────────────────────────────────────────┐
│                  구매 후 온보딩 (14일)                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [즉시] ───────── 주문 확인 + 라이센스 발급                  │
│          │       (WooCommerce 기본 이메일 또는 커스텀)        │
│          │                                                  │
│          ▼                                                  │
│  [Day 1] ─────── 시작 가이드                                │
│          │       "첫 번째 스타일을 설정해보세요"             │
│          │       - 설치 완료 확인                           │
│          │       - 빠른 시작 가이드 링크                    │
│          │       - 비디오 튜토리얼                          │
│          │                                                  │
│          ▼                                                  │
│  [Day 3] ─────── 고급 기능 안내                             │
│          │       "AI 스타일 생성을 사용해보셨나요?"          │
│          │       - AI 기능 튜토리얼                         │
│          │       - 클라우드 동기화 안내                      │
│          │                                                  │
│          ▼                                                  │
│  [Day 7] ─────── 만족도 체크                                │
│          │       "ACF CSS Manager는 어떠셨나요?"            │
│          │       - 설문조사 링크                            │
│          │       - 리뷰 요청                                │
│          │       - 지원 안내                                │
│          │                                                  │
│          ▼                                                  │
│  [Day 14] ────── 추가 리소스                                │
│                  "더 많은 것을 해보세요"                     │
│                  - 고급 사용 팁                             │
│                  - 커뮤니티 초대                            │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 조건 분기

```
IF EDITION = 'partner' THEN
  → Partner Hub 전용 온보딩 시퀀스
ELSE IF EDITION = 'pro' THEN
  → PRO 기능 중심 온보딩
ELSE
  → 기본 온보딩 + 업그레이드 유도
END
```

---

## 📋 워크플로우 3: 라이센스 만료 알림

### 트리거
- EXPIRY_DATE - 30일 (만료 30일 전)
- EXPIRY_DATE - 7일 (만료 7일 전)
- EXPIRY_DATE - 1일 (만료 1일 전)
- EXPIRY_DATE (만료일)
- EXPIRY_DATE + 7일 (만료 후 7일)

### 시퀀스

```
┌─────────────────────────────────────────────────────────────┐
│                   만료 알림 시퀀스                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [D-30] ─────── 사전 알림                                   │
│          │      "라이센스가 30일 후 만료됩니다"              │
│          │      - 부드러운 알림                             │
│          │      - 갱신 링크                                 │
│          │                                                  │
│          ▼                                                  │
│  [D-7] ──────── 긴급 알림                                   │
│          │      "라이센스가 7일 후 만료됩니다"               │
│          │      - 만료 후 제한되는 기능 안내                 │
│          │      - 조기 갱신 할인 (5%)                        │
│          │                                                  │
│          ▼                                                  │
│  [D-1] ──────── 최종 알림                                   │
│          │      "내일 라이센스가 만료됩니다!"                │
│          │      - 긴급 CTA                                  │
│          │                                                  │
│          ▼                                                  │
│  [D-Day] ────── 만료 통보                                   │
│          │      "라이센스가 만료되었습니다"                  │
│          │      - 제한된 기능 안내                          │
│          │      - 갱신 링크                                 │
│          │                                                  │
│          ▼                                                  │
│  [D+7] ─────── 마지막 기회                                  │
│                "다시 프리미엄 기능을 사용하세요"             │
│                - 특별 할인 (10%)                            │
│                - 한정 기간                                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 📋 워크플로우 4: 장바구니 포기

### 트리거
- WooCommerce 장바구니에 상품 추가 후 1시간 내 미결제

### 시퀀스

```
┌─────────────────────────────────────────────────────────────┐
│                  장바구니 포기 복구                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [1시간] ────── 첫 번째 리마인더                            │
│          │      "장바구니에 담긴 상품이 있어요"              │
│          │      - 상품 이미지                               │
│          │      - 결제 완료 링크                            │
│          │                                                  │
│          ▼                                                  │
│  [24시간] ───── 두 번째 리마인더                            │
│          │      "결정을 도와드릴까요?"                       │
│          │      - FAQ 링크                                  │
│          │      - 고객 지원 연락처                          │
│          │                                                  │
│          ▼                                                  │
│  [72시간] ───── 할인 제안                                   │
│                 "특별히 10% 할인을 드려요"                   │
│                 - 할인 쿠폰 코드                            │
│                 - 한정 시간 (24시간)                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 종료 조건
- 구매 완료 시 시퀀스 즉시 종료
- 구독 취소 시 종료

---

## 📋 워크플로우 5: 재활성화

### 트리거
- LAST_LOGIN이 30일 이상 경과

### 시퀀스

```
┌─────────────────────────────────────────────────────────────┐
│                     재활성화 캠페인                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  [D+30] ─────── 보고 싶어요                                 │
│          │      "오랜만이에요! 새로운 기능이 추가됐어요"     │
│          │      - 최신 업데이트 하이라이트                   │
│          │      - 복귀 인센티브                             │
│          │                                                  │
│          ▼                                                  │
│  [D+45] ─────── 피드백 요청                                 │
│          │      "왜 떠나셨나요?"                            │
│          │      - 설문조사                                  │
│          │      - 개선 약속                                 │
│          │                                                  │
│          ▼                                                  │
│  [D+60] ─────── 마지막 제안                                 │
│                 "돌아오시면 한 달 무료!"                     │
│                 - 특별 프로모션                             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 🔗 WooCommerce → Brevo 연동

### Webhook 설정

```php
// functions.php 또는 커스텀 플러그인에 추가

// 주문 완료 시 Brevo 연락처 업데이트
add_action( 'woocommerce_order_status_completed', 'sync_to_brevo_on_purchase', 10, 1 );

function sync_to_brevo_on_purchase( $order_id ) {
    $order = wc_get_order( $order_id );
    if ( ! $order ) return;

    $email = $order->get_billing_email();
    $edition = ''; // 상품에서 추출
    $license_key = get_post_meta( $order_id, '_acf_css_licenses', true );
    $expiry = date( 'Y-m-d', strtotime( '+1 year' ) );

    // Brevo API 호출
    $api_key = 'YOUR_BREVO_API_KEY';
    
    wp_remote_post( 'https://api.brevo.com/v3/contacts', array(
        'headers' => array(
            'api-key'      => $api_key,
            'Content-Type' => 'application/json',
        ),
        'body' => wp_json_encode( array(
            'email'      => $email,
            'attributes' => array(
                'EDITION'       => $edition,
                'LICENSE_KEY'   => is_array( $license_key ) ? $license_key[0]['license_key'] : '',
                'PURCHASE_DATE' => date( 'Y-m-d' ),
                'EXPIRY_DATE'   => $expiry,
            ),
            'listIds'    => array( 2 ), // 구매자 리스트 ID
            'updateEnabled' => true,
        ) ),
    ) );
}
```

---

## 📊 이메일 템플릿 ID 매핑

| 템플릿 | Brevo ID | 용도 |
|--------|----------|------|
| Welcome 1 | 1 | 환영 이메일 |
| Welcome 2 | 2 | 가치 제공 |
| Welcome 3 | 3 | 기능 소개 |
| Welcome 4 | 4 | 전환 유도 |
| Onboarding 1 | 10 | 시작 가이드 |
| Onboarding 2 | 11 | 고급 기능 |
| Onboarding 3 | 12 | 만족도 체크 |
| Expiry -30 | 20 | 만료 사전 알림 |
| Expiry -7 | 21 | 만료 긴급 알림 |
| Expiry -1 | 22 | 만료 최종 알림 |
| Cart Abandon 1 | 30 | 장바구니 리마인더 |
| Cart Abandon 2 | 31 | 할인 제안 |

---

## ✅ 설정 체크리스트

- [ ] Brevo 계정 생성
- [ ] API Key 발급
- [ ] WordPress 플러그인 설치 및 연동
- [ ] 커스텀 속성 추가
- [ ] 이메일 템플릿 생성 (HTML 업로드)
- [ ] 자동화 워크플로우 생성
- [ ] 테스트 이메일 발송
- [ ] 라이브 활성화

---

## 📞 지원

Brevo 관련 문의: https://help.brevo.com/
ACF CSS Manager 연동 문의: support@j-j-labs.com

