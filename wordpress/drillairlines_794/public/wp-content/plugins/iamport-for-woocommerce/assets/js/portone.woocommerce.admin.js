jQuery(function(t){t("#refund_amount").closest("tr").after('<tr><td class="label"><label for="iamport_refund_taxfree"><span class="woocommerce-help-tip" data-tip="결제상품에 면세상품이 포함돼있다면, 환불금액 중 면세공급가액을 입력해주세요"></span> 환불금액 중 면세금액</label></td><td class="total"><input type="text" id="iamport_refund_taxfree" name="iamport_refund_taxfree" class="wc_input_price"><div class="clear"></div></td></tr>');function o(){c.is(".processing")||c.parents(".processing").length||c.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}var c=t("[id^=portone-order-vbank].postbox");({init:function(){t("#iamport-vbank-refund-request").on("click",this.vbank_refund_request)},vbank_refund_request:function(){var a=t("#vbank_refund_bank_code").val(),e=t("#vbank_refund_acc_num").val(),n=t("#vbank_refund_acc_name").val(),r=t("#vbank_refund_reason").val();""===a?alert("환불 은행을 선택해주세요."):""===e?alert("환불 계좌번호를 입력해주세요."):""===n?alert("환불 계좌주명을 입력해주세요."):confirm("정말 환불 처리하시겠습니까?\n\n처리 이후에 이전 상태로 되돌릴 수 없습니다. 신중하게 선택해주세요.")&&(o(),t.ajax({url:ajaxurl,type:"POST",data:{action:"iamport_vbank_refund_action",payment_action:"vbank_refund_request",order_id:_iamport_admin.order_id,refund_bank_code:a,refund_acc_num:e,refund_acc_name:n,refund_reason:r,_wpnonce:_iamport_admin._wpnonce},success:function(a){a.success?(alert(a.data),window.location.reload()):(alert(a.data),c.removeClass("processing").unblock())}}))}}).init(),t.ajaxSetup({beforeSend:function(a,e){var n;e.data&&(n=t("#iamport_refund_taxfree").val(),isNaN(n)||n<=0||"string"==typeof e.data&&e.data.match(/action=woocommerce_refund_line_items($|&)/i)&&(e.data+="&iamport_refund_taxfree="+n))}})});