(()=>{"use strict";var e,t,a,o={21976:(e,t,a)=>{a.d(t,{createKeyHandler:()=>u,getNodeFromRefOrNode:()=>c,getOrCreateMousetrap:()=>i,prettifyShortcut:()=>f,resolveKeySpec:()=>d});var o=a(6411),n=a.n(o);const r="__WEB_STORIES_MT__",l=["submit","button","checkbox","radio","image","file","range","reset","hidden"],s=["submit","button","checkbox","radio","image","file","reset"];function i(e){return e[r]||(e[r]=new(n())(e))}function c(e){return e&&"current"in e?e.current:e}function d(e,t){const a="string"==typeof t||Array.isArray(t)?{key:t}:t,{key:o,shift:n=!1,repeat:r=!0,clickable:l=!0,editable:s=!1,dialog:i=!1,allowDefault:c=!1}=a,d=function(e,t){if(!t)return e;return e.concat(e.map((e=>`shift+${e}`)))}((new Array).concat(o).flatMap((t=>e[t]||t)),n);return{key:d,shift:n,clickable:l,repeat:r,editable:s,dialog:i,allowDefault:c}}function u(e,{repeat:t,editable:a,clickable:o,dialog:n,allowDefault:r=!1},i){return c=>{const{repeat:d,target:u}=c;if((t||!d)&&(a||!function({tagName:e,isContentEditable:t,type:a,...o}){if("readOnly"in o&&!0===o.readOnly)return!1;if(t||"TEXTAREA"===e)return!0;if("INPUT"===e)return!l.includes(a);return!1}(u))&&(o||!function({tagName:e,type:t}){if(["BUTTON","A"].includes(e))return!0;if("INPUT"===e)return s.includes(t);return!1}(u))&&(n||!function(e,t){if(1!==e.nodeType)return!1;const a=e.closest('dialog,[role="dialog"]');return a&&t!==a&&t.contains(a)}(u,e)))return i(c),r}}function m(){const{platform:e}=window.navigator;return e.includes("Mac")||["iPad","iPhone"].includes(e)}function p(e){const t=m();return{alt:t?"⌥":"Alt",ctrl:t?"^":"Ctrl",mod:t?"⌘":"Ctrl",cmd:"⌘",shift:t?"⇧":"Shift"}[e]||e}function f(e){const t=m()?"":"+";return e.toLowerCase().replace("alt",p("alt")).replace("ctrl",p("ctrl")).replace("mod",p("mod")).replace("cmd",p("cmd")).replace("shift",p("shift")).replace("left","←").replace("up","↑").replace("right","→").replace("down","↓").replace("delete","⌫").replace("enter","⏎").split("+").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(t)}},37699:(e,t,a)=>{a.d(t,{Placement:()=>n,PopupContainer:()=>l,RTL_PLACEMENT:()=>r});var o=a(72240);let n=function(e){return e.Top="top",e.TopStart="top-start",e.TopEnd="top-end",e.Bottom="bottom",e.BottomStart="bottom-start",e.BottomEnd="bottom-end",e.Right="right",e.RightStart="right-start",e.RightEnd="right-end",e.Left="left",e.LeftStart="left-start",e.LeftEnd="left-end",e}({});const r={[n.Top]:n.Top,[n.TopStart]:n.TopStart,[n.TopEnd]:n.TopEnd,[n.Bottom]:n.Bottom,[n.BottomEnd]:n.BottomEnd,[n.BottomStart]:n.BottomStart,[n.Right]:n.Left,[n.RightStart]:n.LeftStart,[n.RightEnd]:n.LeftEnd,[n.Left]:n.Right,[n.LeftStart]:n.RightStart,[n.LeftEnd]:n.RightEnd},l=o.default.div.withConfig({displayName:"constants__PopupContainer",componentId:"sc-1f3rwe8-0"})(["/*! @noflip */ "," /*! @noflip */ left:0px;top:0px;position:fixed;",";max-height:",";"],(({$offset:{x:e,y:t,width:a},fillWidth:o,transforms:n="",zIndex:r,maxWidth:l})=>{const s={};return o&&(l?s.minWidth=`${a}px`:s.width=`${a}px`),l&&!s.width&&(s.maxWidth=`${l}px`),{transform:`translate(${e}px, ${t}px) ${n}`,...s,zIndex:r}}),(({noOverFlow:e})=>e?"":"overflow-y: auto;"),(({topOffset:e=0})=>`calc(100vh - ${e}px)`))},40341:(e,t,a)=>{a.d(t,{DEFAULT_ARIA_CLEAR_LABEL:()=>l,DEFAULT_ARIA_INPUT_LABEL:()=>s,DEFAULT_PLACEHOLDER:()=>r,DEFAULT_POPUP_FILL_WIDTH:()=>n,Z_INDEX:()=>i});var o=a(83278);const n=276,r=(0,o.__)("Search","web-stories"),l=(0,o.__)("Clear Search","web-stories"),s=(0,o.__)("Search","web-stories"),i={CLEAR_BUTTON:5}},57e3:(e,t,a)=>{var o={};a.r(o),a.d(o,{createStoryFromTemplate:()=>di,duplicateStory:()=>ui,fetchStories:()=>si,getAuthors:()=>mi,getProducts:()=>bi,getTaxonomies:()=>pi,getTaxonomyTerms:()=>fi,trashStory:()=>ii,updateStory:()=>ci});var n=a(96540);a.p=window.webStories.publicPath;var r=a(83278);for(const e of window?.webStories?.localeData||[])(0,r.setLocaleData)(e);var l=a(21728),s=a(65906),i=a(18887),c=a(13154),d=a(61889),u=a(58067),m=a(29971),p=a(95409),f=a(72240),b=a(73478),h=a(5556),g=a.n(h),_=a(76876),y=a(64746);const S=(0,y.createContext)({isRTL:!1,userId:0,locale:{},newStoryURL:"",cdnURL:"",version:"",capabilities:{},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0},containerId:""});const E=function ConfigProvider(e){const t=(0,l.c)(3),{config:a,children:o}=e;let r;return t[0]!==o||t[1]!==a?(r=n.createElement(S.Provider,{value:a},o),t[0]=o,t[1]=a,t[2]=r):r=t[2],r};const w=function(e){const t=void 0===e?y.identity:e;return(0,y.useContextSelector)(S,t)};var v=a(67537),T=a(85675);const C="creating_story_from_template",k="create_story_from_template_success",I="create_story_from_template_failure",L="loading_stories",A="fetch_stories_success",x="fetch_stories_failure",O="update_story",D="update_story_failure",N="trash_story",P="trash_story_failure",R="duplicate_story",M="duplicate_story_failure",B={error:{},isLoading:!1,stories:{},storiesOrderById:[],totalStoriesByStatus:{},totalPages:null};var z,F;function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},U.apply(null,arguments)}const SvgCompass=({title:e,titleId:t,...a})=>n.createElement("svg",U({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,z||(z=n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M12.5 3v3M22 12.5h-3M12.5 22v-3M3 12.5h3M12.5 22a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19"})),F||(F=n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M15.851 8.492a.5.5 0 0 1 .657.657l-2.13 4.967a.5.5 0 0 1-.262.263L9.15 16.508a.5.5 0 0 1-.657-.657l2.13-4.967a.5.5 0 0 1 .262-.263z"}))),G=(0,n.memo)(SvgCompass);var H,j;function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},q.apply(null,arguments)}const SvgHomeWithHeart=({title:e,titleId:t,...a})=>n.createElement("svg",q({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,H||(H=n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"M15.781 10.72a2.44 2.44 0 0 0-2.999-.367 2.5 2.5 0 0 0-.782.748 2.5 2.5 0 0 0-.782-.748 2.45 2.45 0 0 0-2.088-.21 2.47 2.47 0 0 0-1.443 1.375 2.48 2.48 0 0 0 .532 2.687L12 18l3.781-3.795a2.477 2.477 0 0 0 0-3.484"})),j||(j=n.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,d:"m1 11 10.367-8.482a1 1 0 0 1 1.266 0L23 11M4 9v12a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V9"}))),V=(0,n.memo)(SvgHomeWithHeart);var W;function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},$.apply(null,arguments)}const SvgMenu=({title:e,titleId:t,...a})=>n.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,W||(W=n.createElement("path",{fill:"currentColor",d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}))),K=(0,n.memo)(SvgMenu);var X;function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Y.apply(null,arguments)}const SvgMoreVertical=({title:e,titleId:t,...a})=>n.createElement("svg",Y({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 4 16","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,X||(X=n.createElement("path",{fill:"currentColor",d:"M2 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2C.9 6 0 6.9 0 8s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}))),J=(0,n.memo)(SvgMoreVertical);var Z=a(35382);const Q="open-in-editor-action",ee="rename-action",te="duplicate-action",ae="delete-story-action",oe="copy-story-link",ne="open-story-link",re=[{label:(0,r.__)("Open in editor","web-stories"),value:Q,isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,r.__)("Open in new tab","web-stories"),value:ne,isEnabled:e=>Boolean(e?.previewLink)},{label:(0,r.__)("Copy Story URL","web-stories"),value:oe,isEnabled:e=>Boolean(e?.previewLink)},{label:(0,r.__)("Rename","web-stories"),value:ee,separator:"top",isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,r.__)("Duplicate","web-stories"),value:te,isEnabled:e=>Boolean(e?.capabilities?.hasEditAction)},{label:(0,r.__)("Delete Story","web-stories"),value:ae,separator:"top",isEnabled:e=>Boolean(e?.capabilities?.hasDeleteAction)}],le={ASC:"asc",DESC:"desc"},se={NAME:"title",DATE_CREATED:"date",LAST_MODIFIED:"modified",CREATED_BY:"story_author"},ie={orderby:se,order:le},ce={[se.NAME]:le.ASC,[se.DATE_CREATED]:le.DESC,[se.LAST_MODIFIED]:le.DESC,[se.CREATED_BY]:le.ASC},de=[{label:(0,r.__)("Name","web-stories"),value:se.NAME},{label:(0,r.__)("Date Created","web-stories"),value:se.DATE_CREATED},{label:(0,r.__)("Last Modified","web-stories"),value:se.LAST_MODIFIED},{label:(0,r.__)("Created By","web-stories"),value:se.CREATED_BY}],ue={DRAFT:"draft",FUTURE:"future",PENDING:"pending",PUBLISH:"publish",PRIVATE:"private"},me={ALL:Object.values(ue).join(","),PUBLISHED_AND_FUTURE:[ue.PUBLISH,ue.FUTURE].join(","),...ue},pe={[me.PUBLISH]:(0,r.__)("Published","web-stories"),[me.PENDING]:(0,r.__)("Pending","web-stories"),[me.FUTURE]:(0,r.__)("Scheduled","web-stories"),[me.DRAFT]:(0,r.__)("Draft","web-stories"),[me.PRIVATE]:(0,r.__)("Private","web-stories")},fe=[{label:(0,r.__)("All Stories","web-stories"),value:me.ALL,status:"all"},{label:(0,r.__)("Drafts","web-stories"),value:me.DRAFT,status:me.DRAFT},{label:(0,r.__)("Pending","web-stories"),value:me.PENDING,status:me.PENDING},{label:(0,r.__)("Published","web-stories"),value:me.PUBLISH,status:me.PUBLISH},{label:(0,r.__)("Scheduled","web-stories"),value:me.FUTURE,status:me.FUTURE},{label:(0,r.__)("Private","web-stories"),value:me.PRIVATE,status:me.PRIVATE}],be={[me.ALL]:e=>(0,Z.default)(/* translators: %d: number of stories in view */ /* translators: %d: number of stories in view */
(0,r._n)("Viewing <strong>%d</strong> story","Viewing all <strong>%d</strong> stories",e,"web-stories"),String(e)),[me.DRAFT]:e=>(0,Z.default)(/* translators: %d: number of draft stories in view */ /* translators: %d: number of draft stories in view */
(0,r._n)("Viewing <strong>%d</strong> draft","Viewing <strong>%d</strong> drafts",e,"web-stories"),String(e)),[me.PUBLISH]:e=>(0,Z.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,r._n)("Viewing <strong>%d</strong> published story","Viewing <strong>%d</strong> published stories",e,"web-stories"),String(e)),[me.FUTURE]:e=>(0,Z.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,r._n)("Viewing <strong>%d</strong> scheduled story","Viewing <strong>%d</strong> scheduled stories",e,"web-stories"),String(e)),[me.PENDING]:e=>(0,Z.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,r._n)("Viewing <strong>%d</strong> pending story","Viewing <strong>%d</strong> pending stories",e,"web-stories"),String(e)),[me.PRIVATE]:e=>(0,Z.default)(/* translators: %d: number of stories */ /* translators: %d: number of stories */
(0,r._n)("Viewing <strong>%d</strong> private story","Viewing <strong>%d</strong> private stories",e,"web-stories"),String(e))},he={filters:{status:me.ALL},sort:{orderby:se.LAST_MODIFIED,order:ce[se.LAST_MODIFIED]}},ge="diy_crafts",_e="movies_tv",ye="beauty_style",Se="fitness_wellbeing",Ee="food",we="travel",ve="music",Te="sports",Ce=((0,r._x)("DIY & Crafts","template vertical","web-stories"),(0,r._x)("Movies & TV","template vertical","web-stories"),(0,r._x)("Beauty & Style","template vertical","web-stories"),(0,r._x)("Fitness & Wellbeing","template vertical","web-stories"),(0,r._x)("Food","template vertical","web-stories"),(0,r._x)("Travel","template vertical","web-stories"),(0,r._x)("Music","template vertical","web-stories"),(0,r._x)("Sports","template vertical","web-stories"),"white"),ke="black",Ie="gray",Le="brown",Ae="red",xe="orange",Oe="yellow",De="green",Ne="blue",Pe="pink",Re="purple",Me=((0,r._x)("White","color","web-stories"),(0,r._x)("Black","color","web-stories"),(0,r._x)("Gray","color","web-stories"),(0,r._x)("Brown","color","web-stories"),(0,r._x)("Red","color","web-stories"),(0,r._x)("Orange","color","web-stories"),(0,r._x)("Yellow","color","web-stories"),(0,r._x)("Green","color","web-stories"),(0,r._x)("Blue","color","web-stories"),(0,r._x)("Pink","color","web-stories"),(0,r._x)("Purple","color","web-stories"),{ALL:"template"}),Be={[Me.ALL]:e=>(0,Z.default)(/* translators: %d: number of templates in view */ /* translators: %d: number of templates in view */
(0,r._n)("Viewing <strong>%d</strong> template","Viewing all <strong>%d</strong> templates",e,"web-stories"),String(e))},ze={POPULAR:"popular",RECENT:"recent"},Fe={orderby:ze,order:{ASC:"asc",DESC:"desc"}},Ue={filters:{status:Me.ALL},sort:{orderby:ze.POPULAR}},Ge=[{label:(0,r.__)("Popular","web-stories"),value:ze.POPULAR},{label:(0,r.__)("Recent","web-stories"),value:ze.RECENT}],He={template:(0,r.__)("See details","web-stories")},je={MENU:"menu",PANEL:"panel",COLOR_PANEL:"color_panel"},qe=[".jpg",".jpeg",".png",".gif"],Ve=288,We=1098,$e="tablet",Ke="desktop",Xe="thumbnail",Ye={[$e]:200,[Ke]:232,[Xe]:33},Je=24,Ze=32,Qe=52,et=5,tt={DASHBOARD:"/",TEMPLATES_GALLERY:"/templates-gallery",TEMPLATE_DETAIL:"template-detail"},at={[tt.DASHBOARD]:(0,r.__)("Dashboard","web-stories"),[tt.TEMPLATES_GALLERY]:(0,r.__)("Explore Templates","web-stories"),[`${tt.TEMPLATES_GALLERY}/${tt.TEMPLATE_DETAIL}`]:(0,r.__)("Template Details","web-stories"),DEFAULT:(0,r.__)("Dashboard","web-stories")},ot=[{value:tt.DASHBOARD,label:at[tt.DASHBOARD],Icon:V},{value:tt.TEMPLATES_GALLERY,label:at[tt.TEMPLATES_GALLERY],Icon:G}],nt={GRID:"grid",LIST:"list"},rt={[nt.GRID]:(0,r.__)("Switch to List View","web-stories"),[nt.LIST]:(0,r.__)("Switch to Grid View","web-stories")},lt="DASHBOARD",st="TEMPLATES_GALLERY",it={[lt]:{...be},[st]:{...Be}},ct=24,dt=853,ut=640;const mt=function(e,t){switch(t.type){case L:case C:return{...e,isLoading:t.payload};case I:case x:case D:case P:case M:return{...e,error:{...t.payload,id:Date.now()}};case k:return{...e,error:{}};case O:return{...e,error:{},stories:{...e.stories,[t.payload.id]:t.payload}};case N:{const a=t.payload.storyStatus===me.DRAFT?me.DRAFT:me.PUBLISH;return{...e,error:{},storiesOrderById:e.storiesOrderById.filter((e=>e!==t.payload.id)),totalStoriesByStatus:{...e.totalStoriesByStatus,all:e.totalStoriesByStatus.all-1,[a]:e.totalStoriesByStatus[a]-1},stories:Object.keys(e.stories).reduce(((a,o)=>(Number.parseInt(o)!==t.payload.id&&(a[o]=e.stories[o]),a)),{})}}case R:return{...e,error:{},storiesOrderById:[t.payload.id,...e.storiesOrderById],totalStoriesByStatus:{...e.totalStoriesByStatus,all:e.totalStoriesByStatus.all+1,[t.payload.status]:e.totalStoriesByStatus[t.payload.status]+1},stories:{...e.stories,[t.payload.id]:t.payload}};case A:{const{fetchedStoryIds:a,totalStoriesByStatus:o,totalPages:n,page:r,stories:l}=t.payload,{storiesOrderById:s,stories:i}=e,c=1===r?a:[...s,...a],d=[...new Set(c)];return{...e,error:{},storiesOrderById:d,stories:{...i,...l},totalPages:n||1,totalStoriesByStatus:o,allPagesFetched:r>=n}}default:return e}},pt={LOAD_STORIES:{MESSAGE:(0,r.__)("Unable to load stories","web-stories")},UPDATE_STORY:{MESSAGE:(0,r.__)("Unable to update story","web-stories")},DELETE_STORY:{MESSAGE:(0,r.__)("Unable to delete story","web-stories")},CREATE_STORY_FROM_TEMPLATE:{MESSAGE:(0,r.__)("Unable to create story from template","web-stories")},DUPLICATE_STORY:{MESSAGE:(0,r.__)("Unable to duplicate story","web-stories")},LOAD_TEMPLATES:{DEFAULT_MESSAGE:(0,r.__)("Cannot connect to data source","web-stories"),MESSAGE:(0,r.__)("Unable to load templates","web-stories")},RENDER_PREVIEW:{MESSAGE:(0,r.__)("Unable to render preview","web-stories")},LOAD_TEMPLATE:{DEFAULT_MESSAGE:(0,r.__)("Could not load the template","web-stories")}},ft=`${T.SESSION_STORAGE_PREFIX.LOCAL_AUTOSAVE_PREFIX}_auto-draft`,bt=()=>{const e=(0,y.useRef)(!0),t=(0,y.useMemo)((()=>new Map),[]),[a,o]=(0,y.useReducer)(mt,B),{apiCallbacks:n}=w(),r=(0,y.useRef)(!1);(0,y.useEffect)((()=>(r.current=!0,()=>{r.current=!1})),[]);const l=(0,y.useCallback)((async a=>{o({type:L,payload:!0});const l=(0,v.getTimeTracker)("load_stories");try{const{stories:l,fetchedStoryIds:s,totalPages:i,totalStoriesByStatus:c}=await n.fetchStories(a);if(!r.current)return;e.current&&t.forEach((e=>{e(c)})),e.current=!1,o({type:A,payload:{stories:l,totalPages:i,totalStoriesByStatus:c,fetchedStoryIds:s,page:a.page}})}catch(e){o({type:x,payload:{message:pt.LOAD_STORIES.MESSAGE,code:e.code}})}finally{o({type:L,payload:!1}),l()}}),[n,t]),s=(0,y.useCallback)((async e=>{const t=(0,v.getTimeTracker)("load_update_story");try{const t=await n.updateStory(e);o({type:O,payload:t})}catch(e){o({type:D,payload:{message:pt.UPDATE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[n]),i=(0,y.useCallback)((async e=>{const t=(0,v.getTimeTracker)("load_trash_story");try{await n.trashStory(e.id),o({type:N,payload:{id:e.id,storyStatus:e.status}})}catch(e){o({type:P,payload:{message:pt.DELETE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[n]),c=(0,y.useCallback)((async e=>{o({type:C,payload:!0});try{const t=await n.createStoryFromTemplate(e);T.sessionStore.deleteItemByKey(ft),o({type:k}),window.location=t.editLink}catch(e){o({type:I,payload:{message:pt.CREATE_STORY_FROM_TEMPLATE.MESSAGE,code:e.code}})}finally{o({type:C,payload:!1})}}),[n]);return{stories:a,api:{duplicateStory:(0,y.useCallback)((async e=>{const t=(0,v.getTimeTracker)("load_duplicate_story");try{const t=await n.duplicateStory(e);o({type:R,payload:t})}catch(e){o({type:M,payload:{message:pt.DUPLICATE_STORY.MESSAGE,code:e.code}})}finally{t()}}),[n]),fetchStories:l,createStoryFromTemplate:c,trashStory:i,updateStory:s,addInitialFetchListener:(0,y.useCallback)((e=>{const a=Symbol();return t.set(a,e),()=>{t.delete(a)}}),[t])}}};var ht=a(17328),gt=a(66450),_t=a(58319),yt=(a(58555),a(21447)),St=a(82968),Et=a(60591),wt=a(66262),vt=a(6321);const Tt=function(e){if(!e)return"";const t=(0,gt.default)(e);if((0,yt.default)(t)){const{locale:e}=(0,wt.default)();return(0,St.default)(t,{includeSeconds:!1,addSuffix:!0,locale:e})}return(0,Et.default)(t)?(0,r.__)("yesterday","web-stories"):(0,vt.default)(e)};const Ct=function(e){return(0,gt.default)(e,{timeZone:"+0000"})};const kt="loading_templates",It="fetch_templates_success",Lt="fetch_templates_failure",At="placeholder",xt={allPagesFetched:!1,error:{},isLoading:!1,templates:{},templatesByTag:{},templatesOrderById:[],totalTemplates:null,totalPages:null},Ot=(e,t)=>e.reduce(((e,a)=>a[t]?(e[a[t]],e[a[t]]=a,e):e),{});const Dt=function(e,t){switch(t.type){case kt:return{...e,isLoading:t.payload};case Lt:return{...e,error:{...t.payload,id:Date.now()}};case It:{const a=t.payload.templates.map((({id:e})=>e)),o=1===t.payload.page?a:[...e.templatesOrderById,...a],n=[...new Set(o)];return{...e,error:{},templatesOrderById:n,templates:{...e.templates,...Ot(t.payload.templates,"id")},isLoading:!1,totalPages:t.payload.totalPages,totalTemplates:t.payload.totalTemplates,allPagesFetched:t.payload.page>=t.payload.totalPages,templatesByTag:t.payload.templatesByTag}}case At:return xt;default:return e}};const Nt=()=>{const[e,t]=(0,y.useReducer)(Dt,xt),{cdnURL:o}=w(),n=(0,y.useCallback)((async()=>{t({type:kt,payload:!0});const e={},{getAllTemplates:n}=await Promise.all([a.e(7512),a.e(6393)]).then(a.bind(a,7512)),r=(await n({cdnURL:o})).map((t=>{const a=function(e,t=!1){const{id:a,slug:o,modified:n,creationDate:r}=e;return a&&o?{...e,id:a,slug:o,creationDate:(0,gt.default)(r,(0,wt.default)()),status:"template",modified:Ct(n),isLocal:t}:null}(t);return a.tags.forEach((t=>{e[t]?e[t].push(a.id):e[t]=[a.id]})),a})).sort(((e,t)=>(0,ht.default)(e.creationDate,t.creationDate)));t({type:It,payload:{page:1,templates:r,totalPages:1,totalTemplates:r.length,templatesByTag:e}})}),[o]),r=(0,y.useCallback)((t=>e.templates[t]?Promise.resolve(e.templates[t]):Promise.reject(new Error)),[e]);return{templates:e,api:{fetchExternalTemplates:n,fetchExternalTemplateById:r}}};const Pt=function(){const e=(0,l.c)(2),{apiCallbacks:t}=w(),{getAuthors:a}=t;let o;return e[0]!==a?(o={api:{getAuthors:a}},e[0]=a,e[1]=o):o=e[1],o};const Rt=function(){const e=(0,l.c)(3),{apiCallbacks:t}=w(),{getTaxonomies:a,getTaxonomyTerms:o}=t;let n;return e[0]!==a||e[1]!==o?(n={api:{getTaxonomies:a,getTaxonomyTerms:o}},e[0]=a,e[1]=o,e[2]=n):n=e[2],n},Mt=(0,y.createContext)({state:{},actions:{}});function ApiProvider(e){const t=(0,l.c)(14),{children:a}=e,{api:o}=Pt(),{api:r}=Rt(),{templates:s,api:i}=Nt(),{stories:c,api:d}=bt();let u,m,p;t[0]!==c||t[1]!==s?(u={stories:c,templates:s},t[0]=c,t[1]=s,t[2]=u):u=t[2],t[3]!==d||t[4]!==r||t[5]!==i||t[6]!==o?(m={storyApi:d,templateApi:i,usersApi:o,taxonomyApi:r},t[3]=d,t[4]=r,t[5]=i,t[6]=o,t[7]=m):m=t[7],t[8]!==u||t[9]!==m?(p={state:u,actions:m},t[8]=u,t[9]=m,t[10]=p):p=t[10];const f=p;let b;return t[11]!==a||t[12]!==f?(b=n.createElement(Mt.Provider,{value:f},a),t[11]=a,t[12]=f,t[13]=b):b=t[13],b}ApiProvider.propTypes={children:g().node};var Bt=a(36626),zt=a(18086),Ft=a(47701);const Ut=(0,f.css)(["picture{display:block;& > img{display:block;height:100%;width:100%;object-fit:fill;border-radius:",";border:",";}}"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>`1px solid ${e.colors.border.defaultNormal}`)),Gt=f.default.div.withConfig({displayName:"cardGallery__GalleryContainer",componentId:"sc-8jnrkn-0"})(["flex:1;display:flex;justify-content:space-between;align-items:start;"]),Ht=f.default.div.withConfig({displayName:"cardGallery__DisplayPage",componentId:"sc-8jnrkn-1"})(["overflow:hidden;width:38.6%;margin-left:2.1%;"," @media screen and (min-width:1600px){width:45.2%;margin-left:2.4%;}"],Ut);Ht.propTypes={$isThreeRows:g().bool};const jt=f.default.div.withConfig({displayName:"cardGallery__Thumbnails",componentId:"sc-8jnrkn-2"})(["position:relative;display:grid;width:52.3%;grid-template-columns:repeat(3,1fr);column-gap:8px;row-gap:16px;margin-right:16px;@media screen and (min-width:1600px){width:59.3%;grid-template-columns:repeat(4,1fr);}"]),qt=(0,f.default)(zt.Button).attrs({type:Ft.ButtonType.Plain}).withConfig({displayName:"cardGallery__ThumbnailButton",componentId:"sc-8jnrkn-3"})(["display:block;height:100%;padding:0;border:none;background-color:transparent;position:relative;&:active{background-color:transparent;}"," ",";"],(({$isSelected:e,theme:t})=>e&&(0,f.css)(["&:after{content:'';position:absolute;box-sizing:border-box;width:100%;height:100%;display:block;top:0;right:0;border-radius:",";border:4px solid ",";}"],t.borders.radius.medium,t.colors.interactiveBg.active)),Ut);function Vt(e){return(0,Z.default)(/* translators: %s: page number. */ /* translators: %s: page number. */
(0,r.__)("Poster of template page %s","web-stories"),e)}qt.propTypes={$isSelected:g().bool};const Wt=function CardGallery({galleryPosters:e,isRTL:t,galleryLabel:a}){const[o,l]=(0,y.useState)(0),[s,i]=(0,y.useState)(),c=(0,y.useRef)(),d=(0,y.useRef)(),u=(0,y.useRef)({}),m=(0,y.useCallback)((e=>{l(e),i(e)}),[]),p=(0,y.useCallback)((e=>{i(e)}),[]);(0,y.useEffect)((()=>{e&&(l(0),i())}),[e]),(0,Bt.default)({containerRef:c,gridRef:d,itemRefs:u,isRTL:t,currentItemId:s,items:e});const f=(0,y.useMemo)((()=>e.map(((e,t)=>{const a=`gallery_item_${t}`,l=t+1,i=s?s===t:o===t;return n.createElement("div",{key:a,ref:e=>{u.current[t]=e},onFocus:()=>p(t)},n.createElement(qt,{$isSelected:o===t,tabIndex:i?0:-1,onClick:()=>m(t),"aria-label":o===t?(0,Z.default)(/* translators: %s: page number. */ /* translators: %s: page number. */
(0,r.__)("Page %s (current page)","web-stories"),l):(0,Z.default)(/* translators: %s: page number. */ /* translators: %s: page number. */
(0,r.__)("Page %s","web-stories"),l)},n.createElement("picture",null,n.createElement("source",{srcSet:e.webp,type:"image/webp"}),n.createElement("source",{srcSet:e.png,type:"image/png"}),n.createElement("img",{src:e.png,decoding:"async",alt:Vt(l),width:ut,height:dt}))))}))),[e,o,s,p,m]);return n.createElement(Gt,{ref:c},n.createElement(jt,{ref:d,role:"group","aria-label":a,"data-testid":"mini-cards-container"},f),n.createElement(Ht,null,e[o]&&n.createElement("picture",null,n.createElement("source",{srcSet:e[o].webp,type:"image/webp"}),n.createElement("source",{srcSet:e[o].png,type:"image/png"}),n.createElement("img",{src:e[o].png,decoding:"async",alt:(0,Z.default)(/* translators: %s: active preview page number */ /* translators: %s: active preview page number */
(0,r.__)("Active Page Preview - Page %s","web-stories"),o+1),width:ut,height:dt}))))};var $t=a(59576);const Kt=g().oneOf([...Object.values(me),...Object.values(Me)]),Xt=g().shape({id:g().number.isRequired,status:Kt,title:g().string.isRequired,modified:g().oneOfType([g().object,g().string]),author:g().object,capabilities:g().shape({hasDeleteAction:g().bool,hasEditAction:g().bool})}),Yt=g().shape({id:g().number.isRequired,status:Kt,title:g().string.isRequired,pages:g().array,modified:g().object,colors:g().arrayOf(g().shape({label:g().string.isRequired,color:g().string.isRequired})),description:g().string,tags:g().arrayOf(g().string),createdBy:g().string,postersByPage:g().arrayOf(g().shape({webp:g().string,png:g().string,type:g().string}))}),Jt=g().arrayOf(Xt),Zt=(g().arrayOf(Yt).isRequired,g().shape({duplicateStory:g().func,trashStory:g().func,updateStory:g().func})),Qt=g().shape({createStoryFromTemplate:g().func,handleDetailsToggle:g().func,switchToTemplateByOffset:g().func}),ea=g().shape({all:g().number,draft:g().number,publish:g().number}),ta=g().shape({width:g().number,height:g().number}),aa=g().shape({handleMenuToggle:g().func.isRequired,contextMenuId:g().number.isRequired,menuItems:g().arrayOf(g().shape({label:g().string,value:g().oneOfType([g().string,g().bool]),url:g().string,isEnabled:g().func,action:g().func}))}),oa=g().shape({handleOnRenameStory:g().func,id:g().number,handleCancelRename:g().func}),na=f.default.div.withConfig({displayName:"cardGrid__DashboardGrid",componentId:"sc-1kbl74q-0"})(["display:grid;width:100%;grid-column-gap:","px;grid-row-gap:","px;grid-template-columns:",";grid-template-rows:",";scroll-margin-top:30vh;",";"],Je,Ze,(({columnWidth:e})=>`\n    repeat(auto-fill, ${e}px)`),(({columnHeight:e})=>`minmax(${e}px, auto)`),(({theme:e})=>(0,f.css)(["&:focus-visible{",";}"],$t.focusCSS(e.colors.border.focus))));na.propTypes={columnHeight:g().number,columnWidth:g().number};const ra=(0,y.forwardRef)((function CardGrid(e,t){const a=(0,l.c)(6),{ariaLabel:o,children:r,pageSize:s}=e;let i;return a[0]!==o||a[1]!==r||a[2]!==s.height||a[3]!==s.width||a[4]!==t?(i=n.createElement(na,{ref:t,role:"list","data-testid":"dashboard-grid-list",tabIndex:0,"aria-label":o,columnWidth:s.width,columnHeight:s.height},r),a[0]=o,a[1]=r,a[2]=s.height,a[3]=s.width,a[4]=t,a[5]=i):i=a[5],i}));ra.propTypes={ariaLabel:g().string,children:g().node.isRequired,pageSize:ta.isRequired};const la=ra;var sa=a(4814),ia=a(42530),ca=a(60143),da=a(1957),ua=a(45947);function ma(){return ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},ma.apply(null,arguments)}const pa=(0,f.default)(ca.Link).withConfig({displayName:"link__StyledLink",componentId:"sc-7h28r8-0"})(["",";background-color:transparent;text-decoration:none;:active,:hover,:focus,:active *,:hover *,:focus *{color:"," !important;}:hover{background-color:",";}:active{background-color:",";}"],ua.menuItemStyles,(({theme:e})=>e.colors.fg.primary),(({theme:e})=>e.colors.interactiveBg.secondaryHover),(({theme:e})=>e.colors.interactiveBg.secondaryPress));function fa(){return(0,ia.default)()}function ba(e){const{state:t,actions:a}=e;return{focusedId:t.focusedId,onDismiss:a.onDismiss,onMenuItemBlur:a.onMenuItemBlur,onMenuItemFocus:a.onMenuItemFocus}}const ha=function Link(e){const t=(0,l.c)(28);let a,o,r,s,i,c;t[0]!==e?(({id:a,onBlur:o,onClick:r,onFocus:s,openNewTab:i,...c}=e),t[0]=e,t[1]=a,t[2]=o,t[3]=r,t[4]=s,t[5]=i,t[6]=c):(a=t[1],o=t[2],r=t[3],s=t[4],i=t[5],c=t[6]);const{focusedId:d,onDismiss:u,onMenuItemBlur:m,onMenuItemFocus:p}=(0,da.default)(ba);let f;t[7]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[7]=f):f=t[7];const b=(0,y.useMemo)(fa,f),h=a||b;let g;t[8]!==o||t[9]!==m?(g=e=>{m(),o?.(e)},t[8]=o,t[9]=m,t[10]=g):g=t[10];const _=g;let S;t[11]!==r||t[12]!==u?(S=e=>{r?.(e),u(e.nativeEvent)},t[11]=r,t[12]=u,t[13]=S):S=t[13];const E=S;let w;t[14]!==h||t[15]!==s||t[16]!==p?(w=e=>{p(h),s?.(e)},t[14]=h,t[15]=s,t[16]=p,t[17]=w):w=t[17];const v=w;let T;t[18]!==i?(T=i?{target:"_blank",rel:"noreferrer"}:{},t[18]=i,t[19]=T):T=t[19];const C=T,k=d===h?0:-1;let I;return t[20]!==h||t[21]!==_||t[22]!==E||t[23]!==v||t[24]!==C||t[25]!==c||t[26]!==k?(I=n.createElement(pa,ma({id:h,tabIndex:k,role:"menuitem",onBlur:_,onClick:E,onFocus:v},C,c)),t[20]=h,t[21]=_,t[22]=E,t[23]=v,t[24]=C,t[25]=c,t[26]=k,t[27]=I):I=t[27],I};var ga=a(18967),_a=a(20370);const ya=f.default.button.withConfig({displayName:"storyMenu__MoreVerticalButton",componentId:"sc-1vaaobv-0"})(["display:flex;background:transparent;padding:0 8px;opacity:",";transition:opacity ease-in-out 300ms;cursor:pointer;color:",";& > svg{width:4px;max-height:100%;}border:0;border-radius:",";",";"],(({menuOpen:e,isVisible:t})=>e||t?1:0),(({theme:e,$isInverted:t})=>t?e.colors.inverted.fg.primary:e.colors.interactiveFg.brandNormal),(({theme:e})=>e.borders.radius.small),(({theme:e,$isInverted:t})=>$t.focusableOutlineCSS(!1,!!t&&e.colors.standard.black)));ya.propTypes={menuOpen:g().bool};const Sa=f.default.div.withConfig({displayName:"storyMenu__MenuContainer",componentId:"sc-1vaaobv-1"})(["position:relative;align-self:",";text-align:right;"," & > div{margin:0;}"],(({verticalAlign:e="flex-start"})=>e),(({$menuStyleOverrides:e})=>e));function StoryMenu(e){const t=(0,l.c)(30),{contextMenuId:a,onMoreButtonSelected:o,storyId:s,verticalAlign:i,menuItems:c,itemActive:d,tabIndex:u,menuStyleOverrides:m,menuLabel:p,isInverted:f}=e,b=a===s;let h,g;t[0]!==o?(h=e=>o(e,-1),g=[o],t[0]=o,t[1]=h,t[2]=g):(h=t[1],g=t[2]);const _=(0,y.useCallback)(h,g),S=`story-context-menu-${s}`,E=`story-context-button-${s}`;let w,v,T,C,k,I,L;return t[3]!==p?(w=p||(0,r.__)("More Options","web-stories"),t[3]=p,t[4]=w):w=t[4],t[5]!==b||t[6]!==o||t[7]!==s?(v=e=>o(e,b?-1:s),t[5]=b,t[6]=o,t[7]=s,t[8]=v):v=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(T=n.createElement(J,null),t[9]=T):T=t[9],t[10]!==f||t[11]!==b||t[12]!==d||t[13]!==E||t[14]!==w||t[15]!==v||t[16]!==u?(C=n.createElement(ya,{"data-testid":E,tabIndex:u,menuOpen:b,isVisible:d,"aria-label":w,onClick:v,className:"context-menu-button",$isInverted:f},T),t[10]=f,t[11]=b,t[12]=d,t[13]=E,t[14]=w,t[15]=v,t[16]=u,t[17]=C):C=t[17],t[18]!==c?(k=c.map(Ea),t[18]=c,t[19]=k):k=t[19],t[20]!==_||t[21]!==b||t[22]!==k?(I=n.createElement(sa.default,{animate:!0,isOpen:b,onDismiss:_},k),t[20]=_,t[21]=b,t[22]=k,t[23]=I):I=t[23],t[24]!==m||t[25]!==I||t[26]!==S||t[27]!==C||t[28]!==i?(L=n.createElement(Sa,{verticalAlign:i,"data-testid":S,$menuStyleOverrides:m},C,I),t[24]=m,t[25]=I,t[26]=S,t[27]=C,t[28]=i,t[29]=L):L=t[29],L}function Ea(e){const{label:t,separator:a,...o}=e,r=o.href?ha:ga.default;return n.createElement(y.Fragment,{key:t},"top"===a&&n.createElement(_a.default,null),n.createElement(r,o,t),"bottom"===a&&n.createElement(_a.default,null))}Sa.propTypes={verticalAlign:g().oneOf(["center","flex-start","flex-end"])},StoryMenu.propTypes={isInverted:g().bool,itemActive:g().bool,tabIndex:g().number,storyId:g().number.isRequired,onMoreButtonSelected:g().func.isRequired,contextMenuId:g().number.isRequired,menuItems:g().arrayOf(g().shape({disabled:g().bool,href:g().string,label:g().string.isRequired,openNewTab:g().bool,onClick:g().func,onFocus:g().func})).isRequired,menuLabel:g().string,menuStyleOverrides:g().array,verticalAlign:g().oneOf(["center","flex-start","flex-end"])};const wa=f.default.div.attrs({role:"listitem"}).withConfig({displayName:"cardGridItem__CardGridItem",componentId:"sc-w3d579-0"})(["margin:0;width:100%;display:grid;grid-template-columns:100%;grid-template-rows:",";","{margin:12px 0;}&:hover ",",&:active ",",&:focus-within ","{opacity:1;}&:hover .card_buttons,&:active .card_buttons,&:focus-within .card_buttons{opacity:1;}"],(({$posterHeight:e})=>`${e}px auto`),ya,ya,ya,ya);wa.propTypes={$posterHeight:g().number};const va=wa;var Ta=a(2805);g().shape({label:g().string.isRequired,color:g().string.isRequired});const Ca=f.default.ul.withConfig({displayName:"colorList__ColorContainer",componentId:"sc-uphoth-0"})(["display:flex;margin:0;"]),ka=f.default.li.withConfig({displayName:"colorList__Color",componentId:"sc-uphoth-1"})(["",""],(({theme:e,$backgroundColor:t,color:a,size:o,spacing:n})=>`\n    width: ${o}px;\n    height: ${o}px;\n    border-radius: 50%;\n    margin-bottom: 0;\n    background-color: rgb(${t});\n    ${(e=>({"#fff":`border: solid 1px ${e}`,"#ffffff":`border: solid 1px ${e}`,white:`border: solid 1px ${e}`,"#fef9f1":`border: solid 1px ${e}`,"#fff8f2":`border: solid 1px ${e}`,"#f9f9f9":`border: solid 1px ${e}`,"#fcfcfc":`border: solid 1px ${e}`}))(e.colors.border.defaultNormal)[a]||""};\n\n    & + & {\n      margin-left: ${n||10}px;\n    }\n  `));const Ia=function ColorList(e){const t=(0,l.c)(15);let a,o,r,s,i,c;if(t[0]!==e?(({colors:a,size:r,spacing:s,...o}=e),t[0]=e,t[1]=a,t[2]=o,t[3]=r,t[4]=s):(a=t[1],o=t[2],r=t[3],s=t[4]),t[5]!==a||t[6]!==r||t[7]!==s){let e;t[9]!==r||t[10]!==s?(e=e=>{const{label:t,color:a}=e,{r:o,g:l,b:i}=(0,Ta.default)(a).color,c=`${o}, ${l}, ${i}`;return n.createElement(ka,{key:a,size:r,spacing:s,color:a,$backgroundColor:c,title:t,ariaLabel:t,"data-testid":"detail-template-color"})},t[9]=r,t[10]=s,t[11]=e):e=t[11],i=a.map(e),t[5]=a,t[6]=r,t[7]=s,t[8]=i}else i=t[8];return t[12]!==o||t[13]!==i?(c=n.createElement(Ca,o,i),t[12]=o,t[13]=i,t[14]=c):c=t[14],c},La=f.default.div.withConfig({displayName:"contentGutter__StandardViewContentGutter",componentId:"sc-17seiz9-0"})(["margin:0 ","px;"],Qe);var Aa=a(91442);function xa(){return xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},xa.apply(null,arguments)}const Oa=e=>{const t=(0,l.c)(31);let a,o,r,s,c,d,u,m,p,b,h,g;t[0]!==e?(({onClose:r,onSecondary:c,onPrimary:s,primaryText:u,secondaryText:b,primaryRest:d,secondaryRest:p,actions:a,children:o,...m}=e),t[0]=e,t[1]=a,t[2]=o,t[3]=r,t[4]=s,t[5]=c,t[6]=d,t[7]=u,t[8]=m,t[9]=p,t[10]=b):(a=t[1],o=t[2],r=t[3],s=t[4],c=t[5],d=t[6],u=t[7],m=t[8],p=t[9],b=t[10]),t[11]!==s||t[12]!==d||t[13]!==u?(h=()=>u&&n.createElement(zt.Button,xa({type:Ft.ButtonType.Primary,size:Ft.ButtonSize.Small,onClick:()=>s?.()},d),u),g=[u,d,s],t[11]=s,t[12]=d,t[13]=u,t[14]=h,t[15]=g):(h=t[14],g=t[15]);const _=(0,y.useMemo)(h,g);let S,E;t[16]!==r||t[17]!==c||t[18]!==p||t[19]!==b?(S=()=>b&&n.createElement(zt.Button,xa({type:Ft.ButtonType.Tertiary,size:Ft.ButtonSize.Small,onClick:()=>c?.()||r()},p),b),E=[b,p,c,r],t[16]=r,t[17]=c,t[18]=p,t[19]=b,t[20]=S,t[21]=E):(S=t[20],E=t[21]);const w=(0,y.useMemo)(S,E);let v,T;return t[22]!==_||t[23]!==w||t[24]!==a?(v=a||n.createElement(n.Fragment,null,w,_),t[22]=_,t[23]=w,t[24]=a,t[25]=v):v=t[25],t[26]!==o||t[27]!==r||t[28]!==m||t[29]!==v?(T=n.createElement(f.ThemeProvider,{theme:i.theme},n.createElement(Aa.default,xa({onClose:r},m,{actions:v}),o)),t[26]=o,t[27]=r,t[28]=m,t[29]=v,t[30]=T):T=t[30],T};var Da=a(39359),Na=a(19637);const Pa=(0,f.default)(zt.Button).withConfig({displayName:"fileUpload__StyledButton",componentId:"sc-1egk7ci-0"})([":focus-within{","}"],(({theme:e})=>$t.focusCSS(e.colors.border.focus))),Ra=f.default.input.withConfig({displayName:"fileUpload__Input",componentId:"sc-1egk7ci-1"})(Da.visuallyHidden),Ma=f.default.div.withConfig({displayName:"fileUpload__UploadFormArea",componentId:"sc-1egk7ci-2"})(["display:flex;flex-direction:column;align-items:center;position:relative;justify-content:flex-end;width:100%;min-height:153px;padding:40px 0;border-radius:4px;border:1px dashed ",";transition:border-color 300ms ease-in;"],(({isDragging:e,theme:t})=>e?t.colors.border.focus:t.colors.border.defaultNormal)),Ba=(0,f.default)(Na.Text.Paragraph).withConfig({displayName:"fileUpload__UploadHelperText",componentId:"sc-1egk7ci-3"})(["margin:0 auto 16px;padding:0 20%;text-align:center;color:",";"],(({theme:e})=>e.colors.fg.tertiary)),za=f.default.div.withConfig({displayName:"fileUpload__LoadingIndicator",componentId:"sc-1egk7ci-4"})(["display:flex;align-items:center;justify-content:center;position:absolute;top:0;width:100%;height:100%;background-color:",";opacity:",";z-index:",";pointer-events:none;transition:opacity ease-in-out 300ms;p{font-style:italic;}"],(({theme:e})=>e.colors.standard.white),(({isLoading:e})=>e?.6:0),(({isLoading:e})=>e?"100":"0"));function Fa(e){e.preventDefault(),e.stopPropagation()}const Ua=({id:e,label:t,onSubmit:a,isLoading:o,isMultiple:l,ariaLabel:s,instructionalText:i=(0,r.__)("You can also drag your file here","web-stories"),acceptableFormats:c=qe})=>{const d=(0,y.useRef)(null),u=(0,y.useRef)(null),[m,p]=(0,y.useState)(!1),f=(0,y.useCallback)((e=>{a(Object.values(e))}),[a]),b=(0,y.useCallback)((e=>{Fa(e),f(e.target.files),u.current.value=null}),[f]),h=(0,y.useCallback)((e=>{Fa(e);const t=e.dataTransfer.files;t&&f(t),p(!1)}),[f]),g=(0,y.useCallback)((e=>{Fa(e),p((e=>!e)),m&&e.dataTransfer.clearData()}),[m]);return(0,y.useEffect)((()=>{if(!u?.current)return()=>{};const e=u.current;return e.addEventListener("change",b),()=>{e.removeEventListener("change",b)}}),[b]),n.createElement(Ma,{ref:d,isDragging:m,onDrop:h,onDragEnter:g,onDragLeave:g,onDragOver:Fa,"data-testid":"file-upload-drop-area"},n.createElement(za,{isLoading:o},n.createElement("p",null,(0,r.__)("Loading…","web-stories"))),n.createElement(Ba,null,i),n.createElement(Pa,{forwardedAs:"label",htmlFor:e,"aria-label":s,type:Ft.ButtonType.Primary,size:Ft.ButtonSize.Small},t,n.createElement(Ra,{ref:u,type:"file",id:e,"data-testid":"upload-file-input",accept:c.join(","),multiple:l,disabled:o,"aria-live":"polite","aria-busy":o})))};var Ga=a(27172);const Ha=(0,f.default)(Ga.default).withConfig({displayName:"inlineInputForm__StyledInput",componentId:"sc-21xnmy-0"})(["div{height:auto;}",""],(({$isInverted:e,theme:t})=>e&&(0,f.css)(["input{color:",";}"],t.colors.inverted.fg.primary))),ja=e=>{const t=(0,l.c)(34),{noAutoFocus:a,error:o,id:r,isInverted:s,label:i,onEditCancel:c,onEditComplete:d,placeholder:u,value:m}=e,p=(0,y.useRef)(null),[f,b]=(0,y.useState)(m);let h,g,_,S,E,w,v,T;t[0]!==b||t[1]!==m?(h=()=>{b(m)},t[0]=b,t[1]=m,t[2]=h):h=t[2],t[3]!==m?(g=[m],t[3]=m,t[4]=g):g=t[4],(0,y.useEffect)(h,g),t[5]!==c?(_=()=>{c()},S=[c],t[5]=c,t[6]=_,t[7]=S):(_=t[6],S=t[7]),(0,y.useFocusOut)(p,_,S),t[8]!==p||t[9]!==a?(E=()=>{!a&&p.current&&p.current.querySelector("input")?.focus()},t[8]=p,t[9]=a,t[10]=E):E=t[10],t[11]!==a?(w=[a],t[11]=a,t[12]=w):w=t[12],(0,y.useEffect)(E,w),t[13]!==b?(v=e=>{const{target:t}=e;b(t.value)},T=[b],t[13]=b,t[14]=v,t[15]=T):(v=t[14],T=t[15]);const C=(0,y.useCallback)(v,T);let k,I;t[16]!==f||t[17]!==c||t[18]!==d?(I=e=>{const{nativeEvent:t}=e;13===t.keyCode?d(f):27===t.keyCode&&c()},k=[f,d,c],t[16]=f,t[17]=c,t[18]=d,t[19]=k,t[20]=I):(k=t[19],I=t[20]);const L=(0,y.useCallback)(I,k),A=`${r}`,x=Boolean(o);let O,D;return t[21]!==o||t[22]!==C||t[23]!==L||t[24]!==s||t[25]!==i||t[26]!==f||t[27]!==u||t[28]!==A||t[29]!==x?(O=n.createElement(Ha,{"aria-label":i,id:A,"data-testid":"inline-input-form",value:f,onKeyDown:L,onChange:C,placeholder:u,hasError:x,hint:o,$isInverted:s}),t[21]=o,t[22]=C,t[23]=L,t[24]=s,t[25]=i,t[26]=f,t[27]=u,t[28]=A,t[29]=x,t[30]=O):O=t[30],t[31]!==p||t[32]!==O?(D=n.createElement("div",{ref:p},O),t[31]=p,t[32]=O,t[33]=D):D=t[33],D},qa=(0,y.createContext)(null),Va=({children:e})=>{const t=(0,y.useRef)(),a=(0,y.useRef)(null);(0,y.useEffect)((()=>{t.current=document?.getElementById("web-stories-dashboard")?.querySelector(["button","a"])}),[]);const o=(0,y.useCallback)((()=>{document.documentElement?.scrollTo?.({top:0,behavior:"smooth"}),t.current?.focus()}),[]),r=(0,y.useMemo)((()=>({state:{scrollFrameRef:a},actions:{scrollToTop:o}})),[o]);return n.createElement(qa.Provider,{value:r},e)},Wa=()=>{const e=(0,y.useContext)(qa);if(!e)throw new Error("useLayoutContext() must be used within a <Layout.Provider />");return e},$a=f.default.div.withConfig({displayName:"scrollable__ScrollContent",componentId:"sc-17i1z8u-0"})([""]),Ka=e=>{const t=(0,l.c)(3),{children:a}=e,{state:o}=Wa(),{scrollFrameRef:r}=o;let s;return t[0]!==a||t[1]!==r?(s=n.createElement($a,{ref:r},a),t[0]=a,t[1]=r,t[2]=s):s=t[2],s},Xa=f.default.div.withConfig({displayName:"fixed__FixedContent",componentId:"sc-735v4o-0"})(["position:absolute;top:0;right:0;bottom:0;left:0;z-index:",";overflow:hidden;pointer-events:none;& > *{pointer-events:auto;}"],et),Ya={Provider:Va,Scrollable:Ka,Fixed:e=>{const t=(0,l.c)(2),{children:a}=e;let o;return t[0]!==a?(o=n.createElement(Xa,null,a),t[0]=a,t[1]=o):o=t[1],o}};var Ja=a(11423);const Za=f.default.div.withConfig({displayName:"pageStructureComponents__AppFrame",componentId:"sc-199ev3j-0"})(["width:100%;@media screen and (max-width:","px){width:","px;}"],We,We),Qa=f.default.div.withConfig({displayName:"pageStructureComponents__PageContent",componentId:"sc-199ev3j-1"})(["position:relative;padding-top:10px;width:",";left:",";@media screen and (max-width:","px){left:0;width:100%;}"],(({fullWidth:e})=>e?"100%":"calc(100% - 288px)"),(({fullWidth:e})=>e?"0":"288px"),We),eo=f.default.nav.attrs({"data-testid":"dashboard-left-rail"}).withConfig({displayName:"pageStructureComponents__LeftRailContainer",componentId:"sc-199ev3j-2"})(["position:fixed;display:flex;justify-content:space-between;flex-direction:column;top:",";bottom:0;width:","px;background:",";z-index:",";transition:transform 0.25s ",",opacity 0.25s linear;@media screen and (max-width:","px){padding-left:0;opacity:",";visibility:",";transform:translateX(",");}"],(({topOffset:e})=>`${e}px`),Ve,(({theme:e})=>e.colors.bg.primary),et,Ja.BEZIER.outCubic,We,(({isOpen:e})=>e?1:0),(({isOpen:e})=>e?"visible":"hidden"),(({isOpen:e})=>e?"none":"-100%")),to=f.default.div.withConfig({displayName:"pageStructureComponents__LoadingContainer",componentId:"sc-199ev3j-3"})(["display:flex;justify-content:center;align-items:center;min-height:550px;"]);var ao,oo,no,ro;function lo(){return lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},lo.apply(null,arguments)}const SvgLogoWithTypeCircleColor=({title:e,titleId:t,...a})=>n.createElement("svg",lo({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 212 64","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,ao||(ao=n.createElement("circle",{cx:32,cy:32,r:32,fill:"url(#a)",transform:"rotate(-180 32 32)"})),oo||(oo=n.createElement("g",{fill:"#fff",filter:"url(#b)"},n.createElement("path",{d:"M41.6 19.2a3.2 3.2 0 0 1 3.2 3.2v19.2a3.2 3.2 0 0 1-3.2 3.2zm-24 0a3.2 3.2 0 0 1 3.2-3.2h14.4a3.2 3.2 0 0 1 3.2 3.2v25.6a3.2 3.2 0 0 1-3.2 3.2H20.8a3.2 3.2 0 0 1-3.2-3.2zM48 22.4a2.4 2.4 0 0 1 2.4 2.4v14.4a2.4 2.4 0 0 1-2.4 2.4z"}))),no||(no=n.createElement("path",{fill:"#000",d:"m80.78 40.4-4.967-18.33h2.407l3.328 13.466.307 1.254h.102l.384-1.254 4.096-13.466h2.253l3.917 13.466.384 1.254h.102l3.61-14.72h2.406L94.17 40.4h-2.253l-3.892-13.261-.41-1.434h-.102l-.435 1.434-4.045 13.26zm24.747.41q-1.894 0-3.379-.897a6.4 6.4 0 0 1-2.304-2.457q-.82-1.561-.82-3.559 0-1.867.769-3.456.794-1.587 2.201-2.534 1.434-.973 3.354-.973 1.945 0 3.328.87a5.53 5.53 0 0 1 2.15 2.356q.768 1.51.768 3.456 0 .18-.025.358 0 .18-.026.307h-10.342q.102 1.537.742 2.56.666 1 1.638 1.51a4.5 4.5 0 0 0 2.023.487q1.434 0 2.355-.665a5.3 5.3 0 0 0 1.51-1.69l1.844.896a6.6 6.6 0 0 1-2.202 2.458q-1.434.972-3.584.972m-.179-11.905q-1.587 0-2.637.999c-1.05.999-1.161 1.527-1.382 2.585h7.961q-.026-.742-.435-1.561-.384-.844-1.229-1.434-.844-.588-2.278-.589m15.423 11.904q-1.561 0-2.739-.716-1.178-.717-1.715-1.613h-.103v1.92h-2.073V22.07h2.176v5.402l-.103 1.817h.103q.537-.921 1.715-1.638t2.739-.717q1.793 0 3.2.896 1.408.897 2.227 2.458.82 1.561.82 3.584 0 2.022-.82 3.584-.819 1.56-2.227 2.457t-3.2.896m-.23-1.97a4 4 0 0 0 2.099-.59q.999-.615 1.587-1.74.615-1.126.615-2.637 0-1.536-.615-2.637-.588-1.126-1.587-1.715a3.86 3.86 0 0 0-2.099-.615q-1.126 0-2.125.615-.973.588-1.587 1.715-.615 1.101-.615 2.637c0 1.536.205 1.911.615 2.662q.614 1.101 1.587 1.715a4.1 4.1 0 0 0 2.125.59m19.73 1.97a6.6 6.6 0 0 1-2.637-.563 6.64 6.64 0 0 1-2.304-1.664q-.998-1.101-1.459-2.739l2.074-.845q.435 1.587 1.587 2.663t2.79 1.075q1.024 0 1.869-.359a3.3 3.3 0 0 0 1.382-1.1q.538-.718.538-1.741 0-1.358-1.024-2.15-.998-.82-2.97-1.511l-1.152-.41a14 14 0 0 1-2.048-.972 5.2 5.2 0 0 1-1.689-1.536q-.666-.974-.666-2.432 0-1.332.717-2.432.717-1.101 1.971-1.767t2.893-.665q1.715 0 2.867.64 1.178.614 1.843 1.484.691.845.922 1.562l-2.022.87q-.154-.537-.589-1.1-.435-.59-1.178-.973-.716-.41-1.817-.41-.897 0-1.69.359-.768.358-1.254.998-.462.614-.461 1.434 0 1.151.921 1.817.923.666 2.484 1.203l1.203.41q.82.282 1.664.691.87.41 1.613 1.05t1.203 1.587q.46.922.461 2.227 0 1.409-.564 2.432a4.75 4.75 0 0 1-1.433 1.639 6 6 0 0 1-1.971.921q-1.05.307-2.074.307m13.187-.204q-1.638 0-2.636-.948-.999-.972-.999-2.688v-7.654h-2.278v-1.971h2.278v-3.687h2.176v3.687h3.2v1.971h-3.2v7.117q0 1.025.41 1.587.435.563 1.408.563.435 0 .793-.128.359-.127.64-.307v2.125q-.332.153-.742.23-.384.103-1.05.103m9.799.204q-1.971 0-3.482-.921a6.66 6.66 0 0 1-2.381-2.483q-.844-1.587-.844-3.533t.844-3.507a6.6 6.6 0 0 1 2.381-2.51q1.51-.92 3.482-.92c1.972 0 2.474.315 3.481.946a6.4 6.4 0 0 1 2.356 2.51q.87 1.56.87 3.48 0 1.946-.87 3.534a6.47 6.47 0 0 1-2.356 2.483q-1.51.921-3.481.921m0-1.97a4.34 4.34 0 0 0 2.201-.59 4.46 4.46 0 0 0 1.69-1.69q.64-1.125.64-2.687t-.64-2.663q-.64-1.125-1.69-1.715a4.34 4.34 0 0 0-2.201-.589q-1.178 0-2.227.59-1.05.588-1.69 1.714-.64 1.101-.64 2.663 0 1.56.64 2.688.64 1.1 1.69 1.69a4.5 4.5 0 0 0 2.227.588m8.984 1.56V27.345h2.073v2.099h.103a3.05 3.05 0 0 1 .845-1.28 4.5 4.5 0 0 1 1.382-.87 4 4 0 0 1 1.562-.333q.588 0 .921.077.333.051.615.179v2.355q-.82-.41-1.844-.41-.946 0-1.74.538a4 4 0 0 0-1.28 1.434 4.24 4.24 0 0 0-.461 1.97V40.4zm10.88-15.462q-.64 0-1.101-.46a1.5 1.5 0 0 1-.461-1.101q0-.665.461-1.101.46-.46 1.101-.46.665 0 1.101.46.46.435.46 1.1 0 .641-.46 1.102a1.45 1.45 0 0 1-1.101.46M182.046 40.4V27.344h2.176V40.4zm11.256.41q-1.894 0-3.379-.897a6.4 6.4 0 0 1-2.304-2.457q-.819-1.561-.819-3.559 0-1.867.768-3.456.794-1.587 2.201-2.534 1.434-.973 3.354-.973 1.945 0 3.328.87a5.52 5.52 0 0 1 2.15 2.356q.768 1.51.768 3.456 0 .18-.025.358 0 .18-.026.307h-10.342q.102 1.537.742 2.56.666 1 1.638 1.51a4.5 4.5 0 0 0 2.023.487q1.434 0 2.355-.665a5.3 5.3 0 0 0 1.51-1.69l1.844.896a6.6 6.6 0 0 1-2.202 2.458q-1.433.972-3.584.972m-.179-11.905q-1.587 0-2.637.999c-1.05.999-1.16 1.527-1.382 2.585h7.961q-.026-.742-.435-1.561-.384-.844-1.229-1.434-.844-.588-2.278-.589m13.475 11.904q-2.202.001-3.584-1.024-1.383-1.05-1.92-2.483l1.945-.87q.513 1.177 1.459 1.817a3.75 3.75 0 0 0 2.1.64q1.151 0 2.048-.486.921-.486.921-1.434 0-.87-.768-1.356-.742-.487-2.099-.82l-1.587-.41q-.922-.255-1.741-.716c-.819-.461-.99-.7-1.331-1.178q-.487-.741-.487-1.792 0-1.178.692-2.022.69-.845 1.817-1.28a6.3 6.3 0 0 1 2.407-.46q1.664 0 3.02.742 1.383.717 1.946 2.073l-1.894.87q-.487-.972-1.306-1.356c-.819-.384-1.143-.384-1.792-.384q-1.025 0-1.869.486-.819.46-.819 1.28t.64 1.229q.665.41 1.613.666l1.894.486q3.866.999 3.866 3.789 0 1.228-.691 2.125-.692.896-1.869 1.382t-2.611.486"})),ro||(ro=n.createElement("defs",null,n.createElement("linearGradient",{id:"a",x1:13.255,x2:35.289,y1:6.599,y2:62.791,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#79B3FF"}),n.createElement("stop",{offset:1,stopColor:"#CBACFF"})),n.createElement("filter",{id:"b",width:46.08,height:46.08,x:8.96,y:10.24,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},n.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),n.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),n.createElement("feOffset",{dy:1.28}),n.createElement("feGaussianBlur",{stdDeviation:1.92}),n.createElement("feColorMatrix",{values:"0 0 0 0 0.423529 0 0 0 0 0.490196 0 0 0 0 0.733333 0 0 0 0.3 0"}),n.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}))))),so=(0,n.memo)(SvgLogoWithTypeCircleColor);var io=a(55313),co=a(57971);const uo=(0,y.createContext)({state:{activeRoute:"",currentPath:"",queryParams:{},availableRoutes:[],defaultRoute:""},actions:{push:()=>{},replace:()=>{},setAvailableRoutes:()=>[]}});function mo(e){const t=new URLSearchParams(e);return Object.fromEntries(t)}const po=function RouterProvider(e){const t=(0,l.c)(32);let a,o,r;t[0]!==e?(({children:a,...o}=e),t[0]=e,t[1]=a,t[2]=o):(a=t[1],o=t[2]),t[3]!==o.history?(r=o.history||(0,co.createHashHistory)(),t[3]=o.history,t[4]=r):r=t[4];const s=(0,y.useRef)(r),[i,c]=(0,y.useState)(s.current.location.pathname);let d;t[5]===Symbol.for("react.memo_cache_sentinel")?(d=[],t[5]=d):d=t[5];const[u,m]=(0,y.useState)(d),p=tt.DASHBOARD;let f,b;t[6]!==u||t[7]!==i?(f=()=>(({availableRoutes:e,currentPath:t,defaultRoute:a})=>{const o=e.filter((e=>t.startsWith(e)));return o.length<=1?a:t})({availableRoutes:u,currentPath:i,defaultRoute:p}),b=[u,i,p],t[6]=u,t[7]=i,t[8]=f,t[9]=b):(f=t[8],b=t[9]);const h=(0,y.useMemo)(f,b),g=mo;let _;t[10]!==s.current.location.search?(_=g(s.current.location.search),t[10]=s.current.location.search,t[11]=_):_=t[11];const[S,E]=(0,y.useState)(_);let w,v,T,C;t[12]!==s.current||t[13]!==c||t[14]!==E?(w=()=>s.current.listen((e=>{const{location:t}=e;E(g(t.search)),c(t.pathname)})),t[12]=s.current,t[13]=c,t[14]=E,t[15]=w):w=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(v=[],t[16]=v):v=t[16],(0,y.useEffect)(w,v),t[17]!==h||t[18]!==u||t[19]!==i||t[20]!==s.current||t[21]!==S||t[22]!==m?(T=()=>({state:{activeRoute:h,currentPath:i,queryParams:S,availableRoutes:u,defaultRoute:p},actions:{push:e=>s.current.push(e),replace:e=>s.current.replace(e),setAvailableRoutes:m}}),t[17]=h,t[18]=u,t[19]=i,t[20]=s.current,t[21]=S,t[22]=m,t[23]=T):T=t[23],t[24]!==h||t[25]!==u||t[26]!==i||t[27]!==S?(C=[h,u,i,p,S],t[24]=h,t[25]=u,t[26]=i,t[27]=S,t[28]=C):C=t[28];const k=(0,y.useMemo)(T,C);let I;return t[29]!==a||t[30]!==k?(I=n.createElement(uo.Provider,{value:k},a),t[29]=a,t[30]=k,t[31]=I):I=t[31],I};const fo=function(e){const t=void 0===e?y.identity:e;return(0,y.useContextSelector)(uo,t)};function bo(e){return e.toLowerCase().startsWith("http://")||e.toLowerCase().startsWith("https://")?e:e.startsWith("/")?`#${e}`:""===e?"#/":`${window.location.hash}/${e}`}function ho(e){const{state:t}=e;return t}const go=function Route(e){const{component:t,path:a,exact:o,isDefault:n}=e,r=void 0!==o&&o,l=void 0!==n&&n,{availableRoutes:s,currentPath:i,defaultRoute:c}=fo(ho),d=function({currentPath:e,path:t,availableRoutes:a,defaultRoute:o,isDefault:n=!1,exact:r=!1}){const l=new RegExp(`^${t}`).exec(e);if(!l&&!n)return null;const s=l?.[0];if(n){const t=a.filter((t=>e.startsWith(t))).length<=1;if(t)return o}return r&&e!==s?null:s}({currentPath:i,availableRoutes:s,defaultRoute:c,path:a,exact:r,isDefault:l});return d?t:null},_o=(0,y.createContext)({actions:{},state:{}});function yo(e){const t=void 0===e?y.identity:e;return(0,y.useContextSelector)(_o,t)}function NavProvider(e){const t=(0,l.c)(12),{children:a}=e,[o,r]=(0,y.useState)(!1);let s,i;t[0]!==r||t[1]!==o?(s=()=>{r(!o)},t[0]=r,t[1]=o,t[2]=s):s=t[2],t[3]!==o?(i=[o],t[3]=o,t[4]=i):i=t[4];const c=(0,y.useCallback)(s,i);let d,u;t[5]!==o||t[6]!==c?(d=()=>({actions:{toggleSideBar:c},state:{sideBarVisible:o}}),u=[o,c],t[5]=o,t[6]=c,t[7]=d,t[8]=u):(d=t[7],u=t[8]);const m=(0,y.useMemo)(d,u);let p;return t[9]!==a||t[10]!==m?(p=n.createElement(_o.Provider,{value:m},a),t[9]=a,t[10]=m,t[11]=p):p=t[11],p}NavProvider.propTypes={children:g().oneOfType([g().arrayOf(g().node),g().node]).isRequired};var So=a(75850);const Eo=f.default.div.withConfig({displayName:"navigationComponents__Content",componentId:"sc-6htb2i-0"})(["display:flex;flex-direction:column;margin:20px 0;> *{margin:20px 28px;}"]),wo=(0,f.default)(So.Headline).withConfig({displayName:"navigationComponents__Header",componentId:"sc-6htb2i-1"})(["margin:42px 0px 72px;& > svg{margin:0 28px;height:64px;}"]),vo=f.default.ul.withConfig({displayName:"navigationComponents__NavList",componentId:"sc-6htb2i-2"})(["margin:0;padding:0;"]),To=f.default.li.withConfig({displayName:"navigationComponents__NavListItem",componentId:"sc-6htb2i-3"})(["margin:10px 28px;padding:0;list-style-type:none;"]),Co=(0,f.css)(["span{color:",";}svg path{stroke:",";}"],(({theme:e})=>e.colors.interactiveFg.brandPress),(({theme:e})=>e.colors.interactiveFg.brandPress)),ko=(0,f.default)(ca.Link).withConfig({displayName:"navigationComponents__NavLink",componentId:"sc-6htb2i-4"})((({active:e,theme:t,isIconLink:a})=>(0,f.css)([""," color:",";*{transition:color 0.25s linear,stroke 0.25s linear;}",";:hover{",";}"],a&&(0,f.css)(["display:grid;grid-template-columns:1fr 4fr;grid-template-areas:'icon link link link link';"]),t.colors.fg.secondary,e&&Co,Co))),Io=(0,f.default)(Na.Text.Span).withConfig({displayName:"navigationComponents__PathName",componentId:"sc-6htb2i-5"})(["grid-area:link;"]),Lo=(0,f.default)(Na.Text.Paragraph).withConfig({displayName:"navigationComponents__AppInfo",componentId:"sc-6htb2i-6"})((({theme:e})=>(0,f.css)(["color:",";"],e.colors.fg.secondary)));function Ao(){return Ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Ao.apply(null,arguments)}const xo=f.default.div.withConfig({displayName:"leftRail__IconWrap",componentId:"sc-wua966-0"})(["position:relative;"]);function Oo(e,t){(0,v.trackClick)(e,t.trackingEvent)}function Do(){(0,v.trackEvent)("create_new_story")}function No(e){const{state:t}=e;return t.activeRoute}const Po=function LeftRail(){const e=(0,l.c)(55),t=fo(No),{newStoryURL:a,version:o,leftRailSecondaryNavigation:s,canViewDefaultTemplates:i,styleConstants:c}=w(),{topOffset:d}=c,u=(0,y.useRef)(null),m=(0,y.useRef)(null),{state:p,actions:f}=yo(),{sideBarVisible:b}=p,{toggleSideBar:h}=f;let g,_;e[0]!==u.current||e[1]!==h||e[2]!==m?(g=e=>{const{target:t}=e;t!==u.current&&t!==m.current&&h()},e[0]=u.current,e[1]=h,e[2]=m,e[3]=g):g=e[3],e[4]!==u||e[5]!==h||e[6]!==m?(_=[h,u,m],e[4]=u,e[5]=h,e[6]=m,e[7]=_):_=e[7];const S=(0,y.useCallback)(g,_);let E,v;e[8]!==b||e[9]!==h?(E=()=>{b&&h()},v=[h,b],e[8]=b,e[9]=h,e[10]=E,e[11]=v):(E=e[10],v=e[11]);const T=(0,y.useCallback)(E,v);let C,k,I,L;e[12]!==b?(C=[b],e[12]=b,e[13]=C):C=e[13],(0,y.useFocusOut)(u,T,C),e[14]!==u.current||e[15]!==b?(k=()=>{b&&u.current&&u.current.focus()},e[14]=u.current,e[15]=b,e[16]=k):k=e[16],e[17]!==b?(I=[b],e[17]=b,e[18]=I):I=e[18],(0,y.useLayoutEffect)(k,I),e[19]===Symbol.for("react.memo_cache_sentinel")?(L=[],e[19]=L):L=e[19];const A=(0,y.useCallback)(Do,L);let x;e[20]===Symbol.for("react.memo_cache_sentinel")?(x=[],e[20]=x):x=e[20];const O=(0,y.useCallback)(Oo,x);let D,N,P,R,M,B,z,F,U,G,H,j;return e[21]===Symbol.for("react.memo_cache_sentinel")?(D=(0,r.__)("Main dashboard navigation","web-stories"),e[21]=D):D=e[21],e[22]===Symbol.for("react.memo_cache_sentinel")?(N=n.createElement(wo,{forwardedAs:"h2"},n.createElement(so,{title:(0,r.__)("Web Stories Dashboard","web-stories")})),e[22]=N):N=e[22],e[23]===Symbol.for("react.memo_cache_sentinel")?(P=(0,r.__)("Create New Story","web-stories"),e[23]=P):P=e[23],e[24]!==a||e[25]!==A?(R=n.createElement(Eo,null,n.createElement(zt.ButtonAsLink,{type:Ft.ButtonType.Quaternary,size:Ft.ButtonSize.Small,href:a,onClick:A},P)),e[24]=a,e[25]=A,e[26]=R):R=e[26],e[27]!==t||e[28]!==i||e[29]!==O?(M=ot.map((e=>{const{Icon:a,...o}=e;return o.value===tt.TEMPLATES_GALLERY&&!i?null:n.createElement(To,{key:o.value},n.createElement(ko,Ao({active:t===o.value,href:bo(o.value),size:io.TextSize.Small,isBold:!0,isIconLink:Boolean(a),"aria-label":t===o.value?(0,Z.default)((0,r.__)("%s (active view)","web-stories"),o.label):o.label},o.isExternal&&{rel:"noreferrer",target:"_blank",onClick:e=>O(e,o)}),n.createElement(xo,null,a&&n.createElement(a,{width:"22px"})),n.createElement(Io,{size:io.TextSize.Small,isBold:!0},o.label)))})),e[27]=t,e[28]=i,e[29]=O,e[30]=M):M=e[30],e[31]!==M?(B=n.createElement(Eo,null,n.createElement(vo,null,M)),e[31]=M,e[32]=B):B=e[32],e[33]!==R||e[34]!==B||e[35]!==m?(z=n.createElement("div",{ref:m},N,R,B),e[33]=R,e[34]=B,e[35]=m,e[36]=z):z=e[36],e[37]!==t||e[38]!==s||e[39]!==O?(F=s&&n.createElement(vo,null,s.map((e=>n.createElement(To,{key:e.value},n.createElement(ko,Ao({active:t===e.value,href:bo(e.value),size:io.TextSize.Small,"aria-label":t===e.value?(0,Z.default)((0,r.__)("%s (active view)","web-stories"),e.label):e.label},e.isExternal&&{rel:"noreferrer",target:"_blank",onClick:t=>O(t,e)}),n.createElement(Na.Text.Span,{size:io.TextSize.Small,isBold:!0},e.label)))))),e[37]=t,e[38]=s,e[39]=O,e[40]=F):F=e[40],e[41]!==o?(U=(0,Z.default)((0,r.__)("© %1$s Google Version %2$s","web-stories"),(new Date).getFullYear(),o),e[41]=o,e[42]=U):U=e[42],e[43]!==U?(G=n.createElement(Lo,{size:io.TextSize.XSmall},U),e[43]=U,e[44]=G):G=e[44],e[45]!==F||e[46]!==G?(H=n.createElement(Eo,null,F,G),e[45]=F,e[46]=G,e[47]=H):H=e[47],e[48]!==u||e[49]!==S||e[50]!==b||e[51]!==z||e[52]!==H||e[53]!==d?(j=n.createElement(eo,{onClickCapture:S,ref:u,isOpen:b,topOffset:d,role:"navigation","aria-label":D},z,H),e[48]=u,e[49]=S,e[50]=b,e[51]=z,e[52]=H,e[53]=d,e[54]=j):j=e[54],j},Ro=(0,f.default)(K).attrs({width:24,height:24}).withConfig({displayName:"menuButton__MenuIcon",componentId:"sc-ov12l5-0"})(["display:block;color:",";"],(({theme:e})=>e.colors.interactiveFg.brandNormal)),Mo=f.default.button.withConfig({displayName:"menuButton__TransparentButton",componentId:"sc-ov12l5-1"})(["display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;padding:0;margin-right:16px;background:transparent;border:0;border-radius:",";"," ",""],(({theme:e})=>e.borders.radius.small),$t.focusableOutlineCSS,(({showOnlyOnSmallViewport:e})=>e&&(0,f.css)(["display:none;@media screen and (max-width:","px){display:inline-block;}"],We)));function NavMenuButton(e){const t=(0,l.c)(5),{showOnlyOnSmallViewport:a}=e,{actions:o}=yo(),s=o.toggleSideBar;let i,c,d;return t[0]===Symbol.for("react.memo_cache_sentinel")?(i=(0,r.__)("Toggle main navigation","web-stories"),c=n.createElement(Ro,{"aria-hidden":!0}),t[0]=i,t[1]=c):(i=t[0],c=t[1]),t[2]!==o.toggleSideBar||t[3]!==a?(d=n.createElement(Mo,{onClick:s,showOnlyOnSmallViewport:a,"aria-label":i},c),t[2]=o.toggleSideBar,t[3]=a,t[4]=d):d=t[4],d}NavMenuButton.propTypes={showOnlyOnSmallViewport:g().bool};const Bo=NavMenuButton;var zo=a(23005);const Fo=(0,f.default)(zt.Button).withConfig({displayName:"scrollToTop__StyledButton",componentId:"sc-o0u22z-0"})((({$isVisible:e,theme:t})=>(0,f.css)(["position:fixed;right:40px;bottom:40px;height:50px;width:50px;display:flex;align-self:center;justify-content:space-around;align-items:center;contain:content;padding:8px;background-color:",";pointer-events:",";box-shadow:0px 4px 14px rgba(0,0,0,0.25);opacity:",";transition:opacity 300ms ease-in-out;"],t.colors.opacity.white64,e?"auto":"none",Number(e)))),Uo=(0,f.default)(zo.default).withConfig({displayName:"scrollToTop__DropUpArrowIcon",componentId:"sc-o0u22z-1"})(["position:relative;transform:scale(2.4);"]),Go=()=>{const e=(0,l.c)(11),[t,a]=(0,y.useState)(!1),{actions:o}=Wa(),{scrollToTop:s}=o;let i;e[0]!==a?(i=()=>a(window.scrollY>0),e[0]=a,e[1]=i):i=e[1];const c=(0,y.useDebouncedCallback)(i,100);let d,u;e[2]!==c?(d=()=>(window.addEventListener("scroll",c,{passive:!0}),()=>{window.removeEventListener("scroll",c,{passive:!0})}),u=[c],e[2]=c,e[3]=d,e[4]=u):(d=e[3],u=e[4]),(0,y.useEffect)(d,u);const m=!t;let p,f,b;return e[5]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.__)("Scroll back to top","web-stories"),e[5]=p):p=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(f=n.createElement(Uo,{"aria-hidden":!0}),e[6]=f):f=e[6],e[7]!==t||e[8]!==s||e[9]!==m?(b=n.createElement(Fo,{disabled:m,"aria-label":p,"data-testid":"scroll-to-top-button",$isVisible:t,onClick:s,variant:Ft.ButtonVariant.Circle},f),e[7]=t,e[8]=s,e[9]=m,e[10]=b):b=e[10],b};var Ho=a(96833);const jo=f.default.table.withConfig({displayName:"table__Table",componentId:"sc-16y5cap-0"})([""," border-collapse:collapse;width:inherit;"],Ho.expandTextPreset((({paragraph:e},{Small:t})=>e[t]))),qo=f.default.tbody.withConfig({displayName:"table__TableBody",componentId:"sc-16y5cap-1"})([""]),Vo=f.default.thead.withConfig({displayName:"table__TableHeader",componentId:"sc-16y5cap-2"})(["background:",";"],(({theme:e})=>e.colors.bg.secondary)),Wo=(0,f.default)(Vo).withConfig({displayName:"table__StickyTableHeader",componentId:"sc-16y5cap-3"})(["width:100%;border-top:0;border-bottom:0;th{height:100%;background:",";position:sticky;z-index:2;top:",";:first-child{border-top-left-radius:",";border-bottom-left-radius:",";}:last-child{border-top-right-radius:",";border-bottom-right-radius:",";}}"],(({theme:e})=>e.colors.bg.secondary),(({topOffset:e})=>`${e}px`),(({theme:e})=>e.borders.radius.small),(({theme:e})=>e.borders.radius.small),(({theme:e})=>e.borders.radius.small),(({theme:e})=>e.borders.radius.small)),$o=f.default.th.withConfig({displayName:"table__TableHeaderCell",componentId:"sc-16y5cap-4"})(["padding:16px;text-align:left;white-space:nowrap;"]),Ko=(0,f.default)($o).withConfig({displayName:"table__TablePreviewHeaderCell",componentId:"sc-16y5cap-5"})(["padding-right:0;"]),Xo=(0,f.default)($o).withConfig({displayName:"table__TableDateHeaderCell",componentId:"sc-16y5cap-6"})(["min-width:160px;"]),Yo=(0,f.default)($o).withConfig({displayName:"table__TableStatusHeaderCell",componentId:"sc-16y5cap-7"})(["display:table-cell;min-width:100px;@media ","{display:none;}"],(({theme:e})=>e.breakpoint.tabletMax)),Jo=(0,f.default)($o).withConfig({displayName:"table__TableAuthorHeaderCell",componentId:"sc-16y5cap-8"})(["min-width:110px;"]),Zo=(0,f.default)($o).withConfig({displayName:"table__TableTitleHeaderCell",componentId:"sc-16y5cap-9"})(["padding-left:0;width:30%;min-width:135px;span{display:none;margin-right:5px;}"]),Qo=((0,f.default)($o).withConfig({displayName:"table__TableContentHeaderCell",componentId:"sc-16y5cap-10"})(["width:17.5%;min-width:150px;"]),f.default.tr.withConfig({displayName:"table__TableRow",componentId:"sc-16y5cap-11"})(["min-width:1250px;@media ","{min-width:0;}"],(({theme:e})=>e.breakpoint.tabletMax))),en=f.default.td.withConfig({displayName:"table__TableCell",componentId:"sc-16y5cap-12"})(["padding:","px;font-weight:normal;overflow-wrap:anywhere;word-break:normal;height:","px;vertical-align:middle;span{color:",";line-height:20px;}"],16,82,(({theme:e})=>e.colors.standard.black)),tn=(0,f.default)(en).withConfig({displayName:"table__TableStatusCell",componentId:"sc-16y5cap-13"})(["display:table-cell;span{color:",";}@media ","{display:none;}"],(({theme:e})=>e.colors.fg.secondary),(({theme:e})=>e.breakpoint.tabletMax)),an=((0,f.default)(en).withConfig({displayName:"table__TableTitleCell",componentId:"sc-16y5cap-14"})(["width:30%;word-wrap:break-word;"]),(0,f.default)(en).withConfig({displayName:"table__TableContentCell",componentId:"sc-16y5cap-15"})(["width:17.5%;min-width:150px;word-wrap:break-word;"]),(0,f.default)(en).withConfig({displayName:"table__TablePreviewCell",componentId:"sc-16y5cap-16"})(["width:","px;"],Ye[Xe]));var on,nn=a(37699),rn=a(14560);function ln(){return ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},ln.apply(null,arguments)}function Tooltip(e){const t=(0,l.c)(6);let a,o;t[0]!==e?(({placement:o,...a}=e),t[0]=e,t[1]=a,t[2]=o):(a=t[1],o=t[2]);const r=void 0===o?nn.Placement.Bottom:o,{isRTL:s}=w(),i=s?nn.RTL_PLACEMENT[r]:r;let c;return t[3]!==i||t[4]!==a?(c=n.createElement(rn.default,ln({placement:i},a)),t[3]=i,t[4]=a,t[5]=c):c=t[5],c}function sn(){return sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},sn.apply(null,arguments)}Tooltip.propTypes={children:g().node.isRequired,hasTail:g().bool,placement:g().oneOf(Object.values(nn.Placement)),onBlur:g().func,onFocus:g().func,shortcut:g().string,title:g().oneOfType([g().node,g().string]),forceAnchorRef:g().object,styleOverride:g().object,className:g().string,isDelayed:g().bool,popupZIndexOverride:g().number};const SvgTable=({title:e,titleId:t,...a})=>n.createElement("svg",sn({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,on||(on=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.5 9A1.5 1.5 0 0 0 8 10.5v11A1.5 1.5 0 0 0 9.5 23h13a1.5 1.5 0 0 0 1.5-1.5v-11A1.5 1.5 0 0 0 22.5 9h-13m3 1h-3a.5.5 0 0 0-.5.5V13h3.5zM9 14v4h3.5v-4zm0 5v2.5a.5.5 0 0 0 .5.5h3v-3zm4.5 3h9a.5.5 0 0 0 .5-.5V19h-9.5zm9.5-4v-4h-9.5v4zm0-5v-2.5a.5.5 0 0 0-.5-.5h-9v3z",clipRule:"evenodd"}))),cn=(0,n.memo)(SvgTable);var dn=a(41167);const un=f.default.div.withConfig({displayName:"viewStyleBar__Container",componentId:"sc-17r9rf0-0"})(["display:flex;justify-content:flex-end;align-items:center;"]),mn=f.default.button.withConfig({displayName:"viewStyleBar__ToggleButton",componentId:"sc-17r9rf0-1"})(["border:none;border-radius:",";"," padding:0;background:transparent;cursor:pointer;&:hover svg{color:",";}&:active svg{color:",";}"],(({theme:e})=>e.borders.radius.small),$t.focusableOutlineCSS,(({theme:e})=>e.colors.interactiveFg.hover),(({theme:e})=>e.colors.interactiveFg.active));function ViewStyleBar(e){const t=(0,l.c)(12),{onPress:a,layoutStyle:o}=e,r=rt[o],s=rt[o];let i,c,d,u;return t[0]!==o?(i=o===nt.GRID&&n.createElement(cn,{height:"32px",width:"32px","data-testid":"list-icon"}),t[0]=o,t[1]=i):i=t[1],t[2]!==o?(c=o===nt.LIST&&n.createElement(dn.default,{height:"32px",width:"32px","data-testid":"grid-icon"}),t[2]=o,t[3]=c):c=t[3],t[4]!==a||t[5]!==s||t[6]!==i||t[7]!==c?(d=n.createElement(mn,{"aria-label":s,onClick:a},i,c),t[4]=a,t[5]=s,t[6]=i,t[7]=c,t[8]=d):d=t[8],t[9]!==r||t[10]!==d?(u=n.createElement(un,null,n.createElement(Tooltip,{title:r,placement:nn.Placement.BottomEnd,hasTail:!0},d)),t[9]=r,t[10]=d,t[11]=u):u=t[11],u}ViewStyleBar.propTypes={onPress:g().func,layoutStyle:g().oneOf([nt.GRID,nt.LIST]).isRequired};const pn=(0,f.createGlobalStyle)(["h1,h2,h3,h4,h5,h6,p,a{margin:0;}"]),fn=e=>""===e?(0,r.__)("Untitled","web-stories"):e,bn=(0,f.createGlobalStyle)(["*:focus{outline:none !important;}"]),hn=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Tab"],gn=()=>{const e=(0,l.c)(14),[t,a]=(0,y.useState)(!1);let o;e[0]!==a||e[1]!==t?(o=e=>{!t&&hn.includes(e.key)&&a(!0)},e[0]=a,e[1]=t,e[2]=o):o=e[2];const r=o;let s;e[3]!==a||e[4]!==t?(s=()=>{t&&a(!1)},e[3]=a,e[4]=t,e[5]=s):s=e[5];const i=s;let c,d,u,m;return e[6]!==r||e[7]!==i?(c=()=>(document.addEventListener("keydown",r),document.addEventListener("mousedown",i),function(){document.removeEventListener("keydown",r),document.removeEventListener("mousedown",i)}),e[6]=r,e[7]=i,e[8]=c):c=e[8],(0,y.useEffect)(c),e[9]!==t?(d=()=>{document.body.classList.toggle("useskeyboard",t)},u=[t],e[9]=t,e[10]=d,e[11]=u):(d=e[10],u=e[11]),(0,y.useEffect)(d,u),e[12]!==t?(m=t?null:n.createElement(bn,null),e[12]=t,e[13]=m):m=e[13],m};function _n(e){const t=(0,l.c)(6),{isActiveSearch:a,currentFilter:o,totalResults:n,view:s}=e;let i,c;t[0]!==o||t[1]!==a||t[2]!==n||t[3]!==s?(i=()=>{const e=n??0,t=it[s]?.[o]||"",l="function"==typeof t?t(e):t;return a?(0,Z.default)((0,r._n)("%s result","%s results",e,"web-stories"),(0,Z.default)("<strong>%s</strong>",e)):l},c=[a,n,s,o],t[0]=o,t[1]=a,t[2]=n,t[3]=s,t[4]=i,t[5]=c):(i=t[4],c=t[5]);return(0,y.useMemo)(i,c)}const yn=2/3,Sn=e=>Math.round(e/yn),En=e=>e<=We?$e:Ke,wn=(e,{bp:t,respectSetWidth:a,availableContainerSpace:o})=>{if(a){return{width:e,height:Sn(e)}}t===Ke&&(o-=Ve);const n=Math.floor(o/e),r=e+(o-(e*n+Je*(n-1)+2*Qe))/n;return{width:r,height:Sn(r)}},vn=e=>window.innerWidth<We?We:e;function Tn(e){const t=(0,l.c)(26);let a;t[0]!==e?(a=void 0===e?{}:e,t[0]=e,t[1]=a):a=t[1];const o=a,{thumbnailMode:n,isGrid:r}=o,s=void 0!==n&&n,{containerId:i}=w();let c;t[2]!==i?(c=document.getElementById(i),t[2]=i,t[3]=c):c=t[3];const d=(0,y.useRef)(c),[u,m]=(0,y.useState)(window.innerWidth);let p;t[4]!==u?(p=En(u),t[4]=u,t[5]=p):p=t[5];const[f,b]=(0,y.useState)(p),h=d.current?.offsetWidth||window.innerWidth;let g;t[6]!==h?(g=vn(h),t[6]=h,t[7]=g):g=t[7];const[_,S]=(0,y.useState)(g);let E;t[8]!==m?(E=e=>{m(e)},t[8]=m,t[9]=E):E=t[9];const v=(0,y.useDebouncedCallback)(E,500);let T,C,k,I,L,A;return t[10]!==b||t[11]!==u?(T=()=>{b(En(u))},t[10]=b,t[11]=u,t[12]=T):T=t[12],t[13]!==u?(C=[u],t[13]=u,t[14]=C):C=t[14],(0,y.useEffect)(T,C),t[15]!==v||t[16]!==S||t[17]!==u?(k=e=>{const{width:t}=e;S(vn(t)),window.innerWidth!==u&&v(window.innerWidth)},I=[S,u,v],t[15]=v,t[16]=S,t[17]=u,t[18]=k,t[19]=I):(k=t[18],I=t[19]),(0,y.useResizeEffect)(d,k,I),t[20]!==_||t[21]!==f||t[22]!==r||t[23]!==s?(L=()=>({pageSize:wn(Ye[s?Xe:f],{respectSetWidth:!r||s,availableContainerSpace:_,bp:f})}),A=[f,r,s,_],t[20]=_,t[21]=f,t[22]=r,t[23]=s,t[24]=L,t[25]=A):(L=t[24],A=t[25]),(0,y.useMemo)(L,A)}const Cn=(e,{MIN:t,MAX:a})=>Math.min(Math.max(e,t),a);const kn=g().shape({style:g().oneOf(Object.values(nt)),toggleStyle:g().func,pageSize:ta}),In=(g().shape({filterId:g().number,toggleFilterId:g().func,queriedAuthors:g().arrayOf(g().shape({id:g().number,name:g().string})).isRequired,setQueriedAuthors:g().func}),g().shape({value:g().oneOfType([g().number,g().string]),set:g().func}),g().shape({value:g().oneOf(Object.values(se)),set:g().func,direction:g().oneOf(Object.values(le)),setDirection:g().func}),g().shape({value:g().number,set:g().func,requestNextPage:g().func})),Ln=(g().shape({keyword:g().string,setKeyword:g().func}),g().shape({current:g().bool}));const An=g().shape({style:g().oneOf(Object.values(nt)),pageSize:ta}),xn=(g().shape({value:g().oneOfType([g().number,g().string]),set:g().func}),g().shape({value:g().number,set:g().func,requestNextPage:g().func}),g().shape({keyword:g().string,setKeyword:g().func}),g().shape({value:g().oneOf(Object.values(ze)),set:g().func}),()=>{}),On=()=>({isRTL:!1,userId:1,locale:{locale:"en-US",dateFormat:"F j, Y",timeFormat:"g:i a",gmtOffset:"0",timezone:"",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysInitials:["S","M","T","W","T","F","S"],weekStartsOn:1},newStoryURL:"",cdnURL:"https://wp.stories.google/static/main/",version:"",capabilities:{canManageSettings:!1,canUploadFiles:!1},canViewDefaultTemplates:!1,flags:{},apiCallbacks:{},leftRailSecondaryNavigation:[],styleConstants:{topOffset:0,leftOffset:0}});function Dashboard(e){const t=(0,l.c)(27),{config:a,children:o}=e;let r;t[0]!==a?(r=(0,s.default)(On(),a),t[0]=a,t[1]=r):r=t[1];const h=r;let g;t[2]===Symbol.for("react.memo_cache_sentinel")?(g={...i.theme,colors:c.light},t[2]=g):g=t[2];const y=g,{isRTL:S,flags:w,styleConstants:v}=h;let T;t[3]!==v?(T=void 0===v?{}:v,t[3]=v,t[4]=T):T=t[4];const{leftOffset:C,topOffset:k}=T;let I,L,A,x,O,D,N,P,R,M;return t[5]!==S?(I=S?[b.default]:[],t[5]=S,t[6]=I):I=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(L=n.createElement(d.Styles,null),A=n.createElement(u.ModalGlobalStyle,null),t[7]=L,t[8]=A):(L=t[7],A=t[8]),t[9]!==S||t[10]!==C||t[11]!==k?(x={isRTL:S,leftOffset:C,topOffset:k},t[9]=S,t[10]=C,t[11]=k,t[12]=x):x=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(D=n.createElement(pn,null),O=n.createElement(gn,null),t[13]=O,t[14]=D):(O=t[13],D=t[14]),t[15]!==o||t[16]!==x?(N=n.createElement(ApiProvider,null,n.createElement(NavProvider,null,n.createElement(po,null,n.createElement(m.default,null,n.createElement(p.default,{value:x},D,O,o))))),t[15]=o,t[16]=x,t[17]=N):N=t[17],t[18]!==h||t[19]!==N?(P=n.createElement(f.ThemeProvider,{theme:y},L,A,n.createElement(E,{config:h},N)),t[18]=h,t[19]=N,t[20]=P):P=t[20],t[21]!==P||t[22]!==I?(R=n.createElement(f.StyleSheetManager,{stylisPlugins:I},P),t[21]=P,t[22]=I,t[23]=R):R=t[23],t[24]!==w||t[25]!==R?(M=n.createElement(_.FlagsProvider,{features:w},R),t[24]=w,t[25]=R,t[26]=M):M=t[26],M}Object.defineProperty(b.default,"name",{value:"stylisRTLPlugin"}),Dashboard.propTypes={config:g().object.isRequired,children:g().node};const Dn=Dashboard;var Nn=a(40089),Pn=a(68009);const Rn="UPDATE_FILTER",Mn="UPDATE_SORT",Bn="REGISTER_FILTERS",zn=(e,{type:t,payload:a={}})=>{switch(t){case Rn:{const t=["search","status"],{key:o,value:n}=a,r=e.filters.find((e=>e.key===o));if(!r)return e;if(n.filterId&&r?.filterId===n.filterId){if(t.includes(o))return e;n.filterId=null}const l=e.filters.indexOf(r),s=[...e.filters];s[l]={...r,...n};const i={};for(const e of s)e.filterId&&(i[e.key]=e.filterId);return{...e,filters:s,filtersObject:i}}case Mn:{const{type:t,values:o}=a,n={},r="story"===t?ie:Fe;for(const t in o)t in r&&Object.values(r[t]).includes(o[t])&&e.sortObject[t]!==o[t]&&(n[t]=o[t]);return 0===Object.entries(n).length?e:{...e,sortObject:{...e.sortObject,...n}}}case Bn:{const{value:t}=a,o=e.filters.map((e=>e.key)),n=t.filter((e=>!o.includes(e.key)));return n.length?{...e,filters:[...n,...e.filters]}:e}default:return e}};function Fn(e){const t=void 0===e?y.identity:e;return(0,y.useContextSelector)(Mt,t)}const Un={};function Gn(e){const{actions:t}=e,{taxonomyApi:a}=t,{getTaxonomies:o,getTaxonomyTerms:n}=a;return{getTaxonomies:o,getTaxonomyTerms:n}}const Hn=function(){const e=(0,l.c)(11),{getTaxonomies:t,getTaxonomyTerms:a}=Fn(Gn);let o,n;e[0]!==a?(o=async(e,t)=>{const{restBase:o,restPath:n}=e;return(await a(n,{search:t,per_page:-1})).map((e=>({...e,restBase:o,restPath:n})))},n=[a],e[0]=a,e[1]=o,e[2]=n):(o=e[1],n=e[2]);const r=(0,y.useCallback)(o,n);let s,i;e[3]!==r?(s=async e=>{const{restBase:t}=e;return Un[t]||(Un[t]=await r(e)),Un[t]},i=[r],e[3]=r,e[4]=s,e[5]=i):(s=e[4],i=e[5]);const c=(0,y.useCallback)(s,i);let d,u;return e[6]!==c||e[7]!==t||e[8]!==r?(d=async()=>(await t({hierarchical:!0,show_ui:!0})).map((e=>({key:e.restBase,restPath:e.restPath,placeholder:e.labels.allItems,ariaLabel:e.labels.filterByItem,noMatchesFoundLabel:e.labels.notFound,searchPlaceholder:e.labels.searchItems,query:t=>r(e,t),getPrimaryOptions:()=>c(e)}))),u=[r,c,t],e[6]=c,e[7]=t,e[8]=r,e[9]=d,e[10]=u):(d=e[9],u=e[10]),(0,y.useCallback)(d,u)};let jn=null;function qn(e){const{id:t,name:a}=e;return{id:t,name:a}}function Vn(e){const{actions:t}=e,{usersApi:a}=t,{getAuthors:o}=a;return{getAuthors:o}}const Wn=function(){const e=(0,l.c)(10),{getAuthors:t}=Fn(Vn);let a,o;e[0]!==t?(a=async e=>(await t(e)).map(qn),o=[t],e[0]=t,e[1]=a,e[2]=o):(a=e[1],o=e[2]);const n=(0,y.useCallback)(a,o);let s,i;e[3]!==n?(s=async()=>(jn||(jn=await n()),jn),i=[n],e[3]=n,e[4]=s,e[5]=i):(s=e[4],i=e[5]);const c=(0,y.useCallback)(s,i);let d,u;return e[6]!==c||e[7]!==n?(d=()=>({key:"author",ariaLabel:(0,r.__)("Filter stories by author","web-stories"),placeholder:(0,r.__)("All Authors","web-stories"),searchPlaceholder:(0,r.__)("Search Authors","web-stories"),noMatchesFoundLabel:(0,r.__)("No authors found","web-stories"),query:n,getPrimaryOptions:c}),u=[n,c],e[6]=c,e[7]=n,e[8]=d,e[9]=u):(d=e[8],u=e[9]),(0,y.useCallback)(d,u)},$n=(0,y.createContext)({state:{},actions:{}});function StoryFiltersProvider(e){const t=(0,l.c)(27),{children:a}=e,o=Hn(),r=Wn();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s={filters:[],filtersObject:{},sortObject:{}},t[0]=s):s=t[0];const[i,c]=(0,y.useReducer)(zn,s);let d,u;t[1]!==c?(d=e=>{c({type:Mn,payload:{type:"story",values:e}})},t[1]=c,t[2]=d):d=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(u=[],t[3]=u):u=t[3];const m=(0,y.useCallback)(d,u);let p,f;t[4]!==c?(p=(e,t)=>{c({type:Rn,payload:{key:e,value:t}})},t[4]=c,t[5]=p):p=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[6]=f):f=t[6];const b=(0,y.useCallback)(p,f);let h,g;t[7]!==c?(h=e=>{c({type:Bn,payload:{value:e}})},t[7]=c,t[8]=h):h=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(g=[],t[9]=g):g=t[9];const _=(0,y.useCallback)(h,g);let S,E;t[10]!==r||t[11]!==o||t[12]!==_?(S=async()=>{const e=[...await o(),r()].filter(StoryFiltersProvider_temp);e.length&&_(e)},E=[_,r,o],t[10]=r,t[11]=o,t[12]=_,t[13]=S,t[14]=E):(S=t[13],E=t[14]);const w=(0,y.useCallback)(S,E);let v,T;t[15]!==_||t[16]!==i||t[17]!==b||t[18]!==m?(v=()=>({state:i,actions:{updateFilter:b,updateSort:m,registerFilters:_}}),T=[i,b,m,_],t[15]=_,t[16]=i,t[17]=b,t[18]=m,t[19]=v,t[20]=T):(v=t[19],T=t[20]);const C=(0,y.useMemo)(v,T);let k,I,L;return t[21]!==w?(k=()=>{w()},I=[w],t[21]=w,t[22]=k,t[23]=I):(k=t[22],I=t[23]),(0,y.useEffect)(k,I),t[24]!==a||t[25]!==C?(L=n.createElement($n.Provider,{value:C},a),t[24]=a,t[25]=C,t[26]=L):L=t[26],L}function StoryFiltersProvider_temp(e){return Boolean(e)}function Kn(e){const t=void 0===e?y.identity:e;return(0,y.useContextSelector)($n,t)}StoryFiltersProvider.propTypes={children:g().node};var Xn=a(56205);const Yn=(0,f.default)(Xn.default).withConfig({displayName:"sortDropDown__StyledDropDown",componentId:"sc-lqi6ue-0"})(["width:210px;"]);function SortDropDown(e){const t=(0,l.c)(8),{pageSortOptions:a,pageSortDefaultOption:o,currentSort:s,handleSortChange:i}=e;let c,d;t[0]!==i?(c=(e,t)=>{i({orderby:t})},d=[i],t[0]=i,t[1]=c,t[2]=d):(c=t[1],d=t[2]);const u=(0,y.useCallback)(c,d);let m;t[3]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.__)("Choose sort option for display","web-stories"),t[3]=m):m=t[3];const p=s?.orderby||o;let f;return t[4]!==u||t[5]!==a||t[6]!==p?(f=n.createElement(Yn,{ariaLabel:m,options:a,type:je.DropDown,selectedValue:p,onMenuItemClick:u}),t[4]=u,t[5]=a,t[6]=p,t[7]=f):f=t[7],f}SortDropDown.propTypes={pageSortOptions:g().arrayOf(g().shape({value:g().string,label:g().string})),pageSortDefaultOption:g().string,currentSort:g().shape({orderby:g().string,order:g().string}),handleSortChange:g().func.isRequired};const Jn=SortDropDown,Zn=f.default.div.withConfig({displayName:"bodyViewOptions__DisplayFormatContainer",componentId:"sc-x2ax3p-0"})(["display:grid;gap:1rem;min-height:76px;grid-template-columns:1fr auto auto;justify-content:start;align-items:center;margin-top:-10px;"]),Qn=f.default.div.withConfig({displayName:"bodyViewOptions__StorySortDropdownContainer",componentId:"sc-x2ax3p-1"})(["margin:auto 8px;align-self:flex-end;"]),er=f.default.div.withConfig({displayName:"bodyViewOptions__ControlsContainer",componentId:"sc-x2ax3p-2"})(["display:flex;flex-wrap:wrap;margin:1rem 0;row-gap:1rem;justify-self:end;"]),tr=f.default.div.withConfig({displayName:"bodyViewOptions__BodyViewOptionsHeader",componentId:"sc-x2ax3p-3"})([""]),ar=(0,f.default)(Pn.default).withConfig({displayName:"bodyViewOptions__StyledDatalist",componentId:"sc-x2ax3p-4"})(["max-width:","px;"],350);function BodyViewOptions(e){const t=(0,l.c)(27),{handleLayoutSelect:a,resultsLabel:o,layoutStyle:s,pageSortOptions:i,pageSortDefaultOption:c,showGridToggle:d,showSortDropdown:u,filters:m,currentSort:p,handleSortChange:b}=e;let h;t[0]!==i?(h=void 0===i?[]:i,t[0]=i,t[1]=h):h=t[1];const g=h;let _;t[2]!==m?(_=void 0===m?[]:m,t[2]=m,t[3]=_):_=t[3];const y=_,{updateFilter:S}=Kn(or);let E,w,v,T,C,k,I;return t[4]===Symbol.for("react.memo_cache_sentinel")?(E=n.createElement(tr,{id:"body-view-options-header"}),t[4]=E):E=t[4],t[5]!==o?(w=n.createElement(Na.Text.Span,{size:io.TextSize.Small},n.createElement(Nn.default,null,o)),t[5]=o,t[6]=w):w=t[6],t[7]!==y||t[8]!==S?(v=y?.length?y.map((e=>n.createElement(Qn,{key:e.key,title:e.placeholder},n.createElement(ar,{hasSearch:!0,hasDropDownBorder:!0,searchResultsLabel:(0,r.__)("Search results","web-stories"),"aria-label":e.ariaLabel,onChange:t=>{const{id:a}=t;S(e.key,{filterId:a})},getOptionsByQuery:e.query,getPrimaryOptions:e.getPrimaryOptions,selectedId:e.filterId,placeholder:e.placeholder,noMatchesFoundLabel:e.noMatchesFoundLabel,searchPlaceholder:e.searchPlaceholder,offsetOverride:!0,maxWidth:350,containerStyleOverrides:(0,f.css)(["flex-direction:column;"])})))):null,t[7]=y,t[8]=S,t[9]=v):v=t[9],t[10]!==p||t[11]!==b||t[12]!==c||t[13]!==g||t[14]!==u?(T=u&&n.createElement(Qn,null,n.createElement(Jn,{pageSortOptions:g,pageSortDefaultOption:c,currentSort:p,handleSortChange:b})),t[10]=p,t[11]=b,t[12]=c,t[13]=g,t[14]=u,t[15]=T):T=t[15],t[16]!==v||t[17]!==T?(C=n.createElement(er,null,v,T),t[16]=v,t[17]=T,t[18]=C):C=t[18],t[19]!==a||t[20]!==s||t[21]!==d?(k=d&&n.createElement(ViewStyleBar,{layoutStyle:s,onPress:a}),t[19]=a,t[20]=s,t[21]=d,t[22]=k):k=t[22],t[23]!==k||t[24]!==w||t[25]!==C?(I=n.createElement(La,null,E,n.createElement(Zn,null,w,C,k)),t[23]=k,t[24]=w,t[25]=C,t[26]=I):I=t[26],I}function or(e){const{actions:t}=e,{updateFilter:a}=t;return{updateFilter:a}}var nr,rr,lr;function sr(){return sr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},sr.apply(null,arguments)}BodyViewOptions.propTypes={handleLayoutSelect:g().func,layoutStyle:g().string.isRequired,resultsLabel:g().string.isRequired,showGridToggle:g().bool,showSortDropdown:g().bool,filters:g().array,pageSortOptions:g().arrayOf(g().shape({value:g().string,label:g().string})),pageSortDefaultOption:g().string,currentSort:g().shape({orderby:g().string,order:g().string}),handleSortChange:g().func};const SvgDesertColor=({title:e,titleId:t,...a})=>n.createElement("svg",sr({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 274 118","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,nr||(nr=n.createElement("path",{fill:"#F4F2EF",d:"M59.68 117.706 8.551 106.934C2.505 105.66-.951 99.261 1.3 93.506l1.18-3.019a10 10 0 0 1 7.987-6.268l78.795-10.544a10 10 0 0 0 2.524-.683l82.061-34.244a10 10 0 0 1 8.263.255l56.296 27.675q.654.323 1.349.545l26.84 8.637c9.132 2.939 9.287 15.804.228 18.962l-26.529 9.248c-.819.285-1.671.463-2.536.529L62.497 117.892a10 10 0 0 1-2.818-.186"})),rr||(rr=n.createElement("path",{fill:"#FBBC04",fillRule:"evenodd",d:"M224 26a4 4 0 0 1 4-4h2a4 4 0 0 1 4 4v31h4V44a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-7v17h-10V49h-7a2 2 0 0 1-2-2V31a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v13h4zM120.857 53.179a2.143 2.143 0 0 1 4.286 0v14.25h1.714V62.07a1.072 1.072 0 0 1 2.143 0V68.5a1.2 1.2 0 0 1-.048.319 1.07 1.07 0 0 1-1.023.753h-2.786v5.892h-4.286v-7.892h-2.786A1.073 1.073 0 0 1 117 66.5v-6.429a1.072 1.072 0 0 1 2.143 0v5.358h1.714zM64.786 8a8 8 0 0 1 8-8h.428a8 8 0 0 1 8 8v34.643h6.572V22a4 4 0 0 1 4-4H92a4 4 0 0 1 4 4v24.857a4 4 0 0 1-4 4H81.214v42.786H64.786V78.857H54a3.99 3.99 0 0 1-2.828-1.171A4 4 0 0 1 50 74.857V50a4 4 0 0 1 4-4h.214a4 4 0 0 1 4 4v20.643h6.572z",clipRule:"evenodd"})),lr||(lr=n.createElement("circle",{cx:213,cy:72,r:13,fill:"#4285F4"}))),ir=(0,n.memo)(SvgDesertColor),cr=f.default.div.withConfig({displayName:"emptyContentMessage__Message",componentId:"sc-1wgc64w-0"})(["display:flex;flex-direction:column;align-items:center;max-width:400px;margin:20vh auto;& > *{text-align:center;margin:0 auto;}button,a{margin-top:48px;}"]),dr=(0,f.default)(ir).withConfig({displayName:"emptyContentMessage__EmptyImage",componentId:"sc-1wgc64w-1"})(["margin-bottom:48px;"]);function EmptyContentMessage(e){const t=(0,l.c)(3),{children:a}=e;let o,r;return t[0]===Symbol.for("react.memo_cache_sentinel")?(o=n.createElement(dr,{"aria-hidden":!0,width:274,height:118}),t[0]=o):o=t[0],t[1]!==a?(r=n.createElement(cr,null,o,a),t[1]=a,t[2]=r):r=t[2],r}EmptyContentMessage.propTypes={children:g().node};const ur=EmptyContentMessage;var mr=a(41595);const pr=f.default.h1.withConfig({displayName:"display__Display",componentId:"sc-1x3xqpc-0"})([""," ",""],mr.defaultTypographyStyle,(({size:e=io.TextSize.Medium,theme:t})=>Ho.expandPresetStyles({preset:t.typography.presets.display[e],theme:t})));var fr=a(8378),br=a(66189),hr=a(67340);const gr=f.default.div.withConfig({displayName:"search__DropDownContainer",componentId:"sc-1i3s2c5-0"})(["display:flex;flex-direction:column;width:100%;"]),_r=(0,f.default)(Na.Text.Label).withConfig({displayName:"search__Label",componentId:"sc-1i3s2c5-1"})(["margin-bottom:8px;color:",";"],(({theme:e,disabled:t})=>e.colors.fg[t?"disable":"primary"])),yr=(0,f.default)(Na.Text.Paragraph).withConfig({displayName:"search__Hint",componentId:"sc-1i3s2c5-2"})(["margin-top:12px;padding-left:2px;color:",";"],(({theme:e,hasError:t})=>e.colors.fg[t?"negative":"tertiary"]));var Sr=a(40341),Er=a(90650),wr=a(50822),vr=a(96281);function Tr(e){return e.options}function Cr(){return Cr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Cr.apply(null,arguments)}const kr=f.default.div.withConfig({displayName:"search__SearchInputWrapper",componentId:"sc-1jug8cl-0"})([""]);function Ir(){return`clear-button-${(0,ia.default)()}`}function Lr(){return`select-button-${(0,ia.default)()}`}function Ar(){return`list-${(0,ia.default)()}`}const xr=function Search(e){const t=(0,l.c)(136);let a,o,s,i,c,d,u,m,p,f,b,h,g,_,S,E,w;t[0]!==e?(({ariaInputLabel:h,ariaClearLabel:g,disabled:a,handleSearchValueChange:o,hasError:s,hint:i,label:c,onMenuItemClick:u,onClear:d,options:_,placeholder:S,placement:E,popupFillWidth:w,popupZIndex:m,selectedValue:b,searchValue:f,...p}=e),t[0]=e,t[1]=a,t[2]=o,t[3]=s,t[4]=i,t[5]=c,t[6]=d,t[7]=u,t[8]=m,t[9]=p,t[10]=f,t[11]=b,t[12]=h,t[13]=g,t[14]=_,t[15]=S,t[16]=E,t[17]=w):(a=t[1],o=t[2],s=t[3],i=t[4],c=t[5],d=t[6],u=t[7],m=t[8],p=t[9],f=t[10],b=t[11],h=t[12],g=t[13],_=t[14],S=t[15],E=t[16],w=t[17]);const v=void 0===h?Sr.DEFAULT_ARIA_INPUT_LABEL:h,T=void 0===g?Sr.DEFAULT_ARIA_CLEAR_LABEL:g;let C;t[18]!==_?(C=void 0===_?[]:_,t[18]=_,t[19]=C):C=t[19];const k=C,I=void 0===S?Sr.DEFAULT_PLACEHOLDER:S,L=void 0===E?nn.Placement.Bottom:E,A=void 0===w?Sr.DEFAULT_POPUP_FILL_WIDTH:w;let x;t[20]===Symbol.for("react.memo_cache_sentinel")?(x=[],t[20]=x):x=t[20];const O=(0,y.useMemo)(Ar,x);let D;t[21]===Symbol.for("react.memo_cache_sentinel")?(D=[],t[21]=D):D=t[21];const N=(0,y.useMemo)(Lr,D);let P;t[22]===Symbol.for("react.memo_cache_sentinel")?(P=[],t[22]=P):P=t[22];const R=(0,y.useMemo)(Ir,P),M=(0,y.useRef)(null),B=(0,y.useRef)(null);let z;t[23]!==o||t[24]!==k||t[25]!==f||t[26]!==b?(z={options:k,selectedValue:b,searchValue:f,handleSearchValueChange:o},t[23]=o,t[24]=k,t[25]=f,t[26]=b,t[27]=z):z=t[27];const{activeOption:F,getActiveOption:U,inputState:G,setInputState:H,isMenuFocused:j,setIsMenuFocused:q,isOpen:V,setIsOpen:W,groups:$}=function(e){const t=(0,l.c)(55),{handleSearchValueChange:a,selectedValue:o,searchValue:n,options:s}=e,i=(0,vr.default)("assertive"),[c,d]=(0,y.useState)(!1),u=(0,y.useDebouncedCallback)(d,100),[m,p]=(0,y.useState)(!1);let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f={leading:!0},t[0]=f):f=t[0];const b=(0,y.useDebouncedCallback)(p,300,f);let h,g,_,S;t[1]!==c||t[2]!==b?(h=()=>{c||b(!1)},g=[c,b],t[1]=c,t[2]=b,t[3]=h,t[4]=g):(h=t[3],g=t[4]),(0,y.useEffect)(h,g),t[5]!==s?(_=()=>(0,wr.getGroups)(s),S=[s],t[5]=s,t[6]=_,t[7]=S):(_=t[6],S=t[7]);const E=(0,y.useMemo)(_,S);let w,v;t[8]!==E?(w=e=>E.flatMap(Tr).find((t=>String(t.value).toLowerCase()===String(e).toLowerCase())),v=[E],t[8]=E,t[9]=w,t[10]=v):(w=t[9],v=t[10]);const T=(0,y.useCallback)(w,v);let C,k;t[11]!==T||t[12]!==E.length||t[13]!==n||t[14]!==o?(C=()=>{const e=o?String(o.value):n;return e&&0!==E.length?T(e):null},t[11]=T,t[12]=E.length,t[13]=n,t[14]=o,t[15]=C):C=t[15],t[16]!==T||t[17]!==E||t[18]!==n||t[19]!==o?(k=[o,n,E,T],t[16]=T,t[17]=E,t[18]=n,t[19]=o,t[20]=k):k=t[20];const I=(0,y.useMemo)(C,k),[L,A]=(0,y.useState)(n);let x,O;t[21]!==A||t[22]!==a?(x=e=>{A(e),void 0!==e&&a?.(e)},t[21]=A,t[22]=a,t[23]=x):x=t[23],t[24]!==a?(O=[a],t[24]=a,t[25]=O):O=t[25];const D=(0,y.useCallback)(x,O);let N,P,R,M,B;return t[26]!==L||t[27]!==o?.label||t[28]!==o?.value||t[29]!==D?(N=()=>{void 0===L&&void 0!==o?.value&&D(o?.label||"")},t[26]=L,t[27]=o?.label,t[28]=o?.value,t[29]=D,t[30]=N):N=t[30],t[31]!==L||t[32]!==o||t[33]!==D?(P=[L,D,o],t[31]=L,t[32]=o,t[33]=D,t[34]=P):P=t[34],(0,y.useEffect)(N,P),t[35]!==L?.length||t[36]!==c||t[37]!==s.length||t[38]!==i?(R=()=>{if(c&&L?.length){const e=s.length?(0,Z.default)((0,r._n)("%d result found.","%d results found.",s.length,"web-stories"),String(s.length)):(0,r.__)("No results found.","web-stories");i(e)}},t[35]=L?.length,t[36]=c,t[37]=s.length,t[38]=i,t[39]=R):R=t[39],t[40]!==L||t[41]!==c||t[42]!==s.length||t[43]!==i?(M=[L,c,s.length,i],t[40]=L,t[41]=c,t[42]=s.length,t[43]=i,t[44]=M):M=t[44],(0,y.useEffect)(R,M),t[45]!==I||t[46]!==T||t[47]!==E||t[48]!==L||t[49]!==m||t[50]!==c||t[51]!==D||t[52]!==b||t[53]!==u?(B={activeOption:I,getActiveOption:T,groups:E,inputState:L,setInputState:D,isMenuFocused:m,setIsMenuFocused:b,isOpen:c,setIsOpen:u},t[45]=I,t[46]=T,t[47]=E,t[48]=L,t[49]=m,t[50]=c,t[51]=D,t[52]=b,t[53]=u,t[54]=B):B=t[54],B}(z);let K,X;t[28]!==a||t[29]!==G?.length?(K=()=>Boolean(a||!G?.length),t[28]=a,t[29]=G?.length,t[30]=K):K=t[30],t[31]!==a||t[32]!==G?(X=[a,G],t[31]=a,t[32]=G,t[33]=X):X=t[33];const Y=(0,y.useMemo)(K,X);let J,Q;t[34]!==q||t[35]!==W?(J=()=>{W(!0),q(!1)},Q=[W,q],t[34]=q,t[35]=W,t[36]=J,t[37]=Q):(J=t[36],Q=t[37]);const ee=(0,y.useCallback)(J,Q);let te,ae;t[38]!==W?(te=e=>{e.preventDefault(),W(!0)},ae=[W],t[38]=W,t[39]=te,t[40]=ae):(te=t[39],ae=t[40]);const oe=(0,y.useCallback)(te,ae);let ne,re;t[41]!==R||t[42]!==W?(ne=e=>{R&&e?.currentTarget instanceof HTMLElement&&e.currentTarget.id===R||W(!1)},re=[R,W],t[41]=R,t[42]=W,t[43]=ne,t[44]=re):(ne=t[43],re=t[44]);const le=(0,y.useCallback)(ne,re);let se,ie;t[45]!==U||t[46]!==u||t[47]!==H||t[48]!==W?(se=(e,t)=>{W(!1);const a=U(t)||{label:String(t),value:t};H(String(a.label)),u?.(e,a)},ie=[U,H,W,u],t[45]=U,t[46]=u,t[47]=H,t[48]=W,t[49]=se,t[50]=ie):(se=t[49],ie=t[50]);const ce=(0,y.useCallback)(se,ie);let de,ue;t[51]!==M?.current?(de=()=>M?.current?.focus(),t[51]=M?.current,t[52]=de):de=t[52],t[53]===Symbol.for("react.memo_cache_sentinel")?(ue=[],t[53]=ue):ue=t[53];const me=(0,y.useCallback)(de,ue);let pe,fe;t[54]!==H||t[55]!==W?(pe=e=>{const{target:t}=e;H(t.value),W(t.value.length>0)},fe=[H,W],t[54]=H,t[55]=W,t[56]=pe,t[57]=fe):(pe=t[56],fe=t[57]);const be=(0,y.useCallback)(pe,fe);let he,ge;t[58]!==me||t[59]!==d||t[60]!==H?(he=()=>{H(""),d?.(),me?.()},ge=[me,H,d],t[58]=me,t[59]=d,t[60]=H,t[61]=he,t[62]=ge):(he=t[61],ge=t[62]);const _e=(0,y.useCallback)(he,ge);let ye,Se;t[63]!==q||t[64]!==W?(ye=()=>{W(!1),q(!1)},Se=[W,q],t[63]=q,t[64]=W,t[65]=ye,t[66]=Se):(ye=t[65],Se=t[66]);const Ee=(0,y.useCallback)(ye,Se);let we,ve;t[67]!==q?(we=()=>q(!0),ve=[q],t[67]=q,t[68]=we,t[69]=ve):(we=t[68],ve=t[69]);const Te=(0,y.useCallback)(we,ve);let Ce,ke;t[70]!==G||t[71]!==Y||t[72]!==q||t[73]!==W?(Ce=()=>{(Y||0===G?.trim().length)&&(q(!1),W(!1))},ke=[G,q,Y,W],t[70]=G,t[71]=Y,t[72]=q,t[73]=W,t[74]=Ce,t[75]=ke):(Ce=t[74],ke=t[75]);const Ie=(0,y.useCallback)(Ce,ke);let Le,Ae;t[76]!==Te||t[77]!==Ie||t[78]!==ce||t[79]!==G||t[80]!==Y||t[81]!==q?(Le=e=>{const{key:t}=e;"Escape"===t?Y||q(!1):"Tab"===t?Ie():"ArrowDown"===t?Te():"Enter"===t&&G&&G.trim().length>0&&ce(e.nativeEvent,String(G))},Ae=[Y,q,Ie,Te,G,ce],t[76]=Te,t[77]=Ie,t[78]=ce,t[79]=G,t[80]=Y,t[81]=q,t[82]=Le,t[83]=Ae):(Le=t[82],Ae=t[83]);const xe=(0,y.useCallback)(Le,Ae);let Oe,De;t[84]!==Ie?(Oe=[Ie],t[84]=Ie,t[85]=Oe):Oe=t[85],(0,y.useFocusOut)(B,Ie,Oe),t[86]!==a||t[87]!==c?(De=c&&n.createElement(_r,{size:io.TextSize.Small,disabled:a,isBold:!0},c),t[86]=a,t[87]=c,t[88]=De):De=t[88];const Ne=G||"";let Pe,Re,Me,Be,ze;return t[89]!==T||t[90]!==v||t[91]!==R||t[92]!==a||t[93]!==_e||t[94]!==be||t[95]!==oe||t[96]!==ee||t[97]!==xe||t[98]!==Ee||t[99]!==s||t[100]!==N||t[101]!==M||t[102]!==V||t[103]!==O||t[104]!==I||t[105]!==p||t[106]!==Ne?(Pe=n.createElement(Er.default,Cr({"aria-label":v,hasError:s,id:N,onChange:be,onClick:oe,onFocus:ee,onKeyDown:xe,placeholder:I,ariaClearLabel:T,clearId:R,disabled:a,handleClearInput:_e,handleTabClear:Ee,inputValue:Ne,isOpen:V,listId:O,ref:M},p)),t[89]=T,t[90]=v,t[91]=R,t[92]=a,t[93]=_e,t[94]=be,t[95]=oe,t[96]=ee,t[97]=xe,t[98]=Ee,t[99]=s,t[100]=N,t[101]=M,t[102]=V,t[103]=O,t[104]=I,t[105]=p,t[106]=Ne,t[107]=Pe):Pe=t[107],t[108]!==B||t[109]!==Pe?(Re=n.createElement(kr,{ref:B},Pe),t[108]=B,t[109]=Pe,t[110]=Re):Re=t[110],t[111]!==F?.value||t[112]!==v||t[113]!==$||t[114]!==le||t[115]!==ce||t[116]!==me||t[117]!==N||t[118]!==M||t[119]!==j||t[120]!==Y||t[121]!==V||t[122]!==O||t[123]!==L||t[124]!==A||t[125]!==m||t[126]!==p?(Me=!Y&&n.createElement(hr.default,{anchor:M,isOpen:V,placement:L,fillWidth:A,zIndex:m,ignoreMaxOffsetY:!0},n.createElement(br.default,Cr({activeValue:F?.value,handleReturnToParent:me,isMenuFocused:j,listId:O,menuAriaLabel:(0,Z.default)((0,r.__)("%s Option List Selector","web-stories"),v),onDismissMenu:le,handleMenuItemSelect:ce,groups:$,parentId:N},p))),t[111]=F?.value,t[112]=v,t[113]=$,t[114]=le,t[115]=ce,t[116]=me,t[117]=N,t[118]=M,t[119]=j,t[120]=Y,t[121]=V,t[122]=O,t[123]=L,t[124]=A,t[125]=m,t[126]=p,t[127]=Me):Me=t[127],t[128]!==s||t[129]!==i?(Be=i&&n.createElement(yr,{hasError:s,size:io.TextSize.Small},i),t[128]=s,t[129]=i,t[130]=Be):Be=t[130],t[131]!==De||t[132]!==Re||t[133]!==Me||t[134]!==Be?(ze=n.createElement(gr,null,De,Re,Me,Be),t[131]=De,t[132]=Re,t[133]=Me,t[134]=Be,t[135]=ze):ze=t[135],ze},Or=(0,f.default)(La).withConfig({displayName:"pageHeading__HeadingContainer",componentId:"sc-1ln7suo-0"})(["display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;margin-bottom:16px;padding-top:48px;border-bottom:1px solid ",";"],(({theme:e})=>e.colors.divider.secondary)),Dr=(0,f.default)(pr).withConfig({displayName:"pageHeading__StyledHeadline",componentId:"sc-1ln7suo-1"})(["display:flex;align-items:center;margin-right:28px;padding-bottom:24px;white-space:nowrap;"]),Nr=f.default.div.withConfig({displayName:"pageHeading__HeadlineFilters",componentId:"sc-1ln7suo-2"})(["display:flex;align-items:center;margin:auto 0 auto 0;padding-bottom:24px;"]),Pr=f.default.div.withConfig({displayName:"pageHeading__HeaderSearch",componentId:"sc-1ln7suo-3"})(["width:208px;max-width:208px;min-width:208px;margin:auto 0;padding-bottom:24px;"]),Rr=e=>{const t=(0,l.c)(18),{children:a,heading:o,searchPlaceholder:s,searchOptions:i,showSearch:c,handleSearchChange:d,searchValue:u,onClear:m}=e;let p;t[0]!==i?(p=void 0===i?[]:i,t[0]=i,t[1]=p):p=t[1];const f=p,b=void 0===m?fr.noop:m;let h,g,_,y,S;return t[2]===Symbol.for("react.memo_cache_sentinel")?(h=n.createElement(Bo,{showOnlyOnSmallViewport:!0}),t[2]=h):h=t[2],t[3]!==o?(g=n.createElement(Dr,{as:"h2",size:io.TextSize.Small},h,o),t[3]=o,t[4]=g):g=t[4],t[5]!==a?(_=a&&n.createElement(Nr,null,a),t[5]=a,t[6]=_):_=t[6],t[7]!==d||t[8]!==b||t[9]!==f||t[10]!==s||t[11]!==u||t[12]!==c?(y=c&&n.createElement(Pr,null,n.createElement(xr,{placeholder:s,searchValue:u,options:f,handleSearchValueChange:d,onClear:b,emptyText:(0,r.__)("No options available","web-stories")})),t[7]=d,t[8]=b,t[9]=f,t[10]=s,t[11]=u,t[12]=c,t[13]=y):y=t[13],t[14]!==g||t[15]!==_||t[16]!==y?(S=n.createElement(Or,null,g,_,y),t[14]=g,t[15]=_,t[16]=y,t[17]=S):S=t[17],S};var Mr,Br=a(7927),zr=a(99516),Fr=a(2190),Ur=a(18940);function Gr(){return Gr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Gr.apply(null,arguments)}const SvgArrowDown=({title:e,titleId:t,...a})=>n.createElement("svg",Gr({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,Mr||(Mr=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"m16.5 21.282 4.645-4.704a.5.5 0 0 1 .711.702l-5.5 5.571a.5.5 0 0 1-.712 0l-5.5-5.57a.5.5 0 0 1 .712-.703l4.644 4.704V9.5a.5.5 0 0 1 1 0z",clipRule:"evenodd"}))),Hr=(0,n.memo)(SvgArrowDown),jr=({menuItems:e,story:t,isLocked:a})=>{const o=e.default?()=>e.default(t):xn;return e.filter((e=>void 0===e.isEnabled||e.isEnabled(t))).map((({capability:n,value:r,...l})=>{const s=(t=>e.find((e=>e?.value===t)))(r),i={onClick:s?()=>s.action(t):o};switch(r){case Q:i.href=t.bottomTargetAction,i.openNewTab=!1;break;case ne:i.href=t.previewLink,i.openNewTab=!0;break;case ee:case ae:i.disabled=a}return delete l?.action,{...l,...i}}))};var qr=a(54658);const Vr=f.default.div.withConfig({displayName:"storyListItem__PreviewImage",componentId:"sc-1w22569-0"})(["display:inline-block;background:",";width:","px;height:","px;object-fit:contain;border-radius:",";"],(({theme:e})=>e.colors.gradient.placeholder),Ye[Xe],Ye[Xe]/(3/4),(({theme:e})=>e.borders.radius.small)),Wr=f.default.div.withConfig({displayName:"storyListItem__PreviewWrapper",componentId:"sc-1w22569-1"})(["position:relative;"]),$r=(0,f.default)(qr.default).withConfig({displayName:"storyListItem__LockIcon",componentId:"sc-1w22569-2"})(["position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);height:24px;display:block;margin:auto;background-color:",";color:",";border-radius:",";"],(({theme:e})=>e.colors.interactiveBg.brandNormal),(({theme:e})=>e.colors.standard.white),(({theme:e})=>e.borders.radius.round)),Kr=(0,f.default)(Qo).withConfig({displayName:"storyListItem__StyledTableRow",componentId:"sc-1w22569-3"})(["&:hover ",",&:focus-within ","{opacity:1;}"],ya,ya),Xr=f.default.div.withConfig({displayName:"storyListItem__TitleTableCellContainer",componentId:"sc-1w22569-4"})(["display:flex;align-items:center;justify-content:flex-start;","{margin:10px auto;}&:hover ",",&:active ","{opacity:1;}"],ya,ya,ya);function Yr(e){window.getSelection().selectAllChildren(e.target)}function Jr(){window.getSelection().removeAllRanges()}const StoryListItem=e=>{const t=(0,l.c)(70),{story:a,renameStory:o,userId:s,storyMenu:i,storyStatus:c}=e;let d,u;t[0]!==a.lockUser||t[1]!==a.locked||t[2]!==s?(d=()=>a?.locked&&s!==a?.lockUser.id,t[0]=a.lockUser,t[1]=a.locked,t[2]=s,t[3]=d):d=t[3],t[4]!==a||t[5]!==s?(u=[a,s],t[4]=a,t[5]=s,t[6]=u):u=t[6];const m=(0,y.useMemo)(d,u);let p;t[7]!==a.title?(p=fn(a.title),t[7]=a.title,t[8]=p):p=t[8];const f=p;let b,h;t[9]!==m||t[10]!==a||t[11]!==i.menuItems?(b=()=>jr({menuItems:i.menuItems,story:a,isLocked:m}),t[9]=m,t[10]=a,t[11]=i.menuItems,t[12]=b):b=t[12],t[13]!==m||t[14]!==a||t[15]!==i?(h=[i,a,m],t[13]=m,t[14]=a,t[15]=i,t[16]=h):h=t[16];const g=(0,y.useMemo)(b,h);let _,S;t[17]!==f||t[18]!==g||t[19]!==a.id||t[20]!==i?(_=()=>g.length?n.createElement(StoryMenu,{menuLabel:(0,Z.default)((0,r.__)("Context menu for %s","web-stories"),f),onMoreButtonSelected:(e,t)=>i.handleMenuToggle(t),contextMenuId:i.contextMenuId,storyId:a.id,menuItems:g,verticalAlign:"center"}):null,t[17]=f,t[18]=g,t[19]=a.id,t[20]=i,t[21]=_):_=t[21],t[22]!==f||t[23]!==g||t[24]!==a||t[25]!==i?(S=[g,f,i,a],t[22]=f,t[23]=g,t[24]=a,t[25]=i,t[26]=S):S=t[26];const E=(0,y.useMemo)(_,S),w=`story-list-item-${a.id}`;let v,T,C,k,I,L,A;t[27]!==m||t[28]!==a.lockUser?(v=m&&a?.lockUser.name?(0,Z.default)((0,r.__)("%s is currently editing this story","web-stories"),a?.lockUser.name):"",t[27]=m,t[28]=a.lockUser,t[29]=v):v=t[29],t[30]!==f||t[31]!==a.featuredMediaUrl?(T=a.featuredMediaUrl?{src:a.featuredMediaUrl,alt:(0,Z.default)((0,r.__)("%s Poster image","web-stories"),f),as:"img",decoding:"async"}:null,t[30]=f,t[31]=a.featuredMediaUrl,t[32]=T):T=t[32],t[33]!==T?(C=n.createElement(Vr,T),t[33]=T,t[34]=C):C=t[34],t[35]!==m?(k=m&&n.createElement($r,null),t[35]=m,t[36]=k):k=t[36],t[37]!==C||t[38]!==k?(I=n.createElement(Wr,null,C,k),t[37]=C,t[38]=k,t[39]=I):I=t[39],t[40]!==I||t[41]!==v?(L=n.createElement(an,null,n.createElement(Tooltip,{title:v},I)),t[40]=I,t[41]=v,t[42]=L):L=t[42],t[43]!==f||t[44]!==m||t[45]!==E||t[46]!==o||t[47]!==a?(A=n.createElement(en,null,n.createElement(Xr,null,o.id===a.id?n.createElement(ja,{onEditComplete:e=>o.handleOnRenameStory(a,e),onEditCancel:o.handleCancelRename,value:a.title,id:a.id,label:(0,r.__)("Rename story","web-stories")}):n.createElement(n.Fragment,null,n.createElement(So.Headline,{tabIndex:0,onFocus:Yr,onBlur:Jr,size:io.TextSize.XXXSmall,as:"h3","aria-label":m?(0,Z.default)((0,r.__)("%1$s (locked by %2$s)","web-stories"),f,a?.lockUser.name):f},f),E))),t[43]=f,t[44]=m,t[45]=E,t[46]=o,t[47]=a,t[48]=A):A=t[48];const x=a.author?.name||"—";let O,D,N,P,R,M,B;return t[49]!==x?(O=n.createElement(en,null,n.createElement(Na.Text.Span,{size:io.TextSize.Small},x)),t[49]=x,t[50]=O):O=t[50],t[51]!==a.createdGmt?(D=Tt(a.createdGmt),t[51]=a.createdGmt,t[52]=D):D=t[52],t[53]!==D?(N=n.createElement(en,null,n.createElement(Na.Text.Span,{size:io.TextSize.Small},D)),t[53]=D,t[54]=N):N=t[54],t[55]!==a.modifiedGmt?(P=Tt(a.modifiedGmt),t[55]=a.modifiedGmt,t[56]=P):P=t[56],t[57]!==P?(R=n.createElement(en,null,n.createElement(Na.Text.Span,{size:io.TextSize.Small},P)),t[57]=P,t[58]=R):R=t[58],t[59]!==a.status||t[60]!==c?(M=c!==me.DRAFT&&n.createElement(tn,null,n.createElement(Na.Text.Span,{size:io.TextSize.Small},pe[a?.status])),t[59]=a.status,t[60]=c,t[61]=M):M=t[61],t[62]!==L||t[63]!==A||t[64]!==O||t[65]!==N||t[66]!==R||t[67]!==M||t[68]!==w?(B=n.createElement(Kr,{"data-testid":w},L,A,O,N,R,M),t[62]=L,t[63]=A,t[64]=O,t[65]=N,t[66]=R,t[67]=M,t[68]=w,t[69]=B):B=t[69],B};var Zr=a(52046);const{focusableOutlineCSS:Qr}=Zr,el=f.default.div.withConfig({displayName:"listView__ListView",componentId:"sc-15nl0r5-0"})(["width:100%;"]),tl=f.default.div.withConfig({displayName:"listView__ArrowIcon",componentId:"sc-15nl0r5-1"})(["width:32px;height:100%;display:inline-grid;color:",";vertical-align:middle;svg{visibility:",";transition:transform 0.15s;",";}"],(({theme:e})=>e.colors.fg.primary),(({active:e})=>e?"visible":"hidden"),(({asc:e})=>e&&(0,f.css)(["transform:rotate(180deg);"]))),al=f.default.div.withConfig({displayName:"listView__EmptyIconSpace",componentId:"sc-15nl0r5-2"})(["height:32px;width:32px;"]),ol=(0,f.default)(tl).withConfig({displayName:"listView__ArrowIconWithTitle",componentId:"sc-15nl0r5-3"})([""," position:absolute;top:16px;@media ","{margin-left:4px;}"],(({active:e})=>!e&&"display: none;"),(({theme:e})=>e.breakpoint.mobile)),nl=(0,f.default)(Na.Text.Span).attrs({tabIndex:0,isBold:!0}).withConfig({displayName:"listView__SelectableTitle",componentId:"sc-15nl0r5-4"})(["color:",";cursor:pointer;",";"],(({theme:e})=>e.colors.blue[70]),(({theme:e})=>Qr(e.colors.border.focus,e.colors.bg.secondary))),rl={[le.DESC]:le.ASC,[le.ASC]:le.DESC};function StoryListView(e){const t=(0,l.c)(120),{hideStoryList:a,renameStory:o,stories:s,storyMenu:i}=e,{userId:c,styleConstants:d}=w(),{topOffset:u}=d,{filters:m,sortObject:p,updateSort:f}=Kn(sl);let b,h;t[0]!==p?.order||t[1]!==p?.orderby?(b=()=>[p?.orderby,p?.order],t[0]=p?.order,t[1]=p?.orderby,t[2]=b):b=t[2],t[3]!==p?(h=[p],t[3]=p,t[4]=h):h=t[4];const[g,_]=(0,y.useMemo)(b,h);let S,E;t[5]!==m?(S=()=>m.filter(ll).filterId,E=[m],t[5]=m,t[6]=S,t[7]=E):(S=t[6],E=t[7]);const v=(0,y.useMemo)(S,E);let T,C;t[8]!==_||t[9]!==g||t[10]!==f?(T=e=>{f(e!==g?{orderby:e,order:ce[e]}:{order:rl[_]})},C=[f,g,_],t[8]=_,t[9]=g,t[10]=f,t[11]=T,t[12]=C):(T=t[11],C=t[12]);const k=(0,y.useCallback)(T,C);let I,L;t[13]!==k?(I=(e,t)=>{const{key:a}=e;"Enter"===a&&k(t)},L=[k],t[13]=k,t[14]=I,t[15]=L):(I=t[14],L=t[15]);const A=(0,y.useCallback)(I,L);let x,O;t[16]!==a||t[17]!==o||t[18]!==v||t[19]!==s||t[20]!==i||t[21]!==c?(x=()=>!a&&s.map((e=>n.createElement(StoryListItem,{key:`story-${e.id}`,story:e,userId:c,renameStory:o,storyStatus:v,storyMenu:i}))),O=[a,o,s,v,i,c],t[16]=a,t[17]=o,t[18]=v,t[19]=s,t[20]=i,t[21]=c,t[22]=x,t[23]=O):(x=t[22],O=t[23]);const D=(0,y.useMemo)(x,O);let N,P,R,M,B,z,F,U;t[24]===Symbol.for("react.memo_cache_sentinel")?(N=(0,r.__)("List view of created stories","web-stories"),t[24]=N):N=t[24],t[25]!==k?(P=()=>k(se.NAME),t[25]=k,t[26]=P):P=t[26],t[27]!==A?(R=e=>A(e,se.NAME),t[27]=A,t[28]=R):R=t[28],t[29]===Symbol.for("react.memo_cache_sentinel")?(M=(0,r.__)("Title, select to sort table by story title","web-stories"),t[29]=M):M=t[29],t[30]===Symbol.for("react.memo_cache_sentinel")?(B=n.createElement(nl,{"aria-label":M,size:io.TextSize.Small,isBold:!0},(0,r.__)("Title","web-stories")),t[30]=B):B=t[30],t[31]!==P||t[32]!==R?(z=n.createElement(Ko,{onClick:P,onKeyDown:R},B),t[31]=P,t[32]=R,t[33]=z):z=t[33],t[34]!==k?(F=()=>k(se.NAME),t[34]=k,t[35]=F):F=t[35],t[36]!==A?(U=e=>A(e,se.NAME),t[36]=A,t[37]=U):U=t[37];const G=g===se.NAME;let H,j;t[38]===Symbol.for("react.memo_cache_sentinel")?(H=(0,r.__)("Title","web-stories"),t[38]=H):H=t[38],t[39]!==G?(j=n.createElement(nl,{"aria-hidden":!0,active:G,size:io.TextSize.Small,isBold:!0},H),t[39]=G,t[40]=j):j=t[40];const q=g===se.NAME,V=_===le.ASC;let W,$,K,X,Y,J;t[41]===Symbol.for("react.memo_cache_sentinel")?(W=n.createElement(Hr,null),t[41]=W):W=t[41],t[42]!==q||t[43]!==V?($=n.createElement(tl,{active:q,asc:V},W),t[42]=q,t[43]=V,t[44]=$):$=t[44],t[45]!==F||t[46]!==U||t[47]!==j||t[48]!==$?(K=n.createElement(Zo,{onClick:F,onKeyDown:U},j,$),t[45]=F,t[46]=U,t[47]=j,t[48]=$,t[49]=K):K=t[49],t[50]===Symbol.for("react.memo_cache_sentinel")?(X=(0,r.__)("Author, select to sort table by story author","web-stories"),t[50]=X):X=t[50],t[51]!==k?(Y=()=>k(se.CREATED_BY),t[51]=k,t[52]=Y):Y=t[52],t[53]!==A?(J=e=>A(e,se.CREATED_BY),t[53]=A,t[54]=J):J=t[54];const Z=g===se.CREATED_BY;let Q,ee;t[55]===Symbol.for("react.memo_cache_sentinel")?(Q=(0,r.__)("Author","web-stories"),t[55]=Q):Q=t[55],t[56]!==Y||t[57]!==J||t[58]!==Z?(ee=n.createElement(nl,{"aria-label":X,onClick:Y,onKeyDown:J,active:Z,size:io.TextSize.Small,isBold:!0},Q),t[56]=Y,t[57]=J,t[58]=Z,t[59]=ee):ee=t[59];const te=g===se.CREATED_BY,ae=_===le.ASC;let oe,ne,re,ie,de,ue;t[60]!==g?(oe=g===se.CREATED_BY?n.createElement(Hr,null):n.createElement(al,null),t[60]=g,t[61]=oe):oe=t[61],t[62]!==te||t[63]!==ae||t[64]!==oe?(ne=n.createElement(ol,{"aria-hidden":!0,active:te,asc:ae},oe),t[62]=te,t[63]=ae,t[64]=oe,t[65]=ne):ne=t[65],t[66]!==ee||t[67]!==ne?(re=n.createElement(Jo,null,ee,ne),t[66]=ee,t[67]=ne,t[68]=re):re=t[68],t[69]===Symbol.for("react.memo_cache_sentinel")?(ie=(0,r.__)("Creation date, select to sort table by date story was created","web-stories"),t[69]=ie):ie=t[69],t[70]!==k?(de=()=>k(se.DATE_CREATED),t[70]=k,t[71]=de):de=t[71],t[72]!==A?(ue=e=>A(e,se.DATE_CREATED),t[72]=A,t[73]=ue):ue=t[73];const pe=g===se.DATE_CREATED;let fe,be;t[74]===Symbol.for("react.memo_cache_sentinel")?(fe=(0,r.__)("Date Created","web-stories"),t[74]=fe):fe=t[74],t[75]!==de||t[76]!==ue||t[77]!==pe?(be=n.createElement(nl,{"aria-label":ie,onClick:de,onKeyDown:ue,active:pe,size:io.TextSize.Small,isBold:!0},fe),t[75]=de,t[76]=ue,t[77]=pe,t[78]=be):be=t[78];const he=g===se.DATE_CREATED,ge=_===le.ASC;let _e,ye,Se,Ee,we,ve;t[79]===Symbol.for("react.memo_cache_sentinel")?(_e=n.createElement(Hr,null),t[79]=_e):_e=t[79],t[80]!==he||t[81]!==ge?(ye=n.createElement(ol,{"aria-hidden":!0,active:he,asc:ge},_e),t[80]=he,t[81]=ge,t[82]=ye):ye=t[82],t[83]!==be||t[84]!==ye?(Se=n.createElement(Xo,null,be,ye),t[83]=be,t[84]=ye,t[85]=Se):Se=t[85],t[86]===Symbol.for("react.memo_cache_sentinel")?(Ee=(0,r.__)("Modification date, select to sort table by date story was last modified","web-stories"),t[86]=Ee):Ee=t[86],t[87]!==k?(we=()=>k(se.LAST_MODIFIED),t[87]=k,t[88]=we):we=t[88],t[89]!==A?(ve=e=>A(e,se.LAST_MODIFIED),t[89]=A,t[90]=ve):ve=t[90];const Te=g===se.LAST_MODIFIED;let Ce,ke;t[91]===Symbol.for("react.memo_cache_sentinel")?(Ce=(0,r.__)("Last Modified","web-stories"),t[91]=Ce):Ce=t[91],t[92]!==we||t[93]!==ve||t[94]!==Te?(ke=n.createElement(nl,{"aria-label":Ee,onClick:we,onKeyDown:ve,active:Te,size:io.TextSize.Small,isBold:!0},Ce),t[92]=we,t[93]=ve,t[94]=Te,t[95]=ke):ke=t[95];const Ie=g===se.LAST_MODIFIED,Le=_===le.ASC;let Ae,xe,Oe,De,Ne,Pe,Re,Me;return t[96]===Symbol.for("react.memo_cache_sentinel")?(Ae=n.createElement(Hr,null),t[96]=Ae):Ae=t[96],t[97]!==Ie||t[98]!==Le?(xe=n.createElement(ol,{"aria-hidden":!0,active:Ie,asc:Le},Ae),t[97]=Ie,t[98]=Le,t[99]=xe):xe=t[99],t[100]!==ke||t[101]!==xe?(Oe=n.createElement(Xo,null,ke,xe),t[100]=ke,t[101]=xe,t[102]=Oe):Oe=t[102],t[103]!==v?(De=v!==me.DRAFT&&n.createElement(Yo,null,n.createElement(Na.Text.Span,{isBold:!0,size:io.TextSize.Small},(0,r.__)("Publish State","web-stories"))),t[103]=v,t[104]=De):De=t[104],t[105]!==z||t[106]!==K||t[107]!==re||t[108]!==Se||t[109]!==Oe||t[110]!==De?(Ne=n.createElement(Qo,null,z,K,re,Se,Oe,De),t[105]=z,t[106]=K,t[107]=re,t[108]=Se,t[109]=Oe,t[110]=De,t[111]=Ne):Ne=t[111],t[112]!==Ne||t[113]!==u?(Pe=n.createElement(Wo,{topOffset:u},Ne),t[112]=Ne,t[113]=u,t[114]=Pe):Pe=t[114],t[115]!==D?(Re=n.createElement(qo,null,D),t[115]=D,t[116]=Re):Re=t[116],t[117]!==Pe||t[118]!==Re?(Me=n.createElement(el,{"data-testid":"story-list-view"},n.createElement(jo,{"aria-label":N},Pe,Re)),t[117]=Pe,t[118]=Re,t[119]=Me):Me=t[119],Me}function ll(e){const{key:t}=e;return"status"===t}function sl(e){const{state:t,actions:a}=e,{filters:o,sortObject:n}=t,{updateSort:r}=a;return{filters:o,sortObject:n,updateSort:r}}StoryListView.propTypes={hideStoryList:g().bool,renameStory:oa,storyMenu:aa.isRequired,stories:Jt};var il=a(68268);const cl=f.default.div.withConfig({displayName:"grid__Gradient",componentId:"sc-fbjjp8-0"})(["position:absolute;bottom:0;height:67%;width:100%;border-radius:",";background:",";"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>e.colors.gradient.posterOverlay)),dl=f.default.div.withConfig({displayName:"grid__Scrim",componentId:"sc-fbjjp8-1"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;display:flex;flex-direction:column;justify-content:flex-end;border-radius:",";background:",";"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>e.colors.opacity.black3)),ul=f.default.div.withConfig({displayName:"grid__Container",componentId:"sc-fbjjp8-2"})(["position:relative;"]),ml=f.default.div.withConfig({displayName:"grid__Poster",componentId:"sc-fbjjp8-3"})(["height:100%;width:100%;object-fit:cover;border-radius:",";background:",";"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>e.colors.gradient.placeholder)),pl=(0,f.default)(va).withConfig({displayName:"storyGridItem__CustomCardGridItem",componentId:"sc-1vhey8s-0"})(["display:grid;grid-template-columns:100%;grid-template-rows:",";"],(({$posterHeight:e})=>`${e}px auto`));pl.propTypes={$posterHeight:g().number};const fl=f.default.div.withConfig({displayName:"storyGridItem__CardWrapper",componentId:"sc-1vhey8s-1"})(["position:absolute;height:100%;width:100%;"]),bl=f.default.a.withConfig({displayName:"storyGridItem__ScrimAnchor",componentId:"sc-1vhey8s-2"})(["position:absolute;top:0;width:100%;height:100%;box-sizing:border-box;border-radius:",";&:hover,&:focus{box-shadow:none;border:",";}"],(({theme:e})=>e.borders.radius.medium),(({theme:e})=>`4px solid ${e.colors.interactiveBg.active}`)),hl=f.default.div.withConfig({displayName:"storyGridItem__StyledStoryDisplayContent",componentId:"sc-1vhey8s-3"})(["padding:20px 12px 8px 12px;display:flex;flex-direction:column;width:100%;"]),gl=f.default.div.withConfig({displayName:"storyGridItem__Row",componentId:"sc-1vhey8s-4"})(["width:100%;display:flex;align-items:flex-end;flex-wrap:wrap;"]),_l=(0,f.default)(gl).withConfig({displayName:"storyGridItem__LockedRow",componentId:"sc-1vhey8s-5"})(["position:absolute;top:8px;right:8px;justify-content:flex-end;align-items:center;"]),yl=f.default.div.withConfig({displayName:"storyGridItem__CardDetailsGrid",componentId:"sc-1vhey8s-6"})(["display:grid;grid-template-columns:80% auto;margin-top:4px;"]),Sl=f.default.div.withConfig({displayName:"storyGridItem__CardDetailsColumn",componentId:"sc-1vhey8s-7"})(["display:flex;flex-direction:column;align-self:flex-end;"]),El=(0,f.default)(So.Headline).attrs({as:"h3",size:io.TextSize.XSmall}).withConfig({displayName:"storyGridItem__Title",componentId:"sc-1vhey8s-8"})(["overflow:hidden;text-overflow:ellipsis;color:",";margin:0;max-height:calc(1.2em * 3);display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;"],(({theme:e})=>e.colors.inverted.fg.primary)),wl=(0,f.default)(Na.Text.Span).attrs({size:io.TextSize.XSmall}).withConfig({displayName:"storyGridItem__DetailCopy",componentId:"sc-1vhey8s-9"})(["color:",";margin:0;"],(({theme:e})=>e.colors.inverted.fg.primary)),vl=f.default.img.withConfig({displayName:"storyGridItem__LockAvatar",componentId:"sc-1vhey8s-10"})(["height:40px;width:40px;border:",";border-radius:",";z-index:3;"],(({theme:e})=>`2px solid ${e.colors.interactiveBg.brandNormal}`),(({theme:e})=>e.borders.radius.small)),Tl=(0,f.default)(qr.default).withConfig({displayName:"storyGridItem__LockIcon",componentId:"sc-1vhey8s-11"})(["color:",";display:inline;height:36px;width:36px;margin:-4px -4px -4px -10px;"],(({theme:e})=>e.colors.inverted.fg.primary)),Cl=e=>{const t=(0,l.c)(40),{author:a,contextMenu:o,displayDate:s,editMode:i,formattedTitle:c,id:d,isLocked:u,lockUser:m,onEditComplete:p,onEditCancel:f,status:b,title:h}=e;let g;t[0]!==m?(g=void 0===m?{}:m,t[0]=m,t[1]=g):g=t[1];const _=g;let S,E;t[2]!==s||t[3]!==b?(S=()=>{if(!s)return null;switch(b){case me.PUBLISH:return(0,Z.default)((0,r.__)("Published %s","web-stories"),s);case me.FUTURE:return(0,Z.default)((0,r.__)("Scheduled %s","web-stories"),s);default:return(0,Z.default)((0,r.__)("Modified %s","web-stories"),s)}},E=[b,s],t[2]=s,t[3]=b,t[4]=S,t[5]=E):(S=t[4],E=t[5]);const w=(0,y.useMemo)(S,E),{name:v,avatar:T}=_;let C;t[6]!==T||t[7]!==u||t[8]!==v?(C=u&&T&&n.createElement(_l,null,n.createElement(Tooltip,{position:nn.Placement.BottomStart,title:v&&(0,Z.default)((0,r.__)("%s is currently editing this story","web-stories"),v)},n.createElement(vl,{src:T,alt:v,decoding:"async",height:24,width:24,"data-test-id":"lock-user-avatar"}))),t[6]=T,t[7]=u,t[8]=v,t[9]=C):C=t[9];const k=C;let I,L,A,x,O,D,N,P,R;return t[10]!==i||t[11]!==c||t[12]!==d||t[13]!==u||t[14]!==f||t[15]!==p||t[16]!==h?(I=i?n.createElement(ja,{onEditComplete:p,onEditCancel:f,value:h,id:d,label:(0,r.__)("Rename story","web-stories"),isInverted:!0}):n.createElement(gl,null,u&&n.createElement(Tl,null),n.createElement(El,null,c)),t[10]=i,t[11]=c,t[12]=d,t[13]=u,t[14]=f,t[15]=p,t[16]=h,t[17]=I):I=t[17],t[18]!==b?(L=b===me.DRAFT&&n.createElement(wl,{isBold:!0},(0,r.__)("Draft","web-stories")),t[18]=b,t[19]=L):L=t[19],t[20]!==b?(A=b===me.PENDING&&n.createElement(wl,{isBold:!0},(0,r.__)("Pending","web-stories")),t[20]=b,t[21]=A):A=t[21],t[22]!==a?.name?(x=a?.name&&n.createElement(wl,null,a?.name),t[22]=a?.name,t[23]=x):x=t[23],t[24]!==w?(O=n.createElement(wl,{className:"dashboard-grid-item-date"},w),t[24]=w,t[25]=O):O=t[25],t[26]!==O||t[27]!==L||t[28]!==A||t[29]!==x?(D=n.createElement(Sl,null,L,A,x,O),t[26]=O,t[27]=L,t[28]=A,t[29]=x,t[30]=D):D=t[30],t[31]!==o?(N=n.createElement(Sl,null,o),t[31]=o,t[32]=N):N=t[32],t[33]!==D||t[34]!==N?(P=n.createElement(yl,null,D,N),t[33]=D,t[34]=N,t[35]=P):P=t[35],t[36]!==k||t[37]!==P||t[38]!==I?(R=n.createElement(hl,null,k,I,P),t[36]=k,t[37]=P,t[38]=I,t[39]=R):R=t[39],R};function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},kl.apply(null,arguments)}const Il=(0,y.forwardRef)(((e,t)=>{const a=(0,l.c)(78),{onFocus:o,isActive:s,pageSize:i,renameStory:c,story:d,storyMenu:u}=e,{userId:m}=w(),p=s?0:-1;let b;a[0]!==c||a[1]!==d?(b=c?{editMode:c?.id===d?.id,onEditComplete:e=>c?.handleOnRenameStory(d,e),onEditCancel:c?.handleCancelRename}:{},a[0]=c,a[1]=d,a[2]=b):b=a[2];const h=b;let g,_;a[3]!==d.lockUser||a[4]!==d.locked||a[5]!==m?(g=()=>d?.locked&&m!==d?.lockUser.id,a[3]=d.lockUser,a[4]=d.locked,a[5]=m,a[6]=g):g=a[6],a[7]!==d||a[8]!==m?(_=[d,m],a[7]=d,a[8]=m,a[9]=_):_=a[9];const S=(0,y.useMemo)(g,_);let E,v;a[10]!==S||a[11]!==d||a[12]!==u.menuItems?(E=()=>jr({menuItems:u.menuItems,story:d,isLocked:S}),a[10]=S,a[11]=d,a[12]=u.menuItems,a[13]=E):E=a[13],a[14]!==S||a[15]!==d||a[16]!==u?(v=[u,d,S],a[14]=S,a[15]=d,a[16]=u,a[17]=v):v=a[17];const T=(0,y.useMemo)(E,v),C=d?.status===me.DRAFT?d?.modifiedGmt:d?.createdGmt;let k;a[18]!==C?(k=Tt(C),a[18]=C,a[19]=k):k=a[19];const I=k;let L;a[20]!==d.title?(L=fn(d.title),a[20]=d.title,a[21]=L):L=a[21];const A=L;let x;a[22]!==A||a[23]!==T||a[24]!==s||a[25]!==S||a[26]!==d.id||a[27]!==d.lockUser||a[28]!==u.contextMenuId||a[29]!==u.handleMenuToggle||a[30]!==p?(x=()=>T.length?n.createElement(StoryMenu,{menuLabel:S?(0,Z.default)((0,r.__)("Context menu for %1$s (locked by %2$s)","web-stories"),A,d?.lockUser.name):(0,Z.default)((0,r.__)("Context menu for %s","web-stories"),A),itemActive:s,tabIndex:p,onMoreButtonSelected:u.handleMenuToggle,contextMenuId:u.contextMenuId,storyId:d.id,isInverted:!0,menuItems:T,menuStyleOverrides:(0,f.css)(["margin:0 0 0 auto;"])}):null,a[22]=A,a[23]=T,a[24]=s,a[25]=S,a[26]=d.id,a[27]=d.lockUser,a[28]=u.contextMenuId,a[29]=u.handleMenuToggle,a[30]=p,a[31]=x):x=a[31];const O=d?.lockUser?.name;let D;a[32]!==A||a[33]!==T||a[34]!==s||a[35]!==S||a[36]!==d.id||a[37]!==u||a[38]!==O||a[39]!==p?(D=[S,A,O,d.id,s,p,u,T],a[32]=A,a[33]=T,a[34]=s,a[35]=S,a[36]=d.id,a[37]=u,a[38]=O,a[39]=p,a[40]=D):D=a[40];const N=(0,y.useMemo)(x,D),P=`story-grid-item-${d.id}`,R=i.height;let M,B,z,F,U;a[41]!==A?(M=(0,Z.default)((0,r.__)("Details about %s","web-stories"),A),a[41]=A,a[42]=M):M=a[42],a[43]!==A||a[44]!==d.featuredMediaUrl?(B=d.featuredMediaUrl?{alt:(0,Z.default)((0,r.__)("%s Poster image","web-stories"),A),as:"img",src:d.featuredMediaUrl,decoding:"async"}:null,a[43]=A,a[44]=d.featuredMediaUrl,a[45]=B):B=a[45],a[46]!==B?(z=n.createElement(ml,kl({},B,{width:ut,height:dt})),a[46]=B,a[47]=z):z=a[47],a[48]===Symbol.for("react.memo_cache_sentinel")?(F=n.createElement(cl,null),a[48]=F):F=a[48],a[49]!==A||a[50]!==d.capabilities?.hasEditAction||a[51]!==d.editStoryLink||a[52]!==p?(U=d?.capabilities?.hasEditAction&&n.createElement(bl,{className:"grid-item-anchor","data-testid":"story-editor-grid-link",tabIndex:p,href:d.editStoryLink},n.createElement(il.VisuallyHidden,null,(0,Z.default)((0,r.__)("Open %s in Editor","web-stories"),A))),a[49]=A,a[50]=d.capabilities?.hasEditAction,a[51]=d.editStoryLink,a[52]=p,a[53]=U):U=a[53];const G=d?.lockUser,H=d?.status;let j,q,V,W;return a[54]!==A||a[55]!==S||a[56]!==N||a[57]!==d.author||a[58]!==d.id||a[59]!==d.title||a[60]!==I||a[61]!==G||a[62]!==H||a[63]!==h?(j=n.createElement(Cl,kl({author:d.author,contextMenu:N,displayDate:I,formattedTitle:A,id:d.id,isLocked:S,lockUser:G,status:H,title:d.title},h)),a[54]=A,a[55]=S,a[56]=N,a[57]=d.author,a[58]=d.id,a[59]=d.title,a[60]=I,a[61]=G,a[62]=H,a[63]=h,a[64]=j):j=a[64],a[65]!==U||a[66]!==j?(q=n.createElement(dl,null,U,j),a[65]=U,a[66]=j,a[67]=q):q=a[67],a[68]!==z||a[69]!==q?(V=n.createElement(ul,null,n.createElement(fl,null,z,F,q)),a[68]=z,a[69]=q,a[70]=V):V=a[70],a[71]!==o||a[72]!==i.height||a[73]!==t||a[74]!==P||a[75]!==M||a[76]!==V?(W=n.createElement(pl,{"data-testid":P,onFocus:o,$posterHeight:R,ref:t,"aria-label":M},V),a[71]=o,a[72]=i.height,a[73]=t,a[74]=P,a[75]=M,a[76]=V,a[77]=W):W=a[77],W}));Il.displayName="StoryGridItem",Il.propTypes={onFocus:g().func,isActive:g().bool,pageSize:ta,renameStory:oa,storyMenu:aa,story:Xt};const Ll=Il,Al=(0,f.default)(la).withConfig({displayName:"storyGridView__StoryGrid",componentId:"sc-1fwq7hb-0"})(["width:calc(100% - ","px);"],Qe),xl=({stories:e,pageSize:t,storyMenu:a,renameStory:o,returnStoryFocusId:l})=>{const{isRTL:s}=w(),i=(0,y.useRef)(),c=(0,y.useRef)(),d=(0,y.useRef)({}),[u,m]=(0,y.useState)(),p=(0,y.useRef)(),f=(0,y.useMemo)((()=>e.map((({id:e})=>e))),[e]);(0,Bt.default)({containerRef:i,gridRef:c,itemRefs:d,isRTL:s,currentItemId:u,items:e}),(0,y.useEffect)((()=>{if(!u&&l?.value&&!p.current){const e=l?.value;m(e);const t=d.current?.[e]?.querySelectorAll(["button","a"])?.[0];t?.focus()}}),[u,l]),(0,y.useEffect)((()=>{u&&(p.current=u)}),[u]);const b=(0,y.useCallback)(((e,t)=>{if(a.handleMenuToggle(t),t<0&&9===e?.keyCode){const t=!e?.shiftKey?f[f.indexOf(u)+1]:u;l.set(t),p.current=null,m(null)}}),[u,f,l,a]),h=(0,y.useCallback)((()=>{p.current=null,m(null),l.set(null)}),[l]);(0,y.useFocusOut)(i,(()=>m(null)),[]);const g=(0,y.useMemo)((()=>{const e=[ae,ee,te],t=a.menuItems.map((t=>{const a={...t};return e.includes(t?.value)&&(a.action=e=>{h(),t.action(e)}),a}));return{...a,handleMenuToggle:b,menuItems:t}}),[b,a,h]),_=(0,y.useMemo)((()=>e.map((e=>n.createElement(Ll,{onFocus:()=>m(e.id),isActive:u===e.id,ref:t=>{d.current[e.id]=t},key:e.id,pageSize:t,renameStory:o,story:e,storyMenu:g})))),[u,g,t,o,e]);return n.createElement("div",{ref:i},n.createElement(Al,{pageSize:t,ref:c,role:"list",ariaLabel:(0,r.__)("Viewing stories","web-stories")},_))},Ol="DELETE_STORY";function Dl(e){const{id:t}=e;return t}const Nl=function StoriesView(e){const t=(0,l.c)(113),{loading:a,storyActions:o,stories:s,view:i}=e,[c,d]=(0,y.useState)(-1),[u,m]=(0,y.useState)(-1),[p,f]=(0,y.useState)(""),[b,h]=(0,y.useState)(null);let g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g={},t[0]=g):g=t[0];const[_,S]=(0,y.useState)(g),[E,w]=(0,y.useState)(null),{showSnackbar:T}=(0,Br.useSnackbar)(),C=p===Ol&&b;let k,I;t[1]!==s?(k=()=>s.map(Dl),I=[s],t[1]=s,t[2]=k,t[3]=I):(k=t[2],I=t[3]);const L=(0,y.useMemo)(k,I);let A,x,O,D,N,P,R,M;t[4]!==_.id||t[5]!==_.isDeleted||t[6]!==E||t[7]!==w||t[8]!==L?(A=()=>{if(_.id&&!E){const e=L.indexOf(_.id),t=e>0?-1:1,a=_.isDeleted?t:0,o=L[e+a];o&&w(o)}},t[4]=_.id,t[5]=_.isDeleted,t[6]=E,t[7]=w,t[8]=L,t[9]=A):A=t[9],t[10]!==_||t[11]!==E||t[12]!==L?(x=[_,E,L],t[10]=_,t[11]=E,t[12]=L,t[13]=x):x=t[13],(0,y.useEffect)(A,x),t[14]!==p||t[15]!==h?(O=()=>{p||h(null)},D=[p,h],t[14]=p,t[15]=h,t[16]=O,t[17]=D):(O=t[16],D=t[17]),(0,y.useEffect)(O,D),t[18]!==p||t[19]!==S||t[20]!==w?(N=()=>{p&&(S({}),w(null))},t[18]=p,t[19]=S,t[20]=w,t[21]=N):N=t[21],t[22]!==p?(P=[p],t[22]=p,t[23]=P):P=t[23],(0,y.useEffect)(N,P),t[24]!==m||t[25]!==o?(R=(e,t)=>{m(-1),(0,v.trackEvent)("rename_story"),o.updateStory({...e,title:{raw:t}})},t[24]=m,t[25]=o,t[26]=R):R=t[26],t[27]!==o?(M=[o],t[27]=o,t[28]=M):M=t[28];const B=(0,y.useCallback)(R,M);let z,F;t[29]!==b||t[30]!==f||t[31]!==S||t[32]!==o?(z=()=>{(0,v.trackEvent)("delete_story"),o.trashStory(b),S({id:b?.id,isDeleted:!0}),f("")},t[29]=b,t[30]=f,t[31]=S,t[32]=o,t[33]=z):z=t[33],t[34]!==b||t[35]!==o?(F=[o,b],t[34]=b,t[35]=o,t[36]=F):F=t[36];const U=(0,y.useCallback)(z,F);let G,H;t[37]!==d?(G=()=>{d(-1),(0,v.trackEvent)("open_in_editor")},t[37]=d,t[38]=G):G=t[38],t[39]===Symbol.for("react.memo_cache_sentinel")?(H=[],t[39]=H):H=t[39];const j=(0,y.useCallback)(G,H);let q,V;t[40]!==d||t[41]!==m?(q=e=>{d(-1),m(e.id)},t[40]=d,t[41]=m,t[42]=q):q=t[42],t[43]===Symbol.for("react.memo_cache_sentinel")?(V=[],t[43]=V):V=t[43];const W=(0,y.useCallback)(q,V);let $,K;t[44]!==d||t[45]!==S||t[46]!==o?($=e=>{d(-1),(0,v.trackEvent)("duplicate_story"),o.duplicateStory(e),S({id:e.id})},t[44]=d,t[45]=S,t[46]=o,t[47]=$):$=t[47],t[48]!==o?(K=[o],t[48]=o,t[49]=K):K=t[49];const X=(0,y.useCallback)($,K);let Y,J;t[50]!==f||t[51]!==h||t[52]!==d?(Y=e=>{d(-1),h(e),f(Ol)},t[50]=f,t[51]=h,t[52]=d,t[53]=Y):Y=t[53],t[54]===Symbol.for("react.memo_cache_sentinel")?(J=[],t[54]=J):J=t[54];const Q=(0,y.useCallback)(Y,J);let le,se;t[55]!==d||t[56]!==S||t[57]!==T?(le=e=>{d(-1),window.navigator.clipboard.writeText(e.link),T({message:(0,Z.default)((0,r.__)("%s has been copied to your clipboard.","web-stories"),fn(e.title)),dismissible:!0}),S({id:e.id})},t[55]=d,t[56]=S,t[57]=T,t[58]=le):le=t[58],t[59]!==T?(se=[T],t[59]=T,t[60]=se):se=t[60];const ie=(0,y.useCallback)(le,se);let ce,de;t[61]!==b?.id||t[62]!==f||t[63]!==S?(ce=()=>{S({id:b?.id}),f("")},t[61]=b?.id,t[62]=f,t[63]=S,t[64]=ce):ce=t[64],t[65]!==b?(de=[b],t[65]=b,t[66]=de):de=t[66];const ue=(0,y.useCallback)(ce,de);let me;t[67]!==ie||t[68]!==Q||t[69]!==X||t[70]!==j||t[71]!==W||t[72]!==d?(me=re.map((e=>{e:switch(e?.value){case oe:e.action=ie;break e;case ae:e.action=Q;break e;case te:e.action=X;break e;case ne:e.action=j;break e;case ee:e.action=W;break e;default:e.action=()=>d(-1)}return e})),t[67]=ie,t[68]=Q,t[69]=X,t[70]=j,t[71]=W,t[72]=d,t[73]=me):me=t[73];const pe=me;let fe,be;t[74]!==c||t[75]!==pe||t[76]!==d?(fe=()=>({handleMenuToggle:d,contextMenuId:c,menuItems:pe}),be=[c,pe,d],t[74]=c,t[75]=pe,t[76]=d,t[77]=fe,t[78]=be):(fe=t[77],be=t[78]);const he=(0,y.useMemo)(fe,be);let ge,_e;t[79]!==B||t[80]!==m||t[81]!==u?(ge=()=>({id:u,handleOnRenameStory:B,handleCancelRename:()=>m(-1)}),_e=[B,m,u],t[79]=B,t[80]=m,t[81]=u,t[82]=ge,t[83]=_e):(ge=t[82],_e=t[83]);const ye=(0,y.useMemo)(ge,_e);let Se,Ee;t[84]!==a?.isLoading||t[85]!==a?.showStoriesWhileLoading||t[86]!==ye||t[87]!==E||t[88]!==w||t[89]!==s||t[90]!==he||t[91]!==i.pageSize||t[92]!==i.style?(Se=()=>i.style===nt.LIST?n.createElement(StoryListView,{hideStoryList:a?.isLoading&&!a?.showStoriesWhileLoading.current,pageSize:i.pageSize,renameStory:ye,stories:s,storyMenu:he}):!a?.isLoading||a?.isLoading&&a?.showStoriesWhileLoading.current?n.createElement(xl,{isLoading:a?.isLoading,pageSize:i.pageSize,renameStory:ye,storyMenu:he,stories:s,returnStoryFocusId:{value:E,set:w}}):null,t[84]=a?.isLoading,t[85]=a?.showStoriesWhileLoading,t[86]=ye,t[87]=E,t[88]=w,t[89]=s,t[90]=he,t[91]=i.pageSize,t[92]=i.style,t[93]=Se):Se=t[93],t[94]!==a||t[95]!==ye||t[96]!==E||t[97]!==s||t[98]!==he||t[99]!==i?(Ee=[a,ye,E,s,he,i],t[94]=a,t[95]=ye,t[96]=E,t[97]=s,t[98]=he,t[99]=i,t[100]=Ee):Ee=t[100];const we=(0,y.useMemo)(Se,Ee);let ve,Te,Ce;return t[101]!==a?.isLoading||t[102]!==a?.showStoriesWhileLoading?(ve=a?.isLoading&&!a?.showStoriesWhileLoading.current&&n.createElement(to,null,n.createElement(Ur.default,null)),t[101]=a?.isLoading,t[102]=a?.showStoriesWhileLoading,t[103]=ve):ve=t[103],t[104]!==b||t[105]!==ue||t[106]!==U||t[107]!==C?(Te=C&&n.createElement(Oa,{isOpen:!0,contentLabel:(0,r.__)("Dialog to confirm deleting a story","web-stories"),title:(0,r.__)("Delete Story","web-stories"),onClose:ue,secondaryText:(0,r.__)("Cancel","web-stories"),secondaryRest:{"aria-label":(0,Z.default)((0,r.__)('Cancel deleting story "%s"',"web-stories"),fn(b.title))},primaryText:(0,r.__)("Delete","web-stories"),onPrimary:U,primaryRest:{"aria-label":(0,Z.default)((0,r.__)('Confirm deleting story "%s"',"web-stories"),fn(b.title))}},n.createElement(Na.Text.Paragraph,{size:io.TextSize.Small},(0,Z.default)((0,r.__)('Are you sure you want to delete "%s"?',"web-stories"),fn(b.title)))),t[104]=b,t[105]=ue,t[106]=U,t[107]=C,t[108]=Te):Te=t[108],t[109]!==we||t[110]!==ve||t[111]!==Te?(Ce=n.createElement(n.Fragment,null,we,ve,Te),t[109]=we,t[110]=ve,t[111]=Te,t[112]=Ce):Ce=t[112],Ce};function NoAvailableContent({filtersObject:e}){const{search:t}=e;return t?(0,Z.default)(/* translators: %s: search term. */ /* translators: %s: search term. */
(0,r.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),t):0!==Object.keys(e).length?(0,r.__)("Sorry, we couldn't find any results","web-stories"):(0,r.__)("Start telling Stories.","web-stories")}function Pl(e){const t=(0,l.c)(13),{allPagesFetched:a,canViewDefaultTemplates:o,filtersObject:s,loading:i,page:c,stories:d,storyActions:u,view:m}=e;let p;t[0]!==s?(p=void 0===s?{}:s,t[0]=s,t[1]=p):p=t[1];const f=p;let b,h;return t[2]!==a||t[3]!==o||t[4]!==f||t[5]!==i||t[6]!==c||t[7]!==d||t[8]!==u||t[9]!==m?(b=d.length>0?n.createElement(n.Fragment,null,n.createElement(Nl,{storyActions:u,stories:d,view:m,loading:i}),n.createElement(Fr.default,{canLoadMore:!a,isLoading:i?.isLoading,allDataLoadedMessage:(0,r.__)("No more stories","web-stories"),allDataLoadedAriaMessage:(0,r.__)("All stories are loaded","web-stories"),loadingAriaMessage:(0,r.__)("Loading more stories","web-stories"),onLoadMore:c.requestNextPage})):!i?.isLoading&&n.createElement(ur,null,n.createElement(So.Headline,{size:io.TextSize.Small,as:"h3"},n.createElement(NoAvailableContent,{filtersObject:f})),0===Object.keys(f).length&&o&&n.createElement(zt.ButtonAsLink,{type:Ft.ButtonType.Primary,size:Ft.ButtonSize.Medium,href:bo(tt.TEMPLATES_GALLERY)},(0,r.__)("Explore Templates","web-stories"))),t[2]=a,t[3]=o,t[4]=f,t[5]=i,t[6]=c,t[7]=d,t[8]=u,t[9]=m,t[10]=b):b=t[10],t[11]!==b?(h=n.createElement(Ya.Scrollable,null,n.createElement(La,null,b)),t[11]=b,t[12]=h):h=t[12],h}NoAvailableContent.propTypes={filtersObject:g().object},Pl.propTypes={allPagesFetched:g().bool,canViewDefaultTemplates:g().bool,filtersObject:g().object,loading:g().shape({isLoading:g().bool,showStoriesWhileLoading:Ln}),page:In,stories:Jt,storyActions:Zt,view:kn};const Rl=Pl;const Ml=function(e){return e.reduce(((e,t)=>!t.title||t?.title.trim().length<=0?e:[...e,{label:t.title,value:t.title}]),[])};var Bl=a(22889);const zl="VERTICAL",Fl="COLOR",Ul="TAG",Gl="TITLE";const Hl=function(e){const t=Object.values(e),a=t.flatMap((e=>e.colors)).map((e=>({label:e.family,value:e.family,type:Fl}))),o=t.flatMap((e=>e.tags)).map((e=>({label:e,value:e,type:Ul}))),n=t.map((e=>e.vertical)).map((e=>({label:e,value:e,type:zl}))),r=t.map((e=>({label:e.title,value:e.title,type:Gl})));return[...(0,Bl.default)(o,"label"),...(0,Bl.default)(a,"label"),...(0,Bl.default)(n,"label"),...(0,Bl.default)(r,"label")]};const jl=function(e){return t=>!e||e.some((e=>{switch(e?.type){case Ul:return t.tags.map((e=>e.toLowerCase())).includes(e.value.toLowerCase());case Fl:return t.colors.map((e=>e.label.toLowerCase())).includes(e.value.toLowerCase());case zl:return t.vertical.toLowerCase().includes(e.value.toLowerCase());case Gl:return t.title.toLowerCase().includes(e.value.toLowerCase());default:return!0}}))};var ql=a(82956);const Vl=(0,f.default)(ql.default).withConfig({displayName:"storyStatusToggle__StyledPill",componentId:"sc-141pqd7-0"})(["margin:0 2px;white-space:nowrap;& > span{padding-left:8px;color:",";}"],(({theme:e,isActive:t})=>t?e.colors.gray[20]:e.colors.fg.tertiary));function Wl(e){const{actions:t}=e,{updateFilter:a,registerFilters:o}=t;return{updateFilter:a,registerFilters:o}}const $l=function StoryStatusToggle(e){const t=(0,l.c)(20),{initialPageReady:a,totalStoriesByStatus:o,currentStatus:s}=e,{updateFilter:i,registerFilters:c}=Kn(Wl);let d,u;t[0]!==i?(d=e=>{i("status",{filterId:e})},u=[i],t[0]=i,t[1]=d,t[2]=u):(d=t[1],u=t[2]);const m=(0,y.useCallback)(d,u);let p,f,b,h;t[3]!==c?(p=()=>{c([{key:"status",filterId:he.filters.status}])},f=[c],t[3]=c,t[4]=p,t[5]=f):(p=t[4],f=t[5]),(0,y.useEffect)(p,f),t[6]!==o?(b=()=>Object.keys(o).reduce(((e,t)=>e+o[t]),0),h=[o],t[6]=o,t[7]=b,t[8]=h):(b=t[7],h=t[8]);const g=(0,y.useMemo)(b,h);let _,S;t[9]!==s||t[10]!==o?(_=()=>fe.filter((e=>{const{status:t}=e;return Boolean(t in o)&&o[t]>0||t===s})).map((e=>{const{label:t,status:a,value:n}=e,l=o[a],i=Boolean(!l);return{ariaLabel:(0,Z.default)((0,r.__)("Filter stories by %s","web-stories"),t),disabled:i,isActive:s===n,value:n,label:t,count:l}})),S=[o,s],t[9]=s,t[10]=o,t[11]=_,t[12]=S):(_=t[11],S=t[12]);const E=(0,y.useMemo)(_,S);if(!a||!g||o&&0===Object.keys(o).length)return null;let w,v;if(t[13]!==m||t[14]!==E){let e;t[16]!==m?(e=e=>{const{ariaLabel:t,disabled:a,isActive:o,value:r,label:l,count:s}=e;return n.createElement(Vl,{key:r,onClick:()=>m(r),isActive:o,disabled:a,"aria-label":t},l,n.createElement("span",null,s))},t[16]=m,t[17]=e):e=t[17],w=E.map(e),t[13]=m,t[14]=E,t[15]=w}else w=t[15];return t[18]!==w?(v=n.createElement(n.Fragment,null,w),t[18]=w,t[19]=v):v=t[19],v};function Kl(e){const t=(0,l.c)(45),{initialPageReady:a,stories:o,totalStoriesByStatus:s,view:i}=e;let c,d;t[0]!==o?(c=()=>Ml(o),d=[o],t[0]=o,t[1]=c,t[2]=d):(c=t[1],d=t[2]);const u=(0,y.useMemo)(c,d),{filters:m,sortObject:p,updateFilter:f,updateSort:b,registerFilters:h}=Kn(Zl);let g,_;t[3]!==m?(g=()=>{const e=m.find(Jl),t=m.find(Yl);return[m.filter(Xl),e?.filterId,t?.filterId]},_=[m],t[3]=m,t[4]=g,t[5]=_):(g=t[4],_=t[5]);const[S,E,w]=(0,y.useMemo)(g,_);let T,C;t[6]!==E||t[7]!==s?(T=()=>(E?.split(",")||[]).reduce(((e,t)=>e+=s[t]||0),0),C=[E,s],t[6]=E,t[7]=s,t[8]=T,t[9]=C):(T=t[8],C=t[9]);const k=(0,y.useMemo)(T,C),I=Boolean(w);let L;t[10]!==E||t[11]!==I||t[12]!==k?(L={currentFilter:E,isActiveSearch:I,totalResults:k,view:lt},t[10]=E,t[11]=I,t[12]=k,t[13]=L):L=t[13];const A=_n(L);let x;t[14]!==f?(x=async e=>{await(0,v.trackEvent)("search",{search_type:"dashboard",search_term:e}),f("search",{filterId:e})},t[14]=f,t[15]=x):x=t[15];const O=(0,y.useDebouncedCallback)(x,300);let D,N,P,R;t[16]!==h?(D=()=>{h([{key:"search"}])},N=[h],t[16]=h,t[17]=D,t[18]=N):(D=t[17],N=t[18]),(0,y.useEffect)(D,N),t[19]!==f?(P=()=>f("search",{filterId:null}),R=[f],t[19]=f,t[20]=P,t[21]=R):(P=t[20],R=t[21]);const M=(0,y.useCallback)(P,R);let B,z,F,U,G,H;return t[22]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.__)("Dashboard","web-stories"),z=(0,r.__)("Search Stories","web-stories"),t[22]=B,t[23]=z):(B=t[22],z=t[23]),t[24]!==a||t[25]!==E||t[26]!==s?(F=n.createElement($l,{initialPageReady:a,totalStoriesByStatus:s,currentStatus:E}),t[24]=a,t[25]=E,t[26]=s,t[27]=F):F=t[27],t[28]!==M||t[29]!==O||t[30]!==a||t[31]!==w||t[32]!==u||t[33]!==F?(U=n.createElement(Rr,{heading:B,searchPlaceholder:z,searchOptions:u,handleSearchChange:O,showSearch:a,searchValue:w,onClear:M},F),t[28]=M,t[29]=O,t[30]=a,t[31]=w,t[32]=u,t[33]=F,t[34]=U):U=t[34],t[35]!==S||t[36]!==A||t[37]!==p||t[38]!==b||t[39]!==i.style||t[40]!==i.toggleStyle?(G=n.createElement(BodyViewOptions,{showGridToggle:!0,filters:S,showSortDropdown:!0,resultsLabel:A,layoutStyle:i.style,handleLayoutSelect:i.toggleStyle,pageSortOptions:de,pageSortDefaultOption:se.LAST_MODIFIED,handleSortChange:b,currentSort:p}),t[35]=S,t[36]=A,t[37]=p,t[38]=b,t[39]=i.style,t[40]=i.toggleStyle,t[41]=G):G=t[41],t[42]!==U||t[43]!==G?(H=n.createElement(n.Fragment,null,U,G),t[42]=U,t[43]=G,t[44]=H):H=t[44],H}function Xl(e){const{key:t}=e;return!["status","search"].includes(t)}function Yl(e){const{key:t}=e;return"search"===t}function Jl(e){const{key:t}=e;return"status"===t}function Zl(e){const{state:t,actions:a}=e,{filters:o,sortObject:n}=t,{updateFilter:r,updateSort:l,registerFilters:s}=a;return{filters:o,updateFilter:r,sortObject:n,updateSort:l,registerFilters:s}}Kl.propTypes={initialPageReady:g().bool,stories:Jt,totalStoriesByStatus:ea,view:kn.isRequired};const Ql=(0,y.memo)(Kl);function MyStoriesView(){const{duplicateStory:e,fetchStories:t,trashStory:a,updateStory:o,allPagesFetched:r,isLoading:l,stories:s,storiesOrderById:i,totalPages:c,totalStoriesByStatus:d}=Fn((({actions:{storyApi:{duplicateStory:e,fetchStories:t,trashStory:a,updateStory:o}},state:{stories:{allPagesFetched:n,isLoading:r,stories:l,storiesOrderById:s,totalPages:i,totalStoriesByStatus:c}}})=>({duplicateStory:e,fetchStories:t,trashStory:a,updateStory:o,allPagesFetched:n,isLoading:r,stories:l,storiesOrderById:s,totalPages:i,totalStoriesByStatus:c}))),{filtersObject:u,sortObject:m}=Kn((({state:{filtersObject:e,sortObject:t}})=>({filtersObject:e,sortObject:t}))),{apiCallbacks:p,canViewDefaultTemplates:f}=w(),b=(0,y.useRef)(!1);(0,y.useEffect)((()=>(b.current=!0,()=>{b.current=!1})),[]);const{page:h,view:g,showStoriesWhileLoading:_,initialPageReady:S}=function({filtersObject:e=he.filters,sortObject:t=he.sort,isLoading:a=!1,totalPages:o}){const[n,r]=(0,y.useState)(nt.GRID),[l,s]=(0,y.useState)(t),[i,c]=(0,y.useState)(e),[d,u]=(0,y.useState)(1),m=(0,y.useRef)(!1),[p,f]=(0,y.useState)(!1),{pageSize:b}=Tn({thumbnailMode:n===nt.LIST,isGrid:n===nt.GRID}),h=(0,y.useCallback)((e=>{u(Cn(e,{MIN:1,MAX:o}))}),[o]),g=(0,y.useCallback)((e=>{s(e),h(1)}),[h]),_=(0,y.useCallback)((e=>{c(e),h(1)}),[h]),S=(0,y.useCallback)((()=>{r(n===nt.LIST?nt.GRID:nt.LIST)}),[n,r]),E=(0,y.useCallback)((()=>{m.current=!0,h(d+1)}),[d,h]);return(0,y.useEffect)((()=>{i?.search?.length&&(0,v.trackEvent)("search",{search_type:"dashboard_stories",search_term:i.search,search_filter:i.status,search_author_filter:i.author,search_order:l.order,search_orderby:l.orderby,search_view:n})}),[i,l,n]),(0,y.useEffect)((()=>{a||(m.current=!1)}),[a]),(0,y.useEffect)((()=>{o&&!p&&f(!0)}),[o,p]),(0,y.useEffect)((()=>{p&&_(e)}),[_,p,e]),(0,y.useEffect)((()=>{p&&g(t)}),[g,p,t]),(0,y.useMemo)((()=>({view:{style:n,toggleStyle:S,pageSize:b},sort:{value:l.orderby,direction:l.order,set:g},filters:{value:i,set:_},page:{value:d,set:u,requestNextPage:E},initialPageReady:p,showStoriesWhileLoading:m})),[n,S,b,l,g,i,_,p,d,E])}({filtersObject:u,sortObject:m,isLoading:l,totalPages:c});(0,y.useEffect)((()=>{t({page:h.value,filters:u,sort:m})}),[t,u,m,h.value,p]);const E=(0,y.useMemo)((()=>i.map((e=>s[e]))),[s,i]);return n.createElement(Ya.Provider,null,n.createElement(Ql,{initialPageReady:S,stories:E,totalStoriesByStatus:d,view:g}),n.createElement(Rl,{allPagesFetched:r,canViewDefaultTemplates:f,filtersObject:u,loading:{isLoading:l,showStoriesWhileLoading:_},page:h,stories:E,storyActions:{duplicateStory:e,trashStory:a,updateStory:o},view:g}),n.createElement(Ya.Fixed,null,n.createElement(Go,null)))}function MyStories(){const e=(0,l.c)(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=n.createElement(StoryFiltersProvider,null,n.createElement(MyStoriesView,null)),e[0]=t):t=e[0],t}const es=(0,y.createContext)({state:{},actions:{}}),{filters:ts,sort:as}=Ue;function TemplateFiltersProvider(e){const t=(0,l.c)(19),{children:a}=e;let o;t[0]===Symbol.for("react.memo_cache_sentinel")?(o={filters:[],filtersObject:ts,sortObject:as},t[0]=o):o=t[0];const[r,s]=(0,y.useReducer)(zn,o);let i,c;t[1]!==s?(i=(e,t)=>{s({type:Rn,payload:{key:e,value:t}})},t[1]=s,t[2]=i):i=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(c=[],t[3]=c):c=t[3];const d=(0,y.useCallback)(i,c);let u,m;t[4]!==s?(u=e=>{s({type:Mn,payload:{type:"template",values:e}})},t[4]=s,t[5]=u):u=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(m=[],t[6]=m):m=t[6];const p=(0,y.useCallback)(u,m);let f,b;t[7]!==s?(f=e=>{s({type:Bn,payload:{value:e}})},t[7]=s,t[8]=f):f=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(b=[],t[9]=b):b=t[9];const h=(0,y.useCallback)(f,b);let g,_;t[10]!==h||t[11]!==r||t[12]!==d||t[13]!==p?(g=()=>({state:r,actions:{updateSort:p,updateFilter:d,registerFilters:h}}),_=[r,p,d,h],t[10]=h,t[11]=r,t[12]=d,t[13]=p,t[14]=g,t[15]=_):(g=t[14],_=t[15]);const S=(0,y.useMemo)(g,_);let E;return t[16]!==a||t[17]!==S?(E=n.createElement(es.Provider,{value:S},a),t[16]=a,t[17]=S,t[18]=E):E=t[18],E}function os(e){const t=void 0===e?y.identity:e;return(0,y.useContextSelector)(es,t)}TemplateFiltersProvider.propTypes={children:g().node};const ns=f.default.div.withConfig({displayName:"content__CardWrapper",componentId:"sc-1ilp1n2-0"})(["position:absolute;height:100%;width:100%;transition:opacity ease-in-out 300ms;&:hover{",",","{opacity:1;}}",",","{opacity:",";}"],cl,dl,cl,dl,(({$isSelected:e})=>e?1:0)),rs=f.default.div.withConfig({displayName:"content__TemplateDisplayContent",componentId:"sc-1ilp1n2-1"})(["display:flex;flex-direction:column;align-items:center;justify-content:space-between;height:100%;padding-bottom:16px;a,button{margin:auto auto 0;}"]),ls=(0,f.default)(ml).attrs({as:"picture"}).withConfig({displayName:"content__PicturePoster",componentId:"sc-1ilp1n2-2"})(["display:block;& > img{height:100%;width:100%;object-fit:fill;border-radius:",";}"],(({theme:e})=>e.borders.radius.medium)),ss="focus_template",is=(0,f.default)(zt.Button).attrs({type:Ft.ButtonType.Tertiary,size:Ft.ButtonSize.Small}).withConfig({displayName:"templateGridItem__SeeDetailsButton",componentId:"sc-fidkqe-0"})(["background-color:",";"],(({theme:e})=>e.colors.standard.white)),cs=(0,y.forwardRef)(((e,t)=>{const a=(0,l.c)(46),{onCreateStory:o,onFocus:s,height:i,id:c,isActive:d,posterSrc:u,slug:m,title:p,status:f,onSeeDetailsClick:b}=e,h=void 0===b?fr.noop:b,g=d?0:-1;let _;a[0]!==p?(_=(0,Z.default)((0,r.__)("First page of %s template","web-stories"),p),a[0]=p,a[1]=_):_=a[1];const y=_,S=`template-grid-item-${c}`,E=`template-grid-item-${c}`,w=u?.webp;let v;a[2]!==w?(v=n.createElement("source",{srcSet:w,type:"image/webp"}),a[2]=w,a[3]=v):v=a[3];const T=u?.png;let C;a[4]!==T?(C=n.createElement("source",{srcSet:T,type:"image/png"}),a[4]=T,a[5]=C):C=a[5];const k=u?.png;let I,L,A,x,O;a[6]!==y||a[7]!==k?(I=n.createElement("img",{src:k,alt:y,decoding:"async",width:ut,height:dt}),a[6]=y,a[7]=k,a[8]=I):I=a[8],a[9]!==I||a[10]!==v||a[11]!==C?(L=n.createElement(ls,null,v,C,I),a[9]=I,a[10]=v,a[11]=C,a[12]=L):L=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?(A=n.createElement(cl,null),a[13]=A):A=a[13],a[14]!==p?(x=(0,Z.default)((0,r.__)("Go to detail view of %s","web-stories"),p),a[14]=p,a[15]=x):x=a[15],a[16]!==c||a[17]!==h||a[18]!==p?(O=()=>h(c,p),a[16]=c,a[17]=h,a[18]=p,a[19]=O):O=a[19];const D=He[f];let N,P,R,M,B,z;return a[20]!==x||a[21]!==O||a[22]!==D||a[23]!==g?(N=n.createElement(is,{ariaLabel:x,onClick:O,className:ss,tabIndex:g},D),a[20]=x,a[21]=O,a[22]=D,a[23]=g,a[24]=N):N=a[24],a[25]!==o||a[26]!==g||a[27]!==p?(P=o&&n.createElement(zt.Button,{size:Ft.ButtonSize.Small,type:Ft.ButtonType.Primary,onClick:o,tabIndex:g,ariaLabel:(0,Z.default)((0,r.__)("Create new story from %s","web-stories"),p)},(0,r.__)("Use template","web-stories")),a[25]=o,a[26]=g,a[27]=p,a[28]=P):P=a[28],a[29]!==N||a[30]!==P?(R=n.createElement(rs,null,N,P),a[29]=N,a[30]=P,a[31]=R):R=a[31],a[32]!==m||a[33]!==R?(M=n.createElement(dl,{"data-testid":"card-action-container","data-template-slug":m},R),a[32]=m,a[33]=R,a[34]=M):M=a[34],a[35]!==d||a[36]!==L||a[37]!==M?(B=n.createElement(ul,null,n.createElement(ns,{$isSelected:d},L,A,M)),a[35]=d,a[36]=L,a[37]=M,a[38]=B):B=a[38],a[39]!==i||a[40]!==s||a[41]!==t||a[42]!==B||a[43]!==S||a[44]!==E?(z=n.createElement(va,{ref:t,id:S,className:"templateGridItem","data-testid":E,$posterHeight:i,onFocus:s},B),a[39]=i,a[40]=s,a[41]=t,a[42]=B,a[43]=S,a[44]=E,a[45]=z):z=a[45],z}));cs.displayName="TemplateGridItem",cs.propTypes={detailLink:g().string,onCreateStory:g().func,onFocus:g().func.isRequired,onSeeDetailsClick:g().func,height:g().number.isRequired,id:g().number.isRequired,isActive:g().bool,posterSrc:g().shape({webp:g().string.isRequired,png:g().string.isRequired}),slug:g().string.isRequired,status:g().string.isRequired,title:g().string.isRequired};const ds=cs;const us=function TemplateGridView({pageSize:e,templates:t,templateActions:a}){const{isRTL:o,apiCallbacks:l}=w(),s=(0,y.useRef)(),i=(0,y.useRef)(),c=(0,y.useRef)({}),[d,u]=(0,y.useState)(null),{handleDetailsToggle:m,createStoryFromTemplate:p}=a||{},f=Boolean(l?.createStoryFromTemplate);(0,Bt.default)({containerRef:s,gridRef:i,itemRefs:c,isRTL:o,currentItemId:d,items:t}),(0,y.useEffect)((()=>{d&&c.current?.[d]?.querySelector(`.${ss}`)?.focus()}),[d]),(0,y.useFocusOut)(s,(()=>u(null)),[]);const b=(0,y.useMemo)((()=>t.map((({id:t,slug:a,status:o,title:r,postersByPage:l})=>{const s=d===t,i=l?.[0];return n.createElement(ds,{onCreateStory:f?()=>p(t):xn,onFocus:()=>{u(t)},onSeeDetailsClick:m,height:e.height,id:t,isActive:s,key:a,posterSrc:i,ref:e=>{c.current[t]=e},slug:a,status:o,title:r})}))),[t,d,f,m,e.height,p]);return n.createElement("div",{ref:s},n.createElement(la,{pageSize:e,role:"list",ref:i,ariaLabel:(0,r.__)("Viewing available templates","web-stories")},b))};const ms=function(e){const t=(0,l.c)(13),{allPagesFetched:a,isLoading:o,page:s,templates:i,view:c,totalTemplates:d,search:u,templateActions:m}=e,{newStoryURL:p}=w();let f,b;t[0]!==a||t[1]!==o||t[2]!==p||t[3]!==s.requestNextPage||t[4]!==u||t[5]!==m||t[6]!==i||t[7]!==d||t[8]!==c.pageSize?(f=()=>o?n.createElement(to,null,n.createElement(Ur.default,null)):d>0?n.createElement(n.Fragment,null,n.createElement(us,{templates:i,pageSize:c.pageSize,templateActions:m}),n.createElement(Fr.default,{canLoadMore:!a,isLoading:o,allDataLoadedMessage:(0,r.__)("No more templates","web-stories"),allDataLoadedAriaMessage:(0,r.__)("All templates are loaded","web-stories"),loadingAriaMessage:(0,r.__)("Loading more templates","web-stories"),onLoadMore:s.requestNextPage})):n.createElement(ur,null,n.createElement(So.Headline,{size:io.TextSize.Small,as:"h3"},u?(0,Z.default)((0,r.__)('Sorry, we couldn\'t find any results matching "%s"',"web-stories"),u):(0,r.__)("No templates currently available.","web-stories")),!u&&n.createElement(zt.ButtonAsLink,{type:Ft.ButtonType.Primary,size:Ft.ButtonSize.Medium,href:p},(0,r.__)("Create New Story","web-stories"))),b=[a,o,p,s.requestNextPage,m,u,i,d,c.pageSize],t[0]=a,t[1]=o,t[2]=p,t[3]=s.requestNextPage,t[4]=u,t[5]=m,t[6]=i,t[7]=d,t[8]=c.pageSize,t[9]=f,t[10]=b):(f=t[9],b=t[10]);const h=(0,y.useMemo)(f,b);let g;return t[11]!==h?(g=n.createElement(Ya.Scrollable,null,n.createElement(La,null,h)),t[11]=h,t[12]=g):g=t[12],g};function ps(e){const t=(0,l.c)(35),{isLoading:a,totalTemplates:o,view:s,searchOptions:i}=e;let c;t[0]!==i?(c=void 0===i?[]:i,t[0]=i,t[1]=c):c=t[1];const d=c,u=(0,_.useFeature)("enableInProgressTemplateActions"),{filters:m,sortObject:p,updateFilter:f,updateSort:b,registerFilters:h}=os(hs);let g,S;t[2]!==m?(g=()=>{const e=m.find(bs),t=m.find(fs);return[e?.filterId,t?.filterId]},S=[m],t[2]=m,t[3]=g,t[4]=S):(g=t[3],S=t[4]);const[E,w]=(0,y.useMemo)(g,S);let v;t[5]!==f?(v=e=>{f("search",{filterId:e})},t[5]=f,t[6]=v):v=t[6];const T=(0,y.useDebouncedCallback)(v,300);let C,k,I,L;t[7]!==h?(C=()=>{h([{key:"search"}]),h([{key:"status",filterId:Ue.filters.status}])},k=[h],t[7]=h,t[8]=C,t[9]=k):(C=t[8],k=t[9]),(0,y.useEffect)(C,k),t[10]!==f?(I=()=>f("search",{filterId:null}),L=[f],t[10]=f,t[11]=I,t[12]=L):(I=t[11],L=t[12]);const A=(0,y.useCallback)(I,L);let x;t[13]!==E||t[14]!==o?(x={totalResults:o,currentFilter:E,view:st},t[13]=E,t[14]=o,t[15]=x):x=t[15];const O=_n(x);let D,N,P;t[16]===Symbol.for("react.memo_cache_sentinel")?(D=(0,r.__)("Explore Templates","web-stories"),N=(0,r.__)("Search Templates","web-stories"),t[16]=D,t[17]=N):(D=t[16],N=t[17]),t[18]!==A||t[19]!==T||t[20]!==w||t[21]!==d?(P=n.createElement(Rr,{heading:D,searchPlaceholder:N,showSearch:!0,searchOptions:d,searchValue:w,handleSearchChange:T,onClear:A}),t[18]=A,t[19]=T,t[20]=w,t[21]=d,t[22]=P):P=t[22];const R=s.style,M=s.toggleStyle;let B,z,F;return t[23]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.__)("Choose sort option for display","web-stories"),t[23]=B):B=t[23],t[24]!==u||t[25]!==a||t[26]!==O||t[27]!==p||t[28]!==b||t[29]!==s.style||t[30]!==s.toggleStyle?(z=n.createElement(BodyViewOptions,{resultsLabel:O,layoutStyle:R,handleLayoutSelect:M,isLoading:a,pageSortOptions:Ge,pageSortDefaultOption:ze.POPULAR,currentSort:p,handleSortChange:b,showSortDropdown:u,sortDropdownAriaLabel:B}),t[24]=u,t[25]=a,t[26]=O,t[27]=p,t[28]=b,t[29]=s.style,t[30]=s.toggleStyle,t[31]=z):z=t[31],t[32]!==P||t[33]!==z?(F=n.createElement(n.Fragment,null,P,z),t[32]=P,t[33]=z,t[34]=F):F=t[34],F}function fs(e){const{key:t}=e;return"search"===t}function bs(e){const{key:t}=e;return"status"===t}function hs(e){const{state:t,actions:a}=e,{filters:o,sortObject:n}=t,{updateFilter:r,updateSort:l,registerFilters:s}=a;return{filters:o,sortObject:n,updateFilter:r,updateSort:l,registerFilters:s}}ps.propTypes={isLoading:g().bool,totalTemplates:g().number,view:An.isRequired,searchOptions:g().arrayOf(g().object)};const gs=ps;var _s,ys=a(34176);function Ss(){return Ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Ss.apply(null,arguments)}const SvgCrossLarge=({title:e,titleId:t,...a})=>n.createElement("svg",Ss({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,_s||(_s=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M25.146 25.854a.5.5 0 0 0 .708-.708L16.707 16l9.147-9.146a.5.5 0 0 0-.708-.708L16 15.293 6.854 6.146a.5.5 0 1 0-.708.708L15.293 16l-9.147 9.146a.5.5 0 0 0 .708.708L16 16.707z",clipRule:"evenodd"}))),Es=(0,n.memo)(SvgCrossLarge),ws=f.default.nav.withConfig({displayName:"header__Nav",componentId:"sc-1wko3r4-0"})(["justify-content:space-between;align-items:center;display:flex;margin:48px auto;width:calc(76% + 121px);"]),vs=(0,f.default)(zt.Button).attrs({type:Ft.ButtonType.Primary,size:Ft.ButtonSize.Small}).withConfig({displayName:"header__CTAButton",componentId:"sc-1wko3r4-1"})(["padding:10px 16px;"]);function Ts(e){const t=(0,l.c)(14),{templateTitle:a,templateId:o,templateActions:s,canCreateStory:i}=e;let c;t[0]!==s?(c=s||{},t[0]=s,t[1]=c):c=t[1];const{createStoryFromTemplate:d,handleDetailsToggle:u}=c;let m,p,f,b,h;return t[2]===Symbol.for("react.memo_cache_sentinel")?(m=(0,r.__)("Close","web-stories"),t[2]=m):m=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(p=n.createElement(Es,null),t[3]=p):p=t[3],t[4]!==u?(f=n.createElement(zt.Button,{type:Ft.ButtonType.Tertiary,variant:Ft.ButtonVariant.Square,size:Ft.ButtonSize.Small,"aria-label":m,onClick:u},p),t[4]=u,t[5]=f):f=t[5],t[6]!==i||t[7]!==d||t[8]!==o||t[9]!==a?(b=i&&n.createElement(vs,{onClick:()=>d(o),"aria-label":(0,Z.default)((0,r.__)("Use %s template to create new story","web-stories"),a)},(0,r.__)("Use template","web-stories")),t[6]=i,t[7]=d,t[8]=o,t[9]=a,t[10]=b):b=t[10],t[11]!==f||t[12]!==b?(h=n.createElement(ws,null,f,b),t[11]=f,t[12]=b,t[13]=h):h=t[13],h}Ts.propTypes={canCreateStory:g().bool,templateActions:Qt,templateId:g().number,templateTitle:g().string};const Cs=Ts;var ks,Is=a(7478),Ls=a(86107);function As(){return As=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},As.apply(null,arguments)}const SvgArrowRightLarge=({title:e,titleId:t,...a})=>n.createElement("svg",As({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32","aria-labelledby":t},a),e?n.createElement("title",{id:t},e):null,ks||(ks=n.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M16.355 6.146a.5.5 0 1 0-.707.708l8.647 8.647H6.5a.5.5 0 1 0 0 1h17.795l-8.647 8.648a.5.5 0 0 0 .707.707l9.49-9.49a.5.5 0 0 0 0-.73z",clipRule:"evenodd"}))),xs=(0,n.memo)(SvgArrowRightLarge),Os=f.default.section.withConfig({displayName:"templateDetails__Panel",componentId:"sc-1cvs5jb-0"})(["padding:16vh 0 14vh 0;"]),Ds=f.default.div.withConfig({displayName:"templateDetails__Container",componentId:"sc-1cvs5jb-1"})(["position:relative;width:76%;max-width:","px;margin:0 auto;"],1459.2),Ns=f.default.div.withConfig({displayName:"templateDetails__Inner",componentId:"sc-1cvs5jb-2"})(["display:flex;align-items:start;"]),Ps=f.default.section.attrs({"aria-label":(0,r.__)("Template Details","web-stories")}).withConfig({displayName:"templateDetails__DetailContainer",componentId:"sc-1cvs5jb-3"})(["padding:0 0 0 60px;margin-right:auto;"]),Rs=f.default.div.withConfig({displayName:"templateDetails__TemplateDetails",componentId:"sc-1cvs5jb-4"})(["position:relative;display:flex;width:500px;"]),Ms=(f.default.section.attrs({"aria-label":(0,r.__)("Related Templates","web-stories")}).withConfig({displayName:"templateDetails__RowContainer",componentId:"sc-1cvs5jb-5"})(["display:flex;flex-wrap:wrap;padding-bottom:40px;margin:0 80px 0;& > h3{padding-bottom:32px;}& > div{width:100%;}"]),(0,f.default)(Os).withConfig({displayName:"content__StyledPanel",componentId:"sc-jxjpbh-0"})(["padding:0 0 48px 0;"])),Bs=(0,f.default)(Na.Text.Paragraph).withConfig({displayName:"content__ByLineText",componentId:"sc-jxjpbh-1"})(["color:",";margin:8px 0 24px;"],(({theme:e})=>e.colors.fg.tertiary)),zs=(0,f.default)(Na.Text.Paragraph).withConfig({displayName:"content__DescriptionText",componentId:"sc-jxjpbh-2"})(["margin-bottom:24px;"]),Fs=f.default.div.withConfig({displayName:"content__PaginationContainer",componentId:"sc-jxjpbh-3"})(["position:absolute;top:","px;",""],235,(({alignLeft:e})=>e?"\n          left: 0;\n          transform: translate(-187.5%, -50%);\n        ":"\n          right: 0;\n          transform: translate(187.5%, -50%);\n        ")),Us=(0,f.default)(Is.default).attrs({forwardedAs:"li"}).withConfig({displayName:"content__TemplateTag",componentId:"sc-jxjpbh-4"})(["margin-right:12px;margin-bottom:12px;> span{color:"," !important;}"],(({theme:e})=>e.colors.fg.primary)),Gs=f.default.div.withConfig({displayName:"content__MetadataContainer",componentId:"sc-jxjpbh-5"})(["margin-bottom:24px;display:flex;flex-wrap:wrap;align-items:center;"]);function DetailsContent(e){const t=(0,l.c)(56),{activeTemplateIndex:a,isRTL:o,filteredTemplatesLength:s,switchToTemplateByOffset:i,template:c}=e;let d;t[0]!==c?(d=c||{},t[0]=c,t[1]=d):d=t[1];const{postersByPage:u,title:m,description:p,tags:f,colors:b}=d;let h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=[],t[2]=h):h=t[2];const[g,_]=(0,y.useState)(h);let S,E,w,v;t[3]!==u||t[4]!==_?(S=()=>{u&&_(Object.values(u).map(js))},t[3]=u,t[4]=_,t[5]=S):S=t[5],t[6]!==u?(E=[u],t[6]=u,t[7]=E):E=t[7],(0,y.useEffect)(S,E),t[8]!==a||t[9]!==s||t[10]!==o||t[11]!==_||t[12]!==i?(w=()=>{const e=o?a-1:a+1,t=o?a+1:a-1,l=o?!s||a===s-1:!s||0===a,c=o?!s||0===a:!s||a===s-1,d=n.createElement(zt.Button,{type:Ft.ButtonType.Tertiary,size:Ft.ButtonSize.Small,variant:Ft.ButtonVariant.Square,"aria-label":(0,r.__)("View previous template","web-stories"),onClick:()=>{i(t),_([])},disabled:l},n.createElement(Ls.default,{height:32,width:32})),u=n.createElement(zt.Button,{type:Ft.ButtonType.Tertiary,size:Ft.ButtonSize.Small,variant:Ft.ButtonVariant.Square,"aria-label":(0,r.__)("View next template","web-stories"),onClick:()=>{i(e),_([])},disabled:c},n.createElement(xs,{height:32,width:32}));return o?{NextButton:d,PrevButton:u}:{NextButton:u,PrevButton:d}},t[8]=a,t[9]=s,t[10]=o,t[11]=_,t[12]=i,t[13]=w):w=t[13],t[14]!==a||t[15]!==s||t[16]!==o||t[17]!==i?(v=[s,a,o,i],t[14]=a,t[15]=s,t[16]=o,t[17]=i,t[18]=v):v=t[18];const{NextButton:T,PrevButton:C}=(0,y.useMemo)(w,v);let k;t[19]!==c?(k=c?(0,Z.default)((0,r.__)("By %s","web-stories"),c.createdBy):null,t[19]=c,t[20]=k):k=t[20];const I=k;let L,A,x,O,D,N,P,R,M,B,z,F,U,G,H;return t[21]!==C?(L=n.createElement(Fs,{alignLeft:!0},C),t[21]=C,t[22]=L):L=t[22],t[23]===Symbol.for("react.memo_cache_sentinel")?(A=(0,r.__)("Template details by page","web-stories"),t[23]=A):A=t[23],t[24]!==g||t[25]!==o?(x=n.createElement(Wt,{galleryPosters:g,isRTL:o,galleryLabel:A}),t[24]=g,t[25]=o,t[26]=x):x=t[26],t[27]!==m?(O=n.createElement(pr,{size:io.TextSize.Small,as:"h3","data-testid":"template-details-title"},m),t[27]=m,t[28]=O):O=t[28],t[29]!==I?(D=n.createElement(Bs,{size:io.TextSize.Medium},I),t[29]=I,t[30]=D):D=t[30],t[31]!==p?(N=n.createElement(zs,{size:io.TextSize.Medium},p),t[31]=p,t[32]=N):N=t[32],t[33]===Symbol.for("react.memo_cache_sentinel")?(P=(0,r.__)("Template tags","web-stories"),t[33]=P):P=t[33],t[34]!==f?(R=f.map(Hs),t[34]=f,t[35]=R):R=t[35],t[36]!==R?(M=n.createElement(Gs,{role:"list","aria-label":P},R),t[36]=R,t[37]=M):M=t[37],t[38]===Symbol.for("react.memo_cache_sentinel")?(B=(0,r.__)("Template colors","web-stories"),t[38]=B):B=t[38],t[39]!==b?(z=n.createElement(Gs,null,n.createElement(Ia,{colors:b,size:32,"aria-label":B})),t[39]=b,t[40]=z):z=t[40],t[41]!==O||t[42]!==D||t[43]!==N||t[44]!==M||t[45]!==z?(F=n.createElement(Rs,null,n.createElement(Ps,null,O,D,N,M,z)),t[41]=O,t[42]=D,t[43]=N,t[44]=M,t[45]=z,t[46]=F):F=t[46],t[47]!==x||t[48]!==F?(U=n.createElement(Ns,null,x,F),t[47]=x,t[48]=F,t[49]=U):U=t[49],t[50]!==T?(G=n.createElement(Fs,null,T),t[50]=T,t[51]=G):G=t[51],t[52]!==U||t[53]!==G||t[54]!==L?(H=n.createElement(Ms,null,n.createElement(Ds,null,L,U,G)),t[52]=U,t[53]=G,t[54]=L,t[55]=H):H=t[55],H}function Hs(e){return n.createElement(Us,{key:e,disabled:!0},e)}function js(e,t){return{id:t,...e}}DetailsContent.propTypes={activeTemplateIndex:g().number,isRTL:g().bool,filteredTemplatesLength:g().number,switchToTemplateByOffset:g().func,template:Yt};const qs=DetailsContent;function TemplateDetailsModal(e){const t=(0,l.c)(23),{activeTemplateIndex:a,activeTemplate:o,filteredTemplatesLength:s,isDetailsViewOpen:c,templateActions:d}=e,{isRTL:u,apiCallbacks:m}=w(),p=Boolean(m?.createStoryFromTemplate);let f;t[0]!==d?(f=d||{},t[0]=d,t[1]=f):f=t[1];const{handleDetailsToggle:b,switchToTemplateByOffset:h}=f;let g,_,y;t[2]!==o?.title?(g=(0,Z.default)((0,r.__)("Template Details for %s","web-stories"),o?.title),t[2]=o?.title,t[3]=g):g=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(_={backgroundColor:`${i.theme.colors.opacity.overlayDark}`},y={display:"block",height:"90vh",width:"90vw",backgroundColor:`${i.theme.colors.standard.white}`},t[4]=_,t[5]=y):(_=t[4],y=t[5]);const S=o?.title,E=o?.id;let v,T,C;return t[6]!==p||t[7]!==S||t[8]!==E||t[9]!==d?(v=n.createElement(Cs,{templateTitle:S,templateId:E,templateActions:d,canCreateStory:p}),t[6]=p,t[7]=S,t[8]=E,t[9]=d,t[10]=v):v=t[10],t[11]!==o||t[12]!==a||t[13]!==s||t[14]!==u||t[15]!==h?(T=n.createElement(qs,{activeTemplateIndex:a,isRTL:u,filteredTemplatesLength:s,switchToTemplateByOffset:h,template:o}),t[11]=o,t[12]=a,t[13]=s,t[14]=u,t[15]=h,t[16]=T):T=t[16],t[17]!==b||t[18]!==c||t[19]!==g||t[20]!==v||t[21]!==T?(C=n.createElement(ys.default,{isOpen:c,onClose:b,contentLabel:g,overlayStyles:_,contentStyles:y},v,T),t[17]=b,t[18]=c,t[19]=g,t[20]=v,t[21]=T,t[22]=C):C=t[22],C}TemplateDetailsModal.propTypes={activeTemplateIndex:g().number,activeTemplate:Yt,filteredTemplatesLength:g().number,isDetailsViewOpen:g().bool,templateActions:Qt};const Vs=TemplateDetailsModal;function ExploreTemplatesView(){const e=(0,vr.default)(),[t,a]=(0,y.useState)(!1),[o,s]=(0,y.useState)(null),[i,c]=(0,y.useState)(0),{templateIdParam:d,replace:u}=fo((({actions:e,state:t})=>({templateIdParam:t.queryParams.id,replace:e.replace}))),m=(0,y.useRef)(d),{allPagesFetched:p,isLoading:f,templates:b,templatesOrderById:h,totalPages:g,totalTemplates:_,createStoryFromTemplate:S,fetchExternalTemplates:E}=Fn((({state:{templates:{allPagesFetched:e,isLoading:t,templates:a,templatesOrderById:o,totalPages:n,totalTemplates:r}},actions:{storyApi:{createStoryFromTemplate:l},templateApi:{fetchExternalTemplates:s}}})=>({allPagesFetched:e,isLoading:t,templates:a,templatesOrderById:o,totalPages:n,totalTemplates:r,createStoryFromTemplate:l,fetchExternalTemplates:s}))),{filters:w,sortObject:T,filtersObject:C}=os((({state:{filters:e,sortObject:t,filtersObject:a}})=>({filters:e,sortObject:t,filtersObject:a}))),{page:k,view:I}=function(e){const t=(0,l.c)(38),{totalPages:a,sortObject:o,filtersObject:n}=e,r=void 0===o?Ue.sort:o,s=void 0===n?Ue.filters:n,[i,c]=(0,y.useState)(r),[d,u]=(0,y.useState)(s),[m,p]=(0,y.useState)(1);let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f={isGrid:!0},t[0]=f):f=t[0];const{pageSize:b}=Tn(f);let h,g;t[1]!==p||t[2]!==a?(h=e=>{p(Cn(e,{MIN:1,MAX:a}))},t[1]=p,t[2]=a,t[3]=h):h=t[3],t[4]!==a?(g=[a],t[4]=a,t[5]=g):g=t[5];const _=(0,y.useCallback)(h,g);let S,E;t[6]!==m||t[7]!==_?(S=()=>_(m+1),E=[m,_],t[6]=m,t[7]=_,t[8]=S,t[9]=E):(S=t[8],E=t[9]);const w=(0,y.useCallback)(S,E);let v,T;t[10]!==c||t[11]!==_?(v=e=>{c(e),_(1)},t[10]=c,t[11]=_,t[12]=v):v=t[12],t[13]!==_?(T=[_],t[13]=_,t[14]=T):T=t[14];const C=(0,y.useCallback)(v,T);let k,I;t[15]!==u||t[16]!==_?(k=e=>{u(e),_(1)},t[15]=u,t[16]=_,t[17]=k):k=t[17],t[18]!==_?(I=[_],t[18]=_,t[19]=I):I=t[19];const L=(0,y.useCallback)(k,I);let A,x;return t[20]!==d||t[21]!==m||t[22]!==b||t[23]!==w||t[24]!==L||t[25]!==p||t[26]!==C||t[27]!==i.order||t[28]!==i.orderby?(A=()=>({view:{style:nt.GRID,pageSize:b},sort:{value:i.orderby,direction:i.order,set:C},filters:{value:d,set:L},page:{value:m,set:p,requestNextPage:w}}),t[20]=d,t[21]=m,t[22]=b,t[23]=w,t[24]=L,t[25]=p,t[26]=C,t[27]=i.order,t[28]=i.orderby,t[29]=A):A=t[29],t[30]!==d||t[31]!==m||t[32]!==b||t[33]!==w||t[34]!==L||t[35]!==C||t[36]!==i?(x=[b,i,C,m,w,d,L],t[30]=d,t[31]=m,t[32]=b,t[33]=w,t[34]=L,t[35]=C,t[36]=i,t[37]=x):x=t[37],(0,y.useMemo)(A,x)}({filtersObject:C,sortObject:T,totalPages:g}),[L]=(0,y.useMemo)((()=>{const e=w.find((({key:e})=>"search"===e));return[e?.filterId]}),[w]),A=(0,y.useMemo)((()=>Hl(b)),[b]),x=(0,y.useMemo)((()=>L?A.filter((e=>e.label.toLowerCase().includes(L.toLowerCase()))):A),[A,L]),O=(0,y.useMemo)((()=>h.map((e=>b[e])).filter(jl(x))),[h,b,x]),D=(0,y.useMemo)((()=>_!==O.length?O.length:_),[O,_]),N=(0,y.useMemo)((()=>(0,Bl.default)(x,"label")),[x]),P=(0,y.useCallback)((e=>{const t=b[e];(0,v.trackEvent)("use_template",{name:t.title,template_id:t.id}),S(t)}),[S,b]),R=(0,y.useCallback)((e=>{const t=O.find((t=>t.id===e));s(t),c(O.findIndex((t=>t.id===e))),m.current&&(m.current=void 0),u(`?id=${t.id}&isLocal=${t.isLocal}`)}),[u,O]),M=(0,y.useCallback)(((t,o)=>{a((a=>{const n=!a;return o&&(0,v.trackScreenView)(o),n&&t&&R(t),n||(u(""),e((0,r.__)("Exit detail templates view","web-stories"))),n}))}),[u,e,R]),B=(0,y.useCallback)((t=>{const a=O[t];s(a),c(t),u(`?id=${a.id}&isLocal=${a.isLocal}`),e((0,Z.default)(/* translators: %s: template title */ /* translators: %s: template title */
(0,r.__)("Viewing %s","web-stories"),a.title))}),[O,u,e]),z=(0,y.useMemo)((()=>({createStoryFromTemplate:P,handleDetailsToggle:M,switchToTemplateByOffset:B})),[P,M,B]);return(0,y.useEffect)((()=>{E()}),[E]),(0,y.useEffect)((()=>{if(m.current&&O.length){if(!O.some((e=>e.id===Number.parseInt(m.current))))return void u("");a(!0),R(Number.parseInt(m.current))}}),[O,u,R]),n.createElement(Ya.Provider,null,n.createElement(gs,{isLoading:f&&!_,totalTemplates:D,searchOptions:N,view:I}),n.createElement(ms,{isLoading:f,allPagesFetched:p,page:k,templates:O,totalTemplates:D,search:L,view:I,templateActions:z}),n.createElement(Ya.Fixed,null,n.createElement(Go,null)),n.createElement(Vs,{activeTemplate:o,activeTemplateIndex:i,isDetailsViewOpen:t,templateActions:z,filteredTemplatesLength:O.length}))}function ExploreTemplates(){const e=(0,l.c)(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=n.createElement(TemplateFiltersProvider,null,n.createElement(ExploreTemplatesView,null)),e[0]=t):t=e[0],t}function Ws(e){const{state:t}=e,{stories:a,templates:o}=t,{error:n}=a,{error:r}=o;return{storyError:n,templateError:r}}const $s=function(){const e=(0,l.c)(10),{storyError:t,templateError:a}=Fn(Ws),{showSnackbar:o}=(0,Br.useSnackbar)();let n;e[0]!==o?(n=e=>o({message:e,dismissible:!0}),e[0]=o,e[1]=n):n=e[1];const r=(0,y.useDebouncedCallback)(n,200);let s,i,c,d;e[2]!==r||e[3]!==t?(s=()=>{t?.id&&r(t.message)},i=[t,r],e[2]=r,e[3]=t,e[4]=s,e[5]=i):(s=e[4],i=e[5]),(0,y.useEffect)(s,i),e[6]!==r||e[7]!==a?(c=()=>{a?.id&&r(a.message)},d=[a,r],e[6]=r,e[7]=a,e[8]=c,e[9]=d):(c=e[8],d=e[9]),(0,y.useEffect)(c,d)};function Ks(){return Ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Ks.apply(null,arguments)}const Xs=({additionalRoutes:e})=>{const{currentPath:t,templateId:a,availableRoutes:o}=fo((({state:e})=>({...e,templateId:e.queryParams.id}))),{push:l,setAvailableRoutes:s}=fo((({actions:e})=>e)),{canViewDefaultTemplates:i,leftRailSecondaryNavigation:c=[],documentTitleSuffix:d=(0,r.__)("Web Stories","web-stories")}=w(),{addInitialFetchListener:u}=Fn((({actions:{storyApi:{addInitialFetchListener:e}},state:{templates:{templates:t}}})=>({currentTemplate:void 0!==a?t[a]?.title:void 0,addInitialFetchListener:e}))),m=(0,y.useRef)(t===tt.DASHBOARD),[p,f]=(0,y.useState)(!m.current);(0,y.useEffect)((()=>u?.((e=>{e?.all<=0&&m.current&&i&&(l(tt.TEMPLATES_GALLERY),m.current=!1),f(!0)}))),[u,l,t,i]),(0,y.useEffect)((()=>{if(o.length>0)return;const t=e?e.map((({path:e})=>e)):[];s([...Object.values(tt),...t])}),[e,o.length,s]),(0,y.useEffect)((()=>{if(!p)return;const e=c.find((e=>e.value===t)),a=at[t]||e?.label||at.DEFAULT;document.title=(0,Z.default)(/* translators: Admin screen title. 1: Admin screen name, 2: Network or site name. */ /* translators: Admin screen title. 1: Admin screen name, 2: Network or site name. */
(0,r.__)("%1$s ‹ %2$s","web-stories"),a,d),(0,v.trackScreenView)(a)}),[t,p,c,d]),$s();const{clearSnackbar:b,removeSnack:h,placement:g,currentSnacks:_}=(0,Br.useSnackbar)(),S=(0,y.usePrevious)(t);return(0,y.useEffect)((()=>{t!==S&&b()}),[b,t,S]),n.createElement(n.Fragment,null,n.createElement(Za,null,n.createElement(Po,null),n.createElement(Qa,null,o.length>0&&n.createElement(n.Fragment,null,n.createElement(go,{exact:!0,isDefault:!0,path:tt.DASHBOARD,component:n.createElement(MyStories,null)}),i&&n.createElement(go,{path:tt.TEMPLATES_GALLERY,component:n.createElement(ExploreTemplates,null)}),e&&e.map((e=>n.createElement(go,Ks({key:e.path},e))))))),n.createElement(zr.default,{notifications:_,onRemove:h,placement:g,max:1}))};var Ys=a(90990),Js=a(66269);window.wp.domReady;a(58335);var Zs=a(74807),Qs=a(29558);const ei=window.wp.apiFetch,ti=["id","title","status","date","date_gmt","modified","modified_gmt","story_poster","link","preview_link","edit_link","_links","_embedded","body","status","headers"].join(","),ai=["id","title"],oi=["title","link"],ni="wp:lock,author",ri={EDIT:"wp:action-edit",DELETE:"wp:action-delete"};function li(e){const{id:t,title:a,status:o,date:n,date_gmt:r,modified:l,modified_gmt:s,link:i,preview_link:c,edit_link:d,story_poster:u,_embedded:{author:m,"wp:lock":p}={},_links:f={}}=e;if(!t)return null;const{locked:b=!1,user:h={id:0,name:""}}=p?.[0]||{},g=m?.[0]||{id:0,name:""},_={hasEditAction:Object.prototype.hasOwnProperty.call(f,ri.EDIT),hasDeleteAction:Object.prototype.hasOwnProperty.call(f,ri.DELETE)};return{id:t,status:o,title:a.raw,created:n,createdGmt:`${r}Z`,modified:l,modifiedGmt:`${s}Z`,author:{id:g.id,name:g.name},locked:b,lockUser:{...h,avatar:h?.avatar?.[96]||null},bottomTargetAction:d,featuredMediaUrl:u?.url,editStoryLink:d,previewLink:c,link:i,capabilities:_}}function si(e,t){const{page:a=1,perPage:o=ct,filters:n={},sort:r={}}=t,l={...{_embed:ni,context:"edit",_web_stories_envelope:!0,_fields:ti,...he.filters,...he.sort},page:a,per_page:o,...n,...r};return ei({path:(0,Zs.default)(e.api.stories,l)}).then((({body:e,headers:t})=>{const a=t&&Number.parseInt(t["X-WP-TotalPages"]),o=t&&JSON.parse(t["X-WP-TotalByStatus"]),n=[];return{stories:e.reduce(((e,t)=>t?(n.push(t.id),e[t.id]=li(t),e):e),{}),fetchedStoryIds:n,totalPages:a,totalStoriesByStatus:o}}))}function ii(e,t){const a=(0,Zs.default)(`${e.api.stories}${t}`,{_method:"DELETE"});return ei({path:a,method:"POST"})}function ci(e,t){const a=(0,Zs.default)(`${e.api.stories}${t.id}/`,{_embed:ni}),o={id:t.id,author:t.author.id,title:t.title?.raw||t.title};return ei({path:a,data:o,method:"POST"}).then(li)}const di=(e,t)=>{const a=(0,Zs.default)(e.api.stories,{_fields:"edit_link"}),{pages:o,version:n,colors:r}=t,l={featuredMedia:{id:0,url:""},publisherLogo:{url:""},title:""},s={pages:o,featuredMedia:l.featuredMedia,title:l.title,status:"auto-draft",meta:{web_stories_publisher_logo:l.publisherLogo.id}},i=r.map((({color:e})=>(0,Ta.default)(e))),{globalPageDuration:c=7,globalAutoAdvance:d=!0}=e;return ei({path:a,data:{...s,story_data:{pages:o,version:n,autoAdvance:d,defaultPageDuration:c,currentStoryStyles:{colors:i}}},method:"POST"}).then(Qs.snakeToCamelCaseObjectKeys)};function ui(e,t){const a=(0,Zs.default)(e.api.stories,{_embed:ni,_fields:ti});return ei({path:a,data:{original_id:t.id,status:"draft"},method:"POST"}).then(li)}function mi(e,t){return ei({path:(0,Zs.default)(e.api.users,{per_page:"100",capabilities:e.editPostsCapabilityName,search:t})})}async function pi(e,t={}){const a=await ei({path:(0,Zs.default)(e.api.taxonomies,{type:"web-story",context:"edit",...t})});return Object.values(a).map((e=>(e.restPath=e._links?.["wp:items"]?.[0]?.href,delete e._links,(0,Qs.snakeToCamelCaseObjectKeys)(e,["capabilities","visibility"]))))}function fi(e,t,a={}){return ei({url:(0,Zs.default)(t,a)})}function bi(e,t){return ei({path:(0,Zs.default)(e.api.products,{per_page:1,search:t})})}var hi=a(1660),gi=a(75908);const _i={SETTINGS:{UPDATED:(0,r.__)("Setting saved.","web-stories")}},yi={UPLOAD_PUBLISHER_LOGO:{MESSAGE:(0,r.__)("Unable to add publisher logo","web-stories"),MESSAGE_PLURAL:(0,r.__)("Unable to add publisher logos","web-stories")},REMOVE_PUBLISHER_LOGO:{MESSAGE:(0,r.__)("Unable to remove publisher logo","web-stories")},REMOVE_FONT:{MESSAGE:(0,r.__)("Unable to remove font","web-stories")},UPDATE_PUBLISHER_LOGO:{MESSAGE:(0,r.__)("Unable to update publisher logo","web-stories")},LOAD_PUBLISHER_LOGOS:{MESSAGE:(0,r.__)("Unable to load publisher logos","web-stories")},LOAD_SETTINGS:{MESSAGE:(0,r.__)("Unable to load settings","web-stories")},UPDATE_EDITOR_SETTINGS:{MESSAGE:(0,r.__)("Unable to update settings data","web-stories")}},Si="/editor-settings",Ei=[{value:Si,label:(0,r.__)("Settings","web-stories")},{value:(0,r.__)("https://wordpress.org/support/plugin/web-stories/","web-stories"),label:(0,r.__)("Support","web-stories"),isExternal:!0,trackingEvent:"click_support_page"}],wi={NONE:"none",ADSENSE:"adsense",ADMANAGER:"admanager",MGID:"mgid"},vi="default",Ti="disabled",Ci="custom",ki={NONE:"none",WOOCOMMERCE:"woocommerce",SHOPIFY:"shopify"},Ii="site-kit",Li="web-stories",Ai="both",xi=(0,f.createGlobalStyle)(["body.web-story_page_stories-dashboard #wpbody{",";}.","{top:","px !important;left:","px !important;}body.folded .","{left:","px !important;}body.","{#adminmenuwrap,#adminmenuback{z-index:15;}}"],hi.scrollbarCSS,gi.OVERLAY_CLASS,32,160,gi.OVERLAY_CLASS,36,gi.BODY_CLASS);function Oi(){document.querySelectorAll('#menu-posts-web-story ul.wp-submenu li a[href$="page=stories-dashboard"]')?.forEach(Di)}function Di(e){e.setAttribute("href",e.getAttribute("href")+"#/")}function Ni(e){const{state:t}=e,{currentPath:a}=t;return{currentPath:a}}const Pi=function(){const e=(0,l.c)(4),{currentPath:t}=fo(Ni);let a,o,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0],(0,y.useEffect)(Oi,a),e[1]!==t?(o=()=>{document.querySelectorAll("#menu-posts-web-story ul.wp-submenu li")?.forEach((e=>{e.classList.remove("current"),e.querySelector("a")?.classList.remove("current"),e.querySelector("a")?.removeAttribute("aria-current"),e.querySelector(`a[href$="#${t}"]`)&&(e.classList.add("current"),e.querySelector("a")?.classList.add("current"),e.querySelector("a")?.setAttribute("aria-current","page"))}))},n=[t],e[1]=t,e[2]=o,e[3]=n):(o=e[2],n=e[3]),(0,y.useEffect)(o,n)},Ri=(0,y.createContext)({state:{},actions:{}});const Mi=function(e){return(0,y.useContextSelector)(Ri,e??y.identity)};function Bi(e){const{state:t,actions:a}=e,{currentUser:o}=t,{usersApi:n}=a,{toggleWebStoriesMediaOptimization:r}=n;return{currentUser:o,toggleWebStoriesMediaOptimization:r}}const zi={getItemByKey:function(e){let t=null;try{const a=localStorage.getItem(e);t=null!==a?JSON.parse(a):a}catch(e){e instanceof Error&&(0,v.trackError)("local_storage_read",e.message)}return t},setItemByKey:function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){e instanceof Error&&(0,v.trackError)("local_storage_write",e.message)}}},Fi="web_stories_tracking_optin_banner_closed";function Ui(){const e=localStorage.getItem(Fi);return Boolean(JSON.parse(e))}function Gi(){const e=(0,l.c)(19),{showSnackbar:t}=(0,Br.useSnackbar)(),[a,o]=(0,y.useState)(Ui),[n,r]=(0,y.useState)(!1),{currentUser:s,toggleWebStoriesTrackingOptIn:i}=Mi(ji),{currentPath:c}=fo(Hi),d=void 0!==s.data.meta?.webStoriesTrackingOptin,u=Boolean(s.data.meta?.webStoriesTrackingOptin);let m,p,f,b;e[0]!==u?(m=()=>{u?(0,v.enableTracking)():(0,v.disableTracking)()},p=[u],e[0]=u,e[1]=m,e[2]=p):(m=e[1],p=e[2]),(0,y.useEffect)(m,p),e[3]!==r||e[4]!==t||e[5]!==i?(f=()=>{i(),zi.setItemByKey(Fi,!0),r(!0),t({"aria-label":_i.SETTINGS.UPDATED,message:_i.SETTINGS.UPDATED,dismissible:!0})},e[3]=r,e[4]=t,e[5]=i,e[6]=f):f=e[6],e[7]!==t||e[8]!==i?(b=[t,i],e[7]=t,e[8]=i,e[9]=b):b=e[9];const h=(0,y.useCallback)(f,b);let g,_;e[10]!==o?(g=()=>{o(!0),zi.setItemByKey(Fi,!0)},e[10]=o,e[11]=g):g=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(_=[],e[12]=_):_=e[12];const S=(0,y.useCallback)(g,_);let E,w=!0;return(a||c===Si||!d||!n&&u)&&(w=!1),e[13]!==h||e[14]!==w||e[15]!==S||e[16]!==s.isUpdating||e[17]!==u?(E={bannerVisible:w,optedIn:u,disabled:s.isUpdating,closeBanner:S,toggleWebStoriesTrackingOptIn:h},e[13]=h,e[14]=w,e[15]=S,e[16]=s.isUpdating,e[17]=u,e[18]=E):E=e[18],E}function Hi(e){const{state:t}=e,{currentPath:a}=t;return{currentPath:a}}function ji(e){const{state:t,actions:a}=e,{currentUser:o}=t,{usersApi:n}=a,{toggleWebStoriesTrackingOptIn:r}=n;return{currentUser:o,toggleWebStoriesTrackingOptIn:r}}var qi=a(55422);function Vi(e){const{state:t}=e,{settings:a,media:o,publisherLogos:n}=t,{error:r,settingSaved:l}=a,{error:s}=o,{error:i,settingSaved:c}=n;return{settingsError:r,mediaError:s,settingSaved:l||c,publisherLogosError:i}}const Wi=function(){const e=(0,l.c)(18),{settingsError:t,mediaError:a,settingSaved:o,publisherLogosError:n}=Mi(Vi),{showSnackbar:r}=(0,Br.useSnackbar)();let s;e[0]!==r?(s=e=>r({"aria-label":e,message:e,dismissible:!0}),e[0]=r,e[1]=s):s=e[1];const i=(0,y.useDebouncedCallback)(s,200);let c,d,u,m,p,f,b,h;e[2]!==i||e[3]!==t?(c=()=>{t?.id&&i(t.message)},d=[t,i],e[2]=i,e[3]=t,e[4]=c,e[5]=d):(c=e[4],d=e[5]),(0,y.useEffect)(c,d),e[6]!==i||e[7]!==o?(u=()=>{o&&i(_i.SETTINGS.UPDATED)},m=[i,o],e[6]=i,e[7]=o,e[8]=u,e[9]=m):(u=e[8],m=e[9]),(0,y.useEffect)(u,m),e[10]!==i||e[11]!==a?(p=()=>{a?.id&&i(a.message)},f=[a,i],e[10]=i,e[11]=a,e[12]=p,e[13]=f):(p=e[12],f=e[13]),(0,y.useEffect)(p,f),e[14]!==i||e[15]!==n?(b=()=>{n?.id&&i(n.message)},h=[n,i],e[14]=i,e[15]=n,e[16]=b,e[17]=h):(b=e[16],h=e[17]),(0,y.useEffect)(b,h)},$i=f.default.div.withConfig({displayName:"editorSettings__Wrapper",componentId:"sc-1y9ilpk-0"})([""]),Ki=(0,f.default)(La).withConfig({displayName:"editorSettings__Main",componentId:"sc-1y9ilpk-1"})(["display:flex;flex-direction:column;padding-top:36px;margin-top:20px;margin-bottom:56px;max-width:945px;"]),Xi=f.default.form.withConfig({displayName:"editorSettings__SettingForm",componentId:"sc-1y9ilpk-2"})(["display:grid;grid-template-columns:27% minmax(400px,1fr);column-gap:6.56%;padding-bottom:52px;@media ","{grid-template-columns:100%;row-gap:20px;}"],(({theme:e})=>e.breakpoint.mobile)),Yi=(0,f.default)(So.Headline).attrs({as:"h3"}).withConfig({displayName:"editorSettings__SettingHeading",componentId:"sc-1y9ilpk-3"})(["",";margin:8px 0;"],(({theme:e})=>Ho.expandPresetStyles({preset:{...e.typography.presets.label[io.TextSize.Large]},theme:e}))),Ji=(0,f.default)(ca.Link).withConfig({displayName:"editorSettings__InlineLink",componentId:"sc-1y9ilpk-4"})(["display:inline-block;"]),Zi=(0,f.default)(Na.Text.Paragraph).withConfig({displayName:"editorSettings__HelperText",componentId:"sc-1y9ilpk-5"})(["color:",";"],(({theme:e})=>e.colors.fg.tertiary)),Qi=(0,f.default)(Na.Text.Paragraph).withConfig({displayName:"editorSettings__ConnectionHelperText",componentId:"sc-1y9ilpk-6"})(["padding-top:12px;color:",";"],(({hasError:e,theme:t})=>e?t.colors.fg.negative:t.colors.fg.tertiary)),ec=(0,f.default)(Na.Text.Paragraph).withConfig({displayName:"editorSettings__CenterMutedText",componentId:"sc-1y9ilpk-7"})(["color:",";text-align:center;"],(({theme:e})=>e.colors.fg.tertiary)),tc=(0,f.default)(Zi).withConfig({displayName:"editorSettings__SettingSubheading",componentId:"sc-1y9ilpk-8"})(["padding:8px 0;"]),ac=(0,f.default)(Zi).withConfig({displayName:"editorSettings__TextInputHelperText",componentId:"sc-1y9ilpk-9"})(["padding-top:12px;"]),oc=(0,f.default)(Na.Text.Label).withConfig({displayName:"editorSettings__CheckboxLabel",componentId:"sc-1y9ilpk-10"})(["display:flex;justify-content:flex-start;margin-top:8px;cursor:pointer;"]),nc=(0,f.default)(Zi).withConfig({displayName:"editorSettings__CheckboxLabelText",componentId:"sc-1y9ilpk-11"})(["margin-left:8px;"]),rc=(0,f.default)(ec).withConfig({displayName:"editorSettings__Error",componentId:"sc-1y9ilpk-12"})(["padding-bottom:10px;color:",";"],(({theme:e})=>e.colors.fg.negative)),lc=f.default.div.withConfig({displayName:"editorSettings__UploadedContainer",componentId:"sc-1y9ilpk-13"})(["display:grid;grid-template-columns:repeat(auto-fill,102px);grid-auto-rows:102px;grid-column-gap:12px;grid-row-gap:20px;padding-bottom:20px;margin-bottom:4px;border:1px solid transparent;",";"],$t.focusableOutlineCSS),sc=f.default.div.withConfig({displayName:"editorSettings__GridItemContainer",componentId:"sc-1y9ilpk-14"})(["position:relative;",";&:hover,&:focus-within{button{opacity:1 !important;}}"],(({active:e,theme:t})=>e&&(0,f.css)(["border:1px solid ",";border-radius:",";"],t.colors.border.defaultActive,t.borders.radius.small))),ic=f.default.button.withConfig({displayName:"editorSettings__GridItemButton",componentId:"sc-1y9ilpk-15"})(["display:block;background-color:transparent;border:2px solid transparent;width:100%;height:100%;border-radius:4px;padding:0;",";"],$t.focusableOutlineCSS),cc=f.default.img.withConfig({displayName:"editorSettings__Logo",componentId:"sc-1y9ilpk-16"})(["object-fit:cover;width:100%;height:100%;border-radius:4px;"]),dc=f.default.div.withConfig({displayName:"editorSettings__MenuContainer",componentId:"sc-1y9ilpk-17"})(["position:absolute;top:0;width:100%;height:100%;"]),uc=(0,f.default)(zt.Button).attrs({size:Ft.ButtonSize.Small,type:Ft.ButtonType.Secondary,variant:Ft.ButtonVariant.Circle}).withConfig({displayName:"editorSettings__LogoMenuButton",componentId:"sc-1y9ilpk-18"})(["opacity:",";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);"],(({isActive:e,menuOpen:t})=>t||e?1:0)),mc=(0,f.default)(zt.Button).withConfig({displayName:"editorSettings__SaveButton",componentId:"sc-1y9ilpk-19"})(["height:36px;"]),pc=(0,f.default)(zt.Button).withConfig({displayName:"editorSettings__TestConnectionButton",componentId:"sc-1y9ilpk-20"})(["height:36px;margin-top:12px;"]),fc=f.default.div.withConfig({displayName:"editorSettings__InlineForm",componentId:"sc-1y9ilpk-21"})(["display:flex;align-items:flex-start;"]),bc=f.default.label.withConfig({displayName:"editorSettings__VisuallyHiddenLabel",componentId:"sc-1y9ilpk-22"})(Da.visuallyHidden),hc=(0,f.default)(Ga.default).withConfig({displayName:"editorSettings__SettingsTextInput",componentId:"sc-1y9ilpk-23"})(["margin-right:8px;"]),gc=(f.default.span.withConfig({displayName:"editorSettings__VisuallyHiddenDescription",componentId:"sc-1y9ilpk-24"})(Da.visuallyHidden),(0,f.default)(Xi).withConfig({displayName:"editorSettings__MultilineForm",componentId:"sc-1y9ilpk-25"})(["margin-bottom:28px;","{margin-top:20px;}"],fc)),_c={SLOT_ID_LABEL:(0,r.__)("Monetization type","web-stories"),HELPER_MESSAGE_ADSENSE:(0,r.__)("Learn more about <a>how to monetize your Web Stories</a> using AdSense. Once configured, AdSense will determine where and how to insert ads into the story. Consult <help>AdSense Help</help> for any further assistance.","web-stories"),HELPER_MESSAGE_ADMANAGER:(0,r.__)("Learn how to <a>enable programmatic demand in Web Stories</a> through Ad Manager.","web-stories"),HELPER_MESSAGE_MGID:(0,r.__)("Learn how to start <a>monetizing Web Stories with MGID Native Solution</a>","web-stories"),HELPER_LINK_ADSENSE:(0,r.__)("https://support.google.com/adsense/answer/10175505","web-stories"),HELPER_LINK_ADSENSE_HELP:(0,r.__)("https://support.google.com/adsense/","web-stories"),HELPER_LINK_ADMANAGER:(0,r.__)("https://support.google.com/admanager/answer/9416436","web-stories"),HELPER_LINK_MGID:(0,r.__)("https://help.mgid.com/generate-revenue-with-amp-web-stories?utm_source=wp-plugin&utm_medium=web-stories-by-google","web-stories")},yc=[{label:(0,r._x)("None","ad network","web-stories"),value:wi.NONE},{label:(0,r.__)("Google AdSense","web-stories"),value:wi.ADSENSE},{label:(0,r.__)("Google Ad Manager","web-stories"),value:wi.ADMANAGER},{label:(0,r.__)("MGID","web-stories"),value:wi.MGID}];function AdNetworkSettings(e){const t=(0,l.c)(24),{adNetwork:a,handleUpdate:o}=e,[r,s]=(0,y.useState)(a);let i,c,d,u;t[0]!==a||t[1]!==s?(i=()=>s(a),t[0]=a,t[1]=s,t[2]=i):i=t[2],t[3]!==a?(c=[a],t[3]=a,t[4]=c):c=t[4],(0,y.useEffect)(i,c),t[5]!==r?(d=()=>wi.ADMANAGER===r?_c.HELPER_MESSAGE_ADMANAGER:wi.ADSENSE===r?_c.HELPER_MESSAGE_ADSENSE:wi.MGID===r?_c.HELPER_MESSAGE_MGID:null,u=[r],t[5]=r,t[6]=d,t[7]=u):(d=t[6],u=t[7]);const m=(0,y.useMemo)(d,u);let p,f;t[8]!==r?(p=()=>wi.ADMANAGER===r?_c.HELPER_LINK_ADMANAGER:wi.ADSENSE===r?_c.HELPER_LINK_ADSENSE:wi.MGID===r?_c.HELPER_LINK_MGID:null,f=[r],t[8]=r,t[9]=p,t[10]=f):(p=t[9],f=t[10]);const b=(0,y.useMemo)(p,f);let h;t[11]===Symbol.for("react.memo_cache_sentinel")?(h=[],t[11]=h):h=t[11];const g=(0,y.useCallback)(Sc,h);let _,S,E,w;return t[12]!==o?(_=(e,t)=>o(t),t[12]=o,t[13]=_):_=t[13],t[14]!==r||t[15]!==_?(S=n.createElement(Xn.default,{ariaLabel:_c.SLOT_ID_LABEL,options:yc,selectedValue:r,onMenuItemClick:_,fillWidth:!0}),t[14]=r,t[15]=_,t[16]=S):S=t[16],t[17]!==g||t[18]!==b||t[19]!==m?(E=m&&n.createElement(ac,{size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:b,rel:"noreferrer",target:"_blank",onClick:g,size:io.TextSize.Small}),help:n.createElement(Ji,{href:_c.HELPER_LINK_ADSENSE_HELP,rel:"noreferrer",target:"_blank",size:io.TextSize.Small})}},m)),t[17]=g,t[18]=b,t[19]=m,t[20]=E):E=t[20],t[21]!==E||t[22]!==S?(w=n.createElement(n.Fragment,null,S,E),t[21]=E,t[22]=S,t[23]=w):w=t[23],w}function Sc(e){return(0,v.trackClick)(e,"click_monetization_docs")}AdNetworkSettings.propTypes={handleUpdate:h.func,adNetwork:h.oneOf(Object.values(wi))};const Ec=AdNetworkSettings,wc=/^\/\d+(,\d+)?(\/[\w\d_\-.*\\!<:()]{1,99}[^/])*$/;const vc={SLOT_ID_CONTEXT:(0,Z.default)(/* translators: %s: example value. */ /* translators: %s: example value. */
(0,r.__)("Example: %s","web-stories"),"/123456789/a4a/amp_story_dfp_example"),SLOT_ID_PLACEHOLDER:(0,r.__)("Enter your Slot ID","web-stories"),SLOT_ID_LABEL:(0,r.__)("Google Ad Manager Slot ID","web-stories"),INPUT_ERROR:(0,r.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Save","web-stories")};function GoogleAdManagerSettings(e){const t=(0,l.c)(33),{slotId:a,handleUpdate:o}=e,[r,s]=(0,y.useState)(a),[i,c]=(0,y.useState)(""),d=r!==a&&!i,u=!d;let m,p,f,b;t[0]!==a||t[1]!==s?(m=()=>{s(a)},t[0]=a,t[1]=s,t[2]=m):m=t[2],t[3]!==a?(p=[a],t[3]=a,t[4]=p):p=t[4],(0,y.useEffect)(m,p),t[5]!==s||t[6]!==c?(f=e=>{const{value:t}=e.target;s(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(wc))}(t)?c(""):c(vc.INPUT_ERROR)},t[5]=s,t[6]=c,t[7]=f):f=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(b=[],t[8]=b):b=t[8];const h=(0,y.useCallback)(f,b);let g,_;t[9]!==d||t[10]!==o||t[11]!==r?(g=()=>{d&&o(r)},_=[d,r,o],t[9]=d,t[10]=o,t[11]=r,t[12]=g,t[13]=_):(g=t[12],_=t[13]);const S=(0,y.useCallback)(g,_);let E,w;t[14]!==S?(E=e=>{"Enter"===e.key&&(e.preventDefault(),S())},w=[S],t[14]=S,t[15]=E,t[16]=w):(E=t[15],w=t[16]);const v=(0,y.useCallback)(E,w);let T;t[17]===Symbol.for("react.memo_cache_sentinel")?(T=n.createElement(bc,{htmlFor:"adManagerSlotId"},vc.SLOT_ID_LABEL),t[17]=T):T=t[17];const C=Boolean(i);let k,I,L,A,x;return t[18]!==v||t[19]!==h||t[20]!==r||t[21]!==i||t[22]!==C?(k=n.createElement(hc,{id:"adManagerSlotId","aria-label":vc.SLOT_ID_LABEL,value:r,onChange:h,onKeyDown:v,placeholder:vc.SLOT_ID_PLACEHOLDER,hasError:C,hint:i}),t[18]=v,t[19]=h,t[20]=r,t[21]=i,t[22]=C,t[23]=k):k=t[23],t[24]!==u||t[25]!==S?(I=n.createElement(mc,{type:Ft.ButtonType.Secondary,size:Ft.ButtonSize.Small,disabled:u,onClick:S},vc.SUBMIT_BUTTON),t[24]=u,t[25]=S,t[26]=I):I=t[26],t[27]!==k||t[28]!==I?(L=n.createElement(fc,null,T,k,I),t[27]=k,t[28]=I,t[29]=L):L=t[29],t[30]===Symbol.for("react.memo_cache_sentinel")?(A=n.createElement(ac,{size:io.TextSize.Small},vc.SLOT_ID_CONTEXT),t[30]=A):A=t[30],t[31]!==L?(x=n.createElement(n.Fragment,null,L,A),t[31]=L,t[32]=x):x=t[32],x}GoogleAdManagerSettings.propTypes={handleUpdate:h.func,slotId:h.string};const Tc=GoogleAdManagerSettings,Cc=/^(ca-)?pub-\d{16}$/;const kc=/^\d{10}$/;const Ic={PUBLISHER_ID_CONTEXT:(0,Z.default)(/* translators: 1: first example. 2: second example. */ /* translators: 1: first example. 2: second example. */
(0,r.__)("Example: %1$s or %2$s. <a>Find your AdSense Publisher ID</a>.","web-stories"),"pub-1234567891234567","ca-pub-1234567891234567"),PUBLISHER_ID_CONTEXT_LINK:(0,r.__)("https://support.google.com/adsense/answer/105516","web-stories"),PUBLISHER_ID_PLACEHOLDER:(0,r.__)("Enter your Publisher ID","web-stories"),PUBLISHER_ID_LABEL:(0,r.__)("Google AdSense Publisher ID","web-stories"),SLOT_ID_CONTEXT:(0,Z.default)(/* translators: %s: example value. */ /* translators: %s: example value. */
(0,r.__)("Example: %s. Copy the slot ID from <a>your ad unit’s code</a>. The same ad unit will be used for all of your Web Stories.","web-stories"),"1234567890"),SLOT_ID_CONTEXT_LINK:(0,r.__)("https://support.google.com/adsense/answer/9274019","web-stories"),SLOT_ID_PLACEHOLDER:(0,r.__)("Enter your Slot ID","web-stories"),SLOT_ID_LABEL:(0,r.__)("Google AdSense Slot ID","web-stories"),INPUT_ERROR:(0,r.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Save","web-stories")};function GoogleAdSenseSettings(e){const t=(0,l.c)(68),{publisherId:a,slotId:o,handleUpdatePublisherId:r,handleUpdateSlotId:s}=e,[i,c]=(0,y.useState)(a),[d,u]=(0,y.useState)(""),m=i!==a&&!d,p=!m,[f,b]=(0,y.useState)(o),[h,g]=(0,y.useState)(""),_=f!==o&&!h,S=!_;let E,w,v,T;t[0]!==a||t[1]!==c?(E=()=>{c(a)},t[0]=a,t[1]=c,t[2]=E):E=t[2],t[3]!==a?(w=[a],t[3]=a,t[4]=w):w=t[4],(0,y.useEffect)(E,w),t[5]!==c||t[6]!==u?(v=e=>{const{value:t}=e.target;c(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(Cc))}(t)?u(""):u(Ic.INPUT_ERROR)},t[5]=c,t[6]=u,t[7]=v):v=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(T=[],t[8]=T):T=t[8];const C=(0,y.useCallback)(v,T);let k,I;t[9]!==m||t[10]!==r||t[11]!==i?(k=()=>{m&&r(i)},I=[m,i,r],t[9]=m,t[10]=r,t[11]=i,t[12]=k,t[13]=I):(k=t[12],I=t[13]);const L=(0,y.useCallback)(k,I);let A,x;t[14]!==L?(A=e=>{"Enter"===e.key&&(e.preventDefault(),L())},x=[L],t[14]=L,t[15]=A,t[16]=x):(A=t[15],x=t[16]);const O=(0,y.useCallback)(A,x);let D,N,P,R;t[17]!==o||t[18]!==b?(D=()=>{b(o)},t[17]=o,t[18]=b,t[19]=D):D=t[19],t[20]!==o?(N=[o],t[20]=o,t[21]=N):N=t[21],(0,y.useEffect)(D,N),t[22]!==b||t[23]!==g?(P=e=>{const{value:t}=e.target;b(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(kc))}(t)?g(""):g(Ic.INPUT_ERROR)},t[22]=b,t[23]=g,t[24]=P):P=t[24],t[25]===Symbol.for("react.memo_cache_sentinel")?(R=[],t[25]=R):R=t[25];const M=(0,y.useCallback)(P,R);let B,z;t[26]!==_||t[27]!==s||t[28]!==f?(B=()=>{_&&s(f)},z=[_,f,s],t[26]=_,t[27]=s,t[28]=f,t[29]=B,t[30]=z):(B=t[29],z=t[30]);const F=(0,y.useCallback)(B,z);let U,G;t[31]!==F?(U=e=>{"Enter"===e.key&&(e.preventDefault(),F())},G=[F],t[31]=F,t[32]=U,t[33]=G):(U=t[32],G=t[33]);const H=(0,y.useCallback)(U,G);let j;t[34]===Symbol.for("react.memo_cache_sentinel")?(j=[],t[34]=j):j=t[34];const q=(0,y.useCallback)(Lc,j);let V;t[35]===Symbol.for("react.memo_cache_sentinel")?(V=n.createElement(bc,{htmlFor:"adSensePublisherId"},Ic.PUBLISHER_ID_LABEL),t[35]=V):V=t[35];const W=Boolean(d);let $,K,X,Y,J;t[36]!==O||t[37]!==C||t[38]!==i||t[39]!==d||t[40]!==W?($=n.createElement(hc,{"aria-label":Ic.PUBLISHER_ID_LABEL,id:"adSensePublisherId",name:"adSensePublisherId","data-testid":"adSensePublisherId",value:i,onChange:C,onKeyDown:O,placeholder:Ic.PUBLISHER_ID_PLACEHOLDER,hasError:W,hint:d}),t[36]=O,t[37]=C,t[38]=i,t[39]=d,t[40]=W,t[41]=$):$=t[41],t[42]!==p||t[43]!==L?(K=n.createElement(mc,{type:Ft.ButtonType.Secondary,size:Ft.ButtonSize.Small,disabled:p,onClick:L,"data-testid":"adSensePublisherIdButton"},Ic.SUBMIT_BUTTON),t[42]=p,t[43]=L,t[44]=K):K=t[44],t[45]!==$||t[46]!==K?(X=n.createElement(fc,null,V,$,K),t[45]=$,t[46]=K,t[47]=X):X=t[47],t[48]!==q?(Y=n.createElement(ac,{size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:Ic.PUBLISHER_ID_CONTEXT_LINK,rel:"noreferrer",target:"_blank",onClick:q,size:io.TextSize.Small})}},Ic.PUBLISHER_ID_CONTEXT)),t[48]=q,t[49]=Y):Y=t[49],t[50]===Symbol.for("react.memo_cache_sentinel")?(J=n.createElement(bc,{htmlFor:"adSenseSlotId"},Ic.SLOT_ID_LABEL),t[50]=J):J=t[50];const Z=Boolean(h);let Q,ee,te,ae,oe;return t[51]!==H||t[52]!==M||t[53]!==f||t[54]!==h||t[55]!==Z?(Q=n.createElement(hc,{id:"adSenseSlotId","aria-label":Ic.SLOT_ID_LABEL,name:"adSenseSlotId","data-testid":"adSenseSlotId",value:f,onChange:M,onKeyDown:H,placeholder:Ic.SLOT_ID_PLACEHOLDER,hasError:Z,hint:h}),t[51]=H,t[52]=M,t[53]=f,t[54]=h,t[55]=Z,t[56]=Q):Q=t[56],t[57]!==S||t[58]!==F?(ee=n.createElement(mc,{type:Ft.ButtonType.Secondary,size:Ft.ButtonSize.Small,disabled:S,onClick:F,"data-testid":"adSenseSlotIdButton"},Ic.SUBMIT_BUTTON),t[57]=S,t[58]=F,t[59]=ee):ee=t[59],t[60]!==Q||t[61]!==ee?(te=n.createElement(fc,null,J,Q,ee),t[60]=Q,t[61]=ee,t[62]=te):te=t[62],t[63]===Symbol.for("react.memo_cache_sentinel")?(ae=n.createElement(ac,{size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:Ic.SLOT_ID_CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:io.TextSize.Small})}},Ic.SLOT_ID_CONTEXT)),t[63]=ae):ae=t[63],t[64]!==X||t[65]!==Y||t[66]!==te?(oe=n.createElement(n.Fragment,null,X,Y,te,ae),t[64]=X,t[65]=Y,t[66]=te,t[67]=oe):oe=t[67],oe}function Lc(e){return(0,v.trackClick)(e,"click_adsense_publisher_id_docs")}GoogleAdSenseSettings.propTypes={handleUpdatePublisherId:h.func,handleUpdateSlotId:h.func,publisherId:h.string,slotId:h.string};const Ac=GoogleAdSenseSettings,xc=/^\d{7,20}$/;const Oc={WIDGET_ID_CONTEXT:(0,Z.default)(/* translators: %s: example value. */ /* translators: %s: example value. */
(0,r.__)("Example: %s","web-stories"),"1234567"),WIDGET_ID_PLACEHOLDER:(0,r.__)("Enter your MGID Widget ID","web-stories"),WIDGET_ID_LABEL:(0,r.__)("Widget ID","web-stories"),INPUT_ERROR:(0,r.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Save","web-stories")};function MgidSettings(e){const t=(0,l.c)(33),{widgetId:a,handleUpdate:o}=e,[r,s]=(0,y.useState)(a),[i,c]=(0,y.useState)(""),d=r!==a&&!i,u=!d;let m,p,f,b;t[0]!==a||t[1]!==s?(m=()=>{s(a)},t[0]=a,t[1]=s,t[2]=m):m=t[2],t[3]!==a?(p=[a],t[3]=a,t[4]=p):p=t[4],(0,y.useEffect)(m,p),t[5]!==s||t[6]!==c?(f=e=>{const{value:t}=e.target;s(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(xc))}(t)?c(""):c(Oc.INPUT_ERROR)},t[5]=s,t[6]=c,t[7]=f):f=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(b=[],t[8]=b):b=t[8];const h=(0,y.useCallback)(f,b);let g,_;t[9]!==d||t[10]!==o||t[11]!==r?(g=()=>{d&&o(r)},_=[d,r,o],t[9]=d,t[10]=o,t[11]=r,t[12]=g,t[13]=_):(g=t[12],_=t[13]);const S=(0,y.useCallback)(g,_);let E,w;t[14]!==S?(E=e=>{"Enter"===e.key&&(e.preventDefault(),S())},w=[S],t[14]=S,t[15]=E,t[16]=w):(E=t[15],w=t[16]);const v=(0,y.useCallback)(E,w);let T;t[17]===Symbol.for("react.memo_cache_sentinel")?(T=n.createElement(bc,{htmlFor:"mgidWidgetId"},Oc.WIDGET_ID_LABEL),t[17]=T):T=t[17];const C=Boolean(i);let k,I,L,A,x;return t[18]!==v||t[19]!==h||t[20]!==C||t[21]!==r||t[22]!==i?(k=n.createElement(hc,{id:"mgidWidgetId","aria-label":Oc.WIDGET_ID_LABEL,value:r,onChange:h,onKeyDown:v,placeholder:Oc.WIDGET_ID_PLACEHOLDER,hasError:C,hint:i}),t[18]=v,t[19]=h,t[20]=C,t[21]=r,t[22]=i,t[23]=k):k=t[23],t[24]!==u||t[25]!==S?(I=n.createElement(mc,{type:Ft.ButtonType.Secondary,size:Ft.ButtonSize.Small,disabled:u,onClick:S},Oc.SUBMIT_BUTTON),t[24]=u,t[25]=S,t[26]=I):I=t[26],t[27]!==k||t[28]!==I?(L=n.createElement(fc,null,T,k,I),t[27]=k,t[28]=I,t[29]=L):L=t[29],t[30]===Symbol.for("react.memo_cache_sentinel")?(A=n.createElement(ac,{size:io.TextSize.Small},Oc.WIDGET_ID_CONTEXT),t[30]=A):A=t[30],t[31]!==L?(x=n.createElement(n.Fragment,null,L,A),t[31]=L,t[32]=x):x=t[32],x}MgidSettings.propTypes={handleUpdate:h.func,widgetId:h.string};const Dc=MgidSettings,Nc={SECTION_HEADING:(0,r.__)("Monetization","web-stories"),HELPER_MESSAGE_NONE:(0,r.__)("Monetize your content by showing ads in your Web Stories. <a>Learn more</a>.","web-stories"),HELPER_LINK_NONE:(0,r.__)("https://amp.dev/documentation/guides-and-tutorials/develop/advertise_amp_stories/","web-stories"),SITE_KIT_NOT_INSTALLED:(0,r.__)("Install <a>Site Kit by Google</a> to easily enable Google AdSense for Web Stories.","web-stories"),SITE_KIT_INSTALLED:(0,r.__)("Use Site Kit by Google to easily<a>activate Google AdSense</a> for Web Stories.","web-stories"),SITE_KIT_IN_USE:(0,r.__)("Site Kit by Google has already enabled Google AdSense for your Web Stories, all changes to your ad configuration should occur there.","web-stories")};function Pc(e){return e.preventDefault()}function Rc(e){return(0,v.trackClick)(e,"click_site_kit_link")}function Mc(e){return(0,v.trackClick)(e,"monetization","dashboard",Nc.HELPER_LINK_NONE)}const Bc=function AdManagement(e){const t=(0,l.c)(47),{updateSettings:a,adNetwork:o,publisherId:r,adSenseSlotId:s,adManagerSlotId:i,mgidWidgetId:c,siteKitStatus:d}=e,{adsenseActive:u,installed:m,adsenseLink:p}=d;let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[0]=f):f=t[0];const b=(0,y.useCallback)(Mc,f);let h,g;t[1]!==a?(h=e=>a({adSensePublisherId:e}),g=[a],t[1]=a,t[2]=h,t[3]=g):(h=t[2],g=t[3]);const _=(0,y.useCallback)(h,g);let S,E;t[4]!==a?(S=e=>a({adSenseSlotId:e}),E=[a],t[4]=a,t[5]=S,t[6]=E):(S=t[5],E=t[6]);const w=(0,y.useCallback)(S,E);let T,C;t[7]!==a?(T=e=>a({adManagerSlotId:e}),C=[a],t[7]=a,t[8]=T,t[9]=C):(T=t[8],C=t[9]);const k=(0,y.useCallback)(T,C);let I,L;t[10]!==a?(I=e=>a({mgidWidgetId:e}),L=[a],t[10]=a,t[11]=I,t[12]=L):(I=t[11],L=t[12]);const A=(0,y.useCallback)(I,L);let x,O;t[13]!==a?(x=e=>{a({adNetwork:e}),(0,v.trackEvent)("change_ad_network",{name:e})},O=[a],t[13]=a,t[14]=x,t[15]=O):(x=t[14],O=t[15]);const D=(0,y.useCallback)(x,O);let N;t[16]===Symbol.for("react.memo_cache_sentinel")?(N=[],t[16]=N):N=t[16];const P=(0,y.useCallback)(Rc,N);let R,M;t[17]!==u||t[18]!==p||t[19]!==m||t[20]!==P?(R=()=>u?null:n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:p,rel:"noreferrer",target:"_blank",size:io.TextSize.Small,onClick:P})}},m?Nc.SITE_KIT_INSTALLED:Nc.SITE_KIT_NOT_INSTALLED),M=[u,m,p,P],t[17]=u,t[18]=p,t[19]=m,t[20]=P,t[21]=R,t[22]=M):(R=t[21],M=t[22]);const B=(0,y.useMemo)(R,M);let z,F,U,G,H,j;return t[23]===Symbol.for("react.memo_cache_sentinel")?(z=n.createElement(Yi,null,Nc.SECTION_HEADING),t[23]=z):z=t[23],t[24]!==b?(F=n.createElement(ac,{size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:Nc.HELPER_LINK_NONE,rel:"noreferrer",target:"_blank",onClick:b,size:io.TextSize.Small})}},Nc.HELPER_MESSAGE_NONE)),t[24]=b,t[25]=F):F=t[25],t[26]!==B?(U=n.createElement(tc,{size:io.TextSize.Small},B),t[26]=B,t[27]=U):U=t[27],t[28]!==F||t[29]!==U?(G=n.createElement("div",null,z,F,U),t[28]=F,t[29]=U,t[30]=G):G=t[30],t[31]!==i||t[32]!==o||t[33]!==s||t[34]!==u||t[35]!==k||t[36]!==D||t[37]!==_||t[38]!==w||t[39]!==A||t[40]!==c||t[41]!==r||t[42]!==d?(H=u?n.createElement("div",null,n.createElement(ac,{size:io.TextSize.Small},Nc.SITE_KIT_IN_USE)):n.createElement("div",null,n.createElement(Ec,{handleUpdate:D,adNetwork:o}),wi.ADSENSE===o&&n.createElement(Ac,{handleUpdatePublisherId:_,handleUpdateSlotId:w,publisherId:r,slotId:s,siteKitStatus:d}),wi.ADMANAGER===o&&n.createElement(Tc,{handleUpdate:k,slotId:i}),wi.MGID===o&&n.createElement(Dc,{handleUpdate:A,widgetId:c})),t[31]=i,t[32]=o,t[33]=s,t[34]=u,t[35]=k,t[36]=D,t[37]=_,t[38]=w,t[39]=A,t[40]=c,t[41]=r,t[42]=d,t[43]=H):H=t[43],t[44]!==G||t[45]!==H?(j=n.createElement(gc,{onSubmit:Pc},G,H),t[44]=G,t[45]=H,t[46]=j):j=t[46],j};var zc=a(75073);function PopoverLogoContextMenu(e){const t=(0,l.c)(36),{isActive:a,idx:o,publisherLogo:s,contextMenuId:i,onMenuItemToggle:c,items:d}=e,u=i.value===s.id,m=a?0:-1;let p,f;t[0]!==i?(p=e=>i.set(e),f=[i],t[0]=i,t[1]=p,t[2]=f):(p=t[1],f=t[2]);const b=(0,y.useCallback)(p,f);let h,g;t[3]!==b?(h=()=>b(-1),g=[b],t[3]=b,t[4]=h,t[5]=g):(h=t[4],g=t[5]);const _=(0,y.useCallback)(h,g),S=`publisher-logo-context-menu-button-${o}`;let E,w,v,T,C;t[6]!==s.title?(E=(0,Z.default)((0,r.__)("Publisher logo menu for %s","web-stories"),s.title),t[6]=s.title,t[7]=E):E=t[7],t[8]!==u||t[9]!==c||t[10]!==b||t[11]!==s.id?(w=e=>{e.preventDefault(),c(u?null:s.id),b(u?-1:s.id)},t[8]=u,t[9]=c,t[10]=b,t[11]=s.id,t[12]=w):w=t[12],t[13]!==u||t[14]!==c||t[15]!==s.id?(v=()=>{c(u?null:s.id)},t[13]=u,t[14]=c,t[15]=s.id,t[16]=v):v=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(T=n.createElement(zc.default,{"aria-hidden":"true"}),t[17]=T):T=t[17],t[18]!==a||t[19]!==u||t[20]!==S||t[21]!==E||t[22]!==w||t[23]!==v||t[24]!==m?(C=n.createElement(uc,{tabIndex:m,isActive:a,menuOpen:u,"data-testid":S,"aria-label":E,onClick:w,onFocus:v},T),t[18]=a,t[19]=u,t[20]=S,t[21]=E,t[22]=w,t[23]=v,t[24]=m,t[25]=C):C=t[25];const k=`publisher-logo-context-menu-${o}`;let I,L,A;return t[26]!==d?(I=d.map(Fc),t[26]=d,t[27]=I):I=t[27],t[28]!==_||t[29]!==u||t[30]!==k||t[31]!==I?(L=n.createElement(sa.default,{animate:!0,isOpen:u,"data-testid":k,onDismiss:_},I),t[28]=_,t[29]=u,t[30]=k,t[31]=I,t[32]=L):L=t[32],t[33]!==C||t[34]!==L?(A=n.createElement(dc,null,C,L),t[33]=C,t[34]=L,t[35]=A):A=t[35],A}function Fc(e){const{label:t,separator:a,...o}=e,r=o.href?ha:ga.default;return n.createElement(y.Fragment,{key:t},"top"===a&&n.createElement(_a.default,null),n.createElement(r,o,t),"bottom"===a&&n.createElement(_a.default,null))}const Uc={contextMenuId:h.shape({value:h.number,set:h.func}).isRequired,idx:h.number,isActive:h.bool,items:h.arrayOf(h.shape({disabled:h.bool,href:h.string,label:h.string.isRequired,openNewTab:h.bool,onClick:h.func,onFocus:h.func})).isRequired,onMenuItemToggle:h.func.isRequired,publisherLogo:h.shape({url:h.string,title:h.string,id:h.number,active:h.bool}).isRequired};PopoverLogoContextMenu.propTypes=Uc;const Gc=PopoverLogoContextMenu,Hc=(0,y.forwardRef)(((e,t)=>{const a=(0,l.c)(51),{contextMenuId:o,index:s,onMenuItemToggle:i,onRemoveLogo:c,onUpdateDefaultLogo:d,publisherLogo:u,setFocusedPublisherLogoId:m,showLogoContextMenu:p,isFocused:f}=e;let b,h,g,_,y,S;a[0]===Symbol.for("react.memo_cache_sentinel")?(b=(0,r.__)("Set as Default","web-stories"),a[0]=b):b=a[0],a[1]!==d||a[2]!==u?(h=e=>{e.preventDefault(),d(u)},a[1]=d,a[2]=u,a[3]=h):h=a[3],a[4]!==u.active||a[5]!==h?(g={label:b,onClick:h,disabled:u.active},a[4]=u.active,a[5]=h,a[6]=g):g=a[6],a[7]===Symbol.for("react.memo_cache_sentinel")?(_=(0,r.__)("Delete","web-stories"),a[7]=_):_=a[7],a[8]!==s||a[9]!==c||a[10]!==u?(y={label:_,onClick:e=>{e.preventDefault(),c(u,s)}},a[8]=s,a[9]=c,a[10]=u,a[11]=y):y=a[11],a[12]!==g||a[13]!==y?(S=[g,y],a[12]=g,a[13]=y,a[14]=S):S=a[14];const E=S,w=u.active,v=`publisher-logo-${s}`;let T;a[15]!==u.id||a[16]!==m?(T=()=>{m(u.id)},a[15]=u.id,a[16]=m,a[17]=T):T=a[17];const C=`uploaded-publisher-logo-${s}`,k=f?0:-1;let I,L,A,x,O,D,N;return a[18]!==u.id||a[19]!==m?(I=e=>{e.preventDefault(),m(u.id)},a[18]=u.id,a[19]=m,a[20]=I):I=a[20],a[21]!==u.title?(L=(0,Z.default)((0,r.__)("Publisher Logo %s","web-stories"),u.title),a[21]=u.title,a[22]=L):L=a[22],a[23]!==u.title||a[24]!==u.url?(A=n.createElement(cc,{src:u.url,alt:u.title}),a[23]=u.title,a[24]=u.url,a[25]=A):A=a[25],a[26]!==f||a[27]!==C||a[28]!==k||a[29]!==I||a[30]!==L||a[31]!==A||a[32]!==T?(x=n.createElement(ic,{onFocus:T,"data-testid":C,isSelected:f,tabIndex:k,onClick:I,"aria-label":L},A),a[26]=f,a[27]=C,a[28]=k,a[29]=I,a[30]=L,a[31]=A,a[32]=T,a[33]=x):x=a[33],a[34]!==u.active?(O=u.active&&n.createElement(ec,{size:io.TextSize.XSmall},(0,r.__)("Default","web-stories")),a[34]=u.active,a[35]=O):O=a[35],a[36]!==o||a[37]!==s||a[38]!==f||a[39]!==E||a[40]!==i||a[41]!==u||a[42]!==p?(D=p&&n.createElement(Gc,{isActive:f,idx:s,items:E,publisherLogo:u,onMenuItemToggle:i,contextMenuId:o}),a[36]=o,a[37]=s,a[38]=f,a[39]=E,a[40]=i,a[41]=u,a[42]=p,a[43]=D):D=a[43],a[44]!==u.active||a[45]!==t||a[46]!==x||a[47]!==O||a[48]!==D||a[49]!==v?(N=n.createElement(sc,{ref:t,role:"listitem",active:w,"data-testid":v},x,O,D),a[44]=u.active,a[45]=t,a[46]=x,a[47]=O,a[48]=D,a[49]=v,a[50]=N):N=a[50],N}));Hc.propTypes={contextMenuId:Uc.contextMenuId,index:Uc.idx,onMenuItemToggle:Uc.onMenuItemToggle,onRemoveLogo:h.func.isRequired,onUpdateDefaultLogo:h.func.isRequired,publisherLogo:Uc.publisherLogo,setFocusedPublisherLogoId:h.func.isRequired,showLogoContextMenu:h.bool,isFocused:h.bool},Hc.displayName="GridItem";const jc={SECTION_HEADING:(0,r.__)("Publisher Logo","web-stories"),UPLOAD_CONTEXT:(0,r.__)("Upload your logos here and they will become available to any stories you create.","web-stories"),CLICK_CONTEXT:(0,r.__)("Click on logo to set as default if you want that logo to be used on default logo for all your stories.","web-stories"),REMOVAL:(0,r.__)("Removing a logo from your settings won't remove it from any stories using that logo.","web-stories"),INSTRUCTIONS:(0,r.__)("Avoid vector files, such as svg or eps. Logos should be at least 96x96 pixels and a perfect square. The background should not be transparent.","web-stories"),SUBMIT:(0,r.__)("Upload logo","web-stories"),ARIA_LABEL:(0,r.__)("Click to upload a new logo","web-stories"),HELPER_UPLOAD:(0,r.__)("Drag a jpg, png, or static gif in this box. Or click “Upload logo” below.","web-stories")};const qc=function PublisherLogoSettings({canUploadFiles:e,onAddLogos:t,onRemoveLogo:a,onUpdateDefaultLogo:o,isLoading:l,publisherLogos:s,uploadError:i}){const{isRTL:c,allowedImageMimeTypes:d}=w(),u=(0,y.useRef)(),m=(0,y.useRef)(),p=(0,y.useRef)({}),[f,b]=(0,y.useState)(null),[h,g]=(0,y.useState)(null),[_,S]=(0,y.useState)(null),E=1===s.length,v=(0,y.useRef)(s.length),T=(0,y.useCallback)(((e,t)=>{S(-1),a?.(e),g(t),v.current=s.length}),[a,s.length]),C=(0,y.useCallback)((e=>{S(-1),o?.(e)}),[o]);(0,y.useEffect)((()=>{if(Boolean(h?.toString())&&s.length!==v.current){if(0===s.length)return u.current?.getElementsByTagName("input")[0].focus();const e=h>0?s[h-1]:s[0];return b(e.id),p.current[e.id].firstChild.focus(),g(null)}}),[h,s,b]),(0,Bt.default)({containerRef:u,gridRef:m,itemRefs:p,isRTL:c,currentItemId:f,items:s});const k=(0,y.useCallback)((e=>{b(e)}),[]);return(0,y.useFocusOut)(u,(()=>{b(null),S(null)}),[]),n.createElement(Xi,null,n.createElement("div",null,n.createElement(Yi,null,jc.SECTION_HEADING),n.createElement(tc,{size:io.TextSize.Small},jc.UPLOAD_CONTEXT),n.createElement(tc,{size:io.TextSize.Small},jc.CLICK_CONTEXT),n.createElement(tc,{size:io.TextSize.Small},jc.REMOVAL)),n.createElement("div",{ref:u,"data-testid":"publisher-logos-container"},s.length>0&&n.createElement(lc,{tabIndex:0,ref:m,role:"list","aria-label":(0,r.__)("Viewing existing publisher logos","web-stories")},s.map(((e,t)=>n.createElement(Hc,{key:e.id,ref:t=>{p.current[e.id]=t},contextMenuId:{set:S,value:_},index:t,isFocused:f===e.id,onMenuItemToggle:k,onRemoveLogo:T,onUpdateDefaultLogo:C,publisherLogo:e,setFocusedPublisherLogoId:b,showLogoContextMenu:!E})))),i&&n.createElement(rc,{role:"alert"},i),e&&n.createElement(n.Fragment,null,n.createElement(Ua,{onSubmit:t,id:"settings_publisher_logos",isLoading:l,label:jc.SUBMIT,isMultiple:!0,ariaLabel:jc.ARIA_LABEL,instructionalText:jc.HELPER_UPLOAD,acceptableFormats:Object.values(d)}),n.createElement(tc,{size:io.TextSize.Small},jc.INSTRUCTIONS))))};var Vc=a(5598),Wc=a(67148);function TelemetrySettings(e){const t=(0,l.c)(15),{selected:a,onCheckboxSelected:o,disabled:s}=e;let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],t[0]=i):i=t[0];const c=(0,y.useMemo)($c,i);let d;t[1]===Symbol.for("react.memo_cache_sentinel")?(d=n.createElement("div",null,n.createElement(Yi,null,(0,r.__)("Data Sharing Opt-in","web-stories"))),t[1]=d):d=t[1];const u=Boolean(a);let m;t[2]!==s||t[3]!==o||t[4]!==u||t[5]!==c?(m=n.createElement(Wc.default,{id:c,"data-testid":"telemetry-settings-checkbox",disabled:s,onChange:o,checked:u}),t[2]=s,t[3]=o,t[4]=u,t[5]=c,t[6]=m):m=t[6];const p=Boolean(a);let f,b,h,g;return t[7]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.__)("https://policies.google.com/privacy","web-stories"),t[7]=f):f=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(b=n.createElement(Nn.default,{mapping:{a:n.createElement("a",{href:f,rel:"noreferrer",target:"_blank","aria-label":(0,r.__)("Learn more by visiting Google Privacy Policy","web-stories")})}},(0,r.__)("Check the box to help us improve the Web Stories plugin by allowing tracking of product usage stats. All data are treated in accordance with <a>Google Privacy Policy</a>.","web-stories")),t[8]=b):b=t[8],t[9]!==p?(h=n.createElement(nc,{size:io.TextSize.Small,"aria-checked":p},b),t[9]=p,t[10]=h):h=t[10],t[11]!==m||t[12]!==h||t[13]!==c?(g=n.createElement(Xi,null,d,n.createElement("div",null,n.createElement(oc,{htmlFor:c},m,h))),t[11]=m,t[12]=h,t[13]=c,t[14]=g):g=t[14],g}function $c(){return`telemetry-opt-in-${(0,Vc.default)()}`}function MediaOptimizationSettings(e){const t=(0,l.c)(14),{selected:a,onCheckboxSelected:o,disabled:s}=e;let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],t[0]=i):i=t[0];const c=(0,y.useMemo)(Kc,i);let d;t[1]===Symbol.for("react.memo_cache_sentinel")?(d=n.createElement("div",null,n.createElement(Yi,null,(0,r.__)("Video Optimization","web-stories"))),t[1]=d):d=t[1];const u=Boolean(a);let m;t[2]!==s||t[3]!==c||t[4]!==o||t[5]!==u?(m=n.createElement(Wc.default,{id:c,"data-testid":"media-optimization-settings-checkbox",disabled:s,onChange:o,checked:u}),t[2]=s,t[3]=c,t[4]=o,t[5]=u,t[6]=m):m=t[6];const p=Boolean(a);let f,b,h;return t[7]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.__)("Automatically optimize videos used in Web Stories. We recommend enabling this feature. Video files that are too large or have an unsupported format (like .mov) will otherwise not display properly.","web-stories"),t[7]=f):f=t[7],t[8]!==p?(b=n.createElement(nc,{size:io.TextSize.Small,"aria-checked":p},f),t[8]=p,t[9]=b):b=t[9],t[10]!==c||t[11]!==m||t[12]!==b?(h=n.createElement(Xi,null,d,n.createElement("div",null,n.createElement(oc,{htmlFor:c},m,b))),t[10]=c,t[11]=m,t[12]=b,t[13]=h):h=t[13],h}function Kc(){return`media-optimization-${(0,Vc.default)()}`}function VideoCacheSettings(e){const t=(0,l.c)(17),{isEnabled:a,updateSettings:o}=e,s=void 0!==a&&a;let i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=[],t[0]=i):i=t[0];const c=(0,y.useMemo)(Xc,i);let d,u;t[1]!==s||t[2]!==o?(d=()=>o({videoCache:!s}),u=[o,s],t[1]=s,t[2]=o,t[3]=d,t[4]=u):(d=t[3],u=t[4]);const m=(0,y.useCallback)(d,u);let p;t[5]===Symbol.for("react.memo_cache_sentinel")?(p=n.createElement("div",null,n.createElement(Yi,null,(0,r.__)("Video Cache","web-stories"))),t[5]=p):p=t[5];const f=Boolean(s);let b;t[6]!==m||t[7]!==f||t[8]!==c?(b=n.createElement(Wc.default,{id:c,"data-testid":"video-cache-settings-checkbox",onChange:m,checked:f}),t[6]=m,t[7]=f,t[8]=c,t[9]=b):b=t[9];const h=Boolean(s);let g,_,S;return t[10]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.__)("Reduce hosting costs and improve user experience by serving videos from the Google cache.","web-stories"),t[10]=g):g=t[10],t[11]!==h?(_=n.createElement(nc,{size:io.TextSize.Small,"aria-checked":h},g),t[11]=h,t[12]=_):_=t[12],t[13]!==_||t[14]!==b||t[15]!==c?(S=n.createElement(Xi,null,p,n.createElement("div",null,n.createElement(oc,{htmlFor:c},b,_))),t[13]=_,t[14]=b,t[15]=c,t[16]=S):S=t[16],S}function Xc(){return`video-cache-${(0,Vc.default)()}`}function DataRemovalSettings(e){const t=(0,l.c)(14),{isEnabled:a,updateSettings:o}=e,s=void 0!==a&&a;let i,c;t[0]!==s||t[1]!==o?(i=()=>o({dataRemoval:!s}),c=[o,s],t[0]=s,t[1]=o,t[2]=i,t[3]=c):(i=t[2],c=t[3]);const d=(0,y.useCallback)(i,c);let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=n.createElement("div",null,n.createElement(Yi,null,(0,r.__)("Plugin Uninstall","web-stories"))),t[4]=u):u=t[4];const m=Boolean(s);let p;t[5]!==d||t[6]!==m?(p=n.createElement(Wc.default,{id:"data-removal-settings","data-testid":"data-removal-settings-checkbox",onChange:d,checked:m}),t[5]=d,t[6]=m,t[7]=p):p=t[7];const f=Boolean(s);let b,h,g;return t[8]===Symbol.for("react.memo_cache_sentinel")?(b=(0,r.__)("Remove all data including stories and saved templates when uninstalling the Web Stories plugin.","web-stories"),t[8]=b):b=t[8],t[9]!==f?(h=n.createElement(nc,{size:io.TextSize.Small,"aria-checked":f},b),t[9]=f,t[10]=h):h=t[10],t[11]!==p||t[12]!==h?(g=n.createElement(Xi,null,u,n.createElement("div",null,n.createElement(oc,{htmlFor:"data-removal-settings"},p,h))),t[11]=p,t[12]=h,t[13]=g):g=t[13],g}TelemetrySettings.propTypes={disabled:h.bool.isRequired,selected:h.bool.isRequired,onCheckboxSelected:h.func.isRequired},MediaOptimizationSettings.propTypes={disabled:h.bool.isRequired,selected:h.bool.isRequired,onCheckboxSelected:h.func.isRequired},VideoCacheSettings.propTypes={isEnabled:h.bool,updateSettings:h.func.isRequired},DataRemovalSettings.propTypes={isEnabled:h.bool,updateSettings:h.func.isRequired};const Yc={LABEL:(0,r.__)("Stories Archives","web-stories"),SECTION_HEADING:(0,r.__)("Stories Archives","web-stories"),ARCHIVE_CONTENT:(0,r.__)("By default WordPress automatically creates an archive page, displaying your latest stories in your theme's layout.","web-stories"),ARCHIVE_CONTENT_2:(0,r.__)("You can customize or disable this behavior.","web-stories"),SUB_TEXT_CUSTOM:(0,r.__)("Choose a page to serve as your Web Stories archive. Use the Web Stories block to add stories to this page.","web-stories")},Jc=[{label:(0,r._x)("Default","archive type","web-stories"),value:vi},{label:(0,r.__)("Disabled","web-stories"),value:Ti},{label:(0,r.__)("Create your own","web-stories"),value:Ci}],Zc=f.default.div.withConfig({displayName:"archive__SearchWrapper",componentId:"sc-u9kj1r-0"})(["padding-top:12px;"]);function ArchiveSettings(e){const t=(0,l.c)(60),{archive:a,archiveURL:o,defaultArchiveURL:s,archivePageId:i,updateSettings:c,searchPages:d,getPageById:u}=e,m=void 0===a?vi:a,[p,f]=(0,y.useState)(o);let b;t[0]!==i?(b=i?{value:i}:void 0,t[0]=i,t[1]=b):b=t[1];const[h,g]=(0,y.useState)(b);let _;t[2]===Symbol.for("react.memo_cache_sentinel")?(_=[],t[2]=_):_=t[2];const[S,E]=(0,y.useState)(_);let w,T;t[3]!==o||t[4]!==i||t[5]!==f||t[6]!==g||t[7]!==c?(w=(e,t)=>{f(o);const a=t===Ci?i:0;g(a),c({archive:t,archivePageId:a})},t[3]=o,t[4]=i,t[5]=f,t[6]=g,t[7]=c,t[8]=w):w=t[8],t[9]!==o||t[10]!==i||t[11]!==c?(T=[c,i,o],t[9]=o,t[10]=i,t[11]=c,t[12]=T):T=t[12];const C=(0,y.useCallback)(w,T);let k,I;t[13]!==i||t[14]!==g||t[15]!==c?(k=(e,t)=>{const a=Number(t.value);a!==i&&(g(a?{value:a}:void 0),c({archivePageId:a}))},t[13]=i,t[14]=g,t[15]=c,t[16]=k):k=t[16],t[17]!==i||t[18]!==c?(I=[i,c],t[17]=i,t[18]=c,t[19]=I):I=t[19];const L=(0,y.useCallback)(k,I);let A,x,O;t[20]!==m||t[21]!==i||t[22]!==u||t[23]!==f||t[24]!==E||t[25]!==g?(A=()=>{let e;return e=!0,i&&Ci===m&&(async()=>{const{title:t,link:a}=await u(i);if(e&&t){const e={value:i,label:t};E((t=>[e,...t])),g(e),f(a)}})(),()=>{e=!1}},t[20]=m,t[21]=i,t[22]=u,t[23]=f,t[24]=E,t[25]=g,t[26]=A):A=t[26],t[27]!==m||t[28]!==i||t[29]!==u?(x=[m,i,u],t[27]=m,t[28]=i,t[29]=u,t[30]=x):x=t[30],(0,y.useEffect)(A,x),t[31]!==d||t[32]!==E?(O=async e=>{await(0,v.trackEvent)("archive_page_search",{search_type:"dashboard",search_term:e}),E(await d(e))},t[31]=d,t[32]=E,t[33]=O):O=t[33];const D=(0,y.useDebouncedCallback)(O,300);let N,P,R,M,B,z,F;return t[34]===Symbol.for("react.memo_cache_sentinel")?(N=n.createElement("div",null,n.createElement(Yi,null,Yc.SECTION_HEADING),n.createElement(ac,{size:io.TextSize.Small},Yc.ARCHIVE_CONTENT),n.createElement(ac,{size:io.TextSize.Small},Yc.ARCHIVE_CONTENT_2)),t[34]=N):N=t[34],t[35]!==m||t[36]!==C?(P=n.createElement(Xn.default,{ariaLabel:Yc.LABEL,options:Jc,selectedValue:m,onMenuItemClick:C,fillWidth:!0}),t[35]=m,t[36]=C,t[37]=P):P=t[37],t[38]!==m||t[39]!==s?(R=Ti===m&&n.createElement(ac,{size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{code:n.createElement("code",null)}},(0,Z.default)((0,r.__)("Turn off the default archive page at <code>%s</code>. Users will see a 404 Not Found page when trying to access the default archive page.","web-stories"),s))),t[38]=m,t[39]=s,t[40]=R):R=t[40],t[41]!==m?(M=Ci===m&&n.createElement(ac,{size:io.TextSize.Small},Yc.SUB_TEXT_CUSTOM),t[41]=m,t[42]=M):M=t[42],t[43]!==m||t[44]!==D||t[45]!==L||t[46]!==S||t[47]!==h?(B=Ci===m&&n.createElement(Zc,null,n.createElement(xr,{placeholder:(0,r.__)("Select page","web-stories"),selectedValue:h,options:S,handleSearchValueChange:D,emptyText:(0,r.__)("No pages available","web-stories"),onMenuItemClick:L})),t[43]=m,t[44]=D,t[45]=L,t[46]=S,t[47]=h,t[48]=B):B=t[48],t[49]!==m||t[50]!==i||t[51]!==p||t[52]!==s?(z=Ti!==m&&n.createElement(ac,{size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:p,rel:"noreferrer",target:"_blank",size:io.TextSize.Small}),code:n.createElement("code",null)}},i&&p!==s?(0,Z.default)((0,r.__)("Visit archive page at <a>%1$s</a>. <code>%2$s</code> will automatically redirect to this page.","web-stories"),p,s):(0,Z.default)((0,r.__)("Visit archive page at <a>%1$s</a>.","web-stories"),s))),t[49]=m,t[50]=i,t[51]=p,t[52]=s,t[53]=z):z=t[53],t[54]!==P||t[55]!==R||t[56]!==M||t[57]!==B||t[58]!==z?(F=n.createElement(Xi,null,N,n.createElement("div",null,P,R,M,B,z)),t[54]=P,t[55]=R,t[56]=M,t[57]=B,t[58]=z,t[59]=F):F=t[59],F}ArchiveSettings.propTypes={archive:h.string.isRequired,archiveURL:h.string.isRequired,defaultArchiveURL:h.string.isRequired,updateSettings:h.func.isRequired,searchPages:h.func.isRequired,archivePageId:h.number.isRequired,getPageById:h.func.isRequired};var Qc=a(57796),ed=a(28874);const td=/^ua-\d+-\d+|g-\w+$/;const ad=(0,f.default)(Qc.default).withConfig({displayName:"googleAnalytics__StyledNotificationBubble",componentId:"sc-svg62t-0"})(["display:inline-block;margin-left:10px;"]),od={CONTEXT:(0,r.__)("The story editor will append a default, configurable AMP analytics configuration to your story. If you’re interested in going beyond what the default configuration, read this <a>article</a>.","web-stories"),CONTEXT_LINK:"https://blog.amp.dev/2019/08/28/analytics-for-your-amp-stories/",SECTION_HEADING:(0,r.__)("Google Analytics","web-stories"),PLACEHOLDER:(0,r.__)("Enter your Google Analytics Measurement ID","web-stories"),ARIA_LABEL:(0,r.__)("Enter your Google Analytics Measurement ID","web-stories"),INPUT_ERROR:(0,r.__)("Invalid ID format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Save","web-stories"),SITE_KIT_NOT_INSTALLED:(0,r.__)("Install <a>Site Kit by Google</a> to easily enable Google Analytics for Web Stories.","web-stories"),SITE_KIT_INSTALLED:(0,r.__)("Use Site Kit by Google to easily<a>activate Google Analytics</a> for Web Stories.","web-stories"),SITE_KIT_IN_USE:(0,r.__)("<b>Note: </b>If Site Kit is active, it will be used to set up Google Analytics by default. However, you can customize the behavior in case you need more flexibility.","web-stories"),ANALYTICS_DROPDOWN_LABEL:(0,r.__)("Analytics Type","web-stories"),ANALYTICS_DROPDOWN_PLACEHOLDER:(0,r.__)("Select Analytics Type","web-stories")},nd=[{value:Ii,label:(0,r.__)("Use Site Kit for analytics (default)","web-stories")},{value:Li,label:(0,r.__)("Use only Web Stories for analytics","web-stories")},{value:Ai,label:(0,r.__)("Use both","web-stories")}],rd=f.default.div.withConfig({displayName:"googleAnalytics__DropdownContainer",componentId:"sc-svg62t-1"})(["padding-top:12px;"]),ld=f.default.div.withConfig({displayName:"googleAnalytics__WarningContainer",componentId:"sc-svg62t-2"})(["display:flex;gap:8px;margin:14px auto;border:1px solid ",";border-radius:",";padding:8px;"],(({theme:e})=>e.colors.border.defaultNormal),(({theme:e})=>e.borders.radius.small)),sd=(0,f.default)(ed.default).withConfig({displayName:"googleAnalytics__WarningIcon",componentId:"sc-svg62t-3"})(["width:32px;height:100%;color:",";"],(({theme:e})=>e.colors.status.warning)),id=(0,f.default)(Na.Text.Paragraph).attrs({size:io.TextSize.Small}).withConfig({displayName:"googleAnalytics__Message",componentId:"sc-svg62t-4"})(["max-width:calc(100% - 40px);"]);function cd(e){return(0,v.trackClick)(e,"click_ga4_docs")}function dd(e){return(0,v.trackClick)(e,"click_ua_deprecation_docs")}function ud(e){return e.preventDefault()}function md(e){return(0,v.trackClick)(e,"click_analytics_docs")}function pd(e){return(0,v.trackClick)(e,"click_site_kit_link")}function fd(e){return(0,v.trackClick)(e,"click_auto_analytics_link")}const bd=function GoogleAnalyticsSettings(e){const t=(0,l.c)(84),{googleAnalyticsId:a,handleUpdateAnalyticsId:o,usingLegacyAnalytics:s,handleMigrateLegacyAnalytics:i,siteKitStatus:c,googleAnalyticsHandler:d,handleUpdateGoogleAnalyticsHandler:u}=e;let m;t[0]!==c?(m=void 0===c?{}:c,t[0]=c,t[1]=m):m=t[1];const p=m,[f,b]=(0,y.useState)(a),[h,g]=(0,y.useState)(d),[_,S]=(0,y.useState)(""),E=f!==a&&!_,w=!E,{analyticsActive:T,installed:C,analyticsLink:k}=p;let I,L,A,x,O,D;t[2]!==a||t[3]!==b?(I=()=>{b(a)},t[2]=a,t[3]=b,t[4]=I):I=t[4],t[5]!==a?(L=[a],t[5]=a,t[6]=L):L=t[6],(0,y.useEffect)(I,L),t[7]!==d||t[8]!==g?(A=()=>{g(d)},t[7]=d,t[8]=g,t[9]=A):A=t[9],t[10]!==d?(x=[d],t[10]=d,t[11]=x):x=t[11],(0,y.useEffect)(A,x),t[12]!==b||t[13]!==S?(O=e=>{const{value:t}=e.target;b(t),0===t.length||function(e=""){return Boolean(e.toLowerCase().match(td))}(t)?S(""):S(od.INPUT_ERROR)},t[12]=b,t[13]=S,t[14]=O):O=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?(D=[],t[15]=D):D=t[15];const N=(0,y.useCallback)(O,D);let P,R;t[16]!==u||t[17]!==g?(P=e=>{g(e),u(e)},t[16]=u,t[17]=g,t[18]=P):P=t[18],t[19]!==u?(R=[u],t[19]=u,t[20]=R):R=t[20];const M=(0,y.useCallback)(P,R);let B,z;t[21]!==f||t[22]!==E||t[23]!==o?(B=()=>{E&&o(f)},z=[E,f,o],t[21]=f,t[22]=E,t[23]=o,t[24]=B,t[25]=z):(B=t[24],z=t[25]);const F=(0,y.useCallback)(B,z);let U,G;t[26]!==F?(U=e=>{"Enter"===e.key&&(e.preventDefault(),F())},G=[F],t[26]=F,t[27]=U,t[28]=G):(U=t[27],G=t[28]);const H=(0,y.useCallback)(U,G);let j,q;t[29]!==i?(j=e=>{e.preventDefault(),i(),(0,v.trackEvent)("migrate_story_auto_analytics")},q=[i],t[29]=i,t[30]=j,t[31]=q):(j=t[30],q=t[31]);const V=(0,y.useCallback)(j,q);let W;t[32]===Symbol.for("react.memo_cache_sentinel")?(W=[],t[32]=W):W=t[32];const $=(0,y.useCallback)(fd,W);let K;t[33]===Symbol.for("react.memo_cache_sentinel")?(K=[],t[33]=K):K=t[33];const X=(0,y.useCallback)(pd,K);let Y;t[34]===Symbol.for("react.memo_cache_sentinel")?(Y=[],t[34]=Y):Y=t[34];const J=(0,y.useCallback)(md,Y);let Z,Q;t[35]!==T||t[36]!==k||t[37]!==C||t[38]!==X?(Z=()=>T?null:n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:k,rel:"noreferrer",target:"_blank",size:io.TextSize.Small,onClick:X})}},C?od.SITE_KIT_INSTALLED:od.SITE_KIT_NOT_INSTALLED),Q=[T,C,k,X],t[35]=T,t[36]=k,t[37]=C,t[38]=X,t[39]=Z,t[40]=Q):(Z=t[39],Q=t[40]);const ee=(0,y.useMemo)(Z,Q);let te,ae,oe,ne,re,le;t[41]!==s?(te=s&&n.createElement(ad,{notificationCount:1,isSmall:!0}),t[41]=s,t[42]=te):te=t[42],t[43]!==te?(ae=n.createElement(Yi,{htmlFor:"gaTrackingID",as:"h3"},od.SECTION_HEADING,te),t[43]=te,t[44]=ae):ae=t[44],t[45]!==ee?(oe=n.createElement(tc,{size:io.TextSize.Small},ee),t[45]=ee,t[46]=oe):oe=t[46],t[47]!==V||t[48]!==$||t[49]!==s?(ne=s&&n.createElement(n.Fragment,null,n.createElement(tc,{size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:"https://wp.stories.google/docs/seo/",rel:"noreferrer",target:"_blank",size:io.TextSize.Small,onClick:$})}},(0,r.__)("An improved analytics configuration is now available. <a>Learn more</a>.","web-stories"))),n.createElement(tc,{size:io.TextSize.Small},n.createElement(mc,{type:Ft.ButtonType.Secondary,size:Ft.ButtonSize.Small,onClick:V},(0,r.__)("Migrate","web-stories")))),t[47]=V,t[48]=$,t[49]=s,t[50]=ne):ne=t[50],t[51]!==ae||t[52]!==oe||t[53]!==ne?(re=n.createElement("div",null,ae,oe,ne),t[51]=ae,t[52]=oe,t[53]=ne,t[54]=re):re=t[54],t[55]===Symbol.for("react.memo_cache_sentinel")?(le=n.createElement(bc,{htmlFor:"gaTrackingId"},od.ARIA_LABEL),t[55]=le):le=t[55];const se=Boolean(_);let ie,ce,de,ue,me,pe,fe,be;return t[56]!==f||t[57]!==H||t[58]!==_||t[59]!==N||t[60]!==se?(ie=n.createElement(hc,{"aria-label":od.ARIA_LABEL,id:"gaTrackingId",value:f,onChange:N,onKeyDown:H,placeholder:od.PLACEHOLDER,hasError:se,hint:_}),t[56]=f,t[57]=H,t[58]=_,t[59]=N,t[60]=se,t[61]=ie):ie=t[61],t[62]!==w||t[63]!==F?(ce=n.createElement(mc,{type:Ft.ButtonType.Secondary,size:Ft.ButtonSize.Small,disabled:w,onClick:F},od.SUBMIT_BUTTON),t[62]=w,t[63]=F,t[64]=ce):ce=t[64],t[65]!==ie||t[66]!==ce?(de=n.createElement(fc,null,le,ie,ce),t[65]=ie,t[66]=ce,t[67]=de):de=t[67],t[68]!==J?(ue=n.createElement(ac,{size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:od.CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:io.TextSize.Small,onClick:J})}},od.CONTEXT)),t[68]=J,t[69]=ue):ue=t[69],t[70]!==T||t[71]!==h||t[72]!==M?(me=T&&n.createElement(n.Fragment,null,n.createElement(ac,{size:io.TextSize.Small},n.createElement(Nn.default,null,od.SITE_KIT_IN_USE)),n.createElement(rd,null,n.createElement(Xn.default,{id:"analyticsType",ariaLabel:od.ANALYTICS_DROPDOWN_LABEL,placeholder:od.ANALYTICS_DROPDOWN_PLACEHOLDER,options:nd,onMenuItemClick:(e,t)=>{M(t)},selectedValue:h}))),t[70]=T,t[71]=h,t[72]=M,t[73]=me):me=t[73],t[74]!==a?(pe=a.startsWith("UA-")?n.createElement(ld,null,n.createElement(sd,{"aria-hidden":!0}),n.createElement(id,null,n.createElement(Nn.default,{mapping:{a:n.createElement(ca.Link,{href:(0,r.__)("https://support.google.com/analytics/answer/11583528?hl=en","web-stories"),rel:"noreferrer",target:"_blank",size:io.TextSize.Small,onClick:dd}),a2:n.createElement(ca.Link,{href:(0,r.__)("https://support.google.com/analytics/answer/10089681?hl=en","web-stories"),rel:"noreferrer",target:"_blank",size:io.TextSize.Small,onClick:cd})}},(0,r.__)("Universal Analytics <a>stopped processing new visits</a> starting <b>July 1, 2023</b>. We recommend switching to <a2>Google Analytics 4</a2> (GA4).","web-stories")))):null,t[74]=a,t[75]=pe):pe=t[75],t[76]!==de||t[77]!==ue||t[78]!==me||t[79]!==pe?(fe=n.createElement("div",null,de,ue,me,pe),t[76]=de,t[77]=ue,t[78]=me,t[79]=pe,t[80]=fe):fe=t[80],t[81]!==re||t[82]!==fe?(be=n.createElement(Xi,{onSubmit:ud},re,fe),t[81]=re,t[82]=fe,t[83]=be):be=t[83],be};var hd=a(16015);function gd(e,t="https"){return/^(http:\/\/|https:\/\/|tel:|mailto:)/.test(e)?e:`${t}://${e}`}var _d=a(70716);function ConfirmationDialog(e){const t=(0,l.c)(18),{onClose:a,onPrimary:o}=e;let s,c,d,u,m,p,b,h,g,_;return t[0]===Symbol.for("react.memo_cache_sentinel")?(s=(0,r.__)("Delete Font","web-stories"),t[0]=s):s=t[0],t[1]!==a?(c=()=>a(),t[1]=a,t[2]=c):c=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(d=(0,r.__)("Cancel","web-stories"),t[3]=d):d=t[3],t[4]!==c?(u=n.createElement(zt.Button,{type:Ft.ButtonType.Tertiary,size:Ft.ButtonSize.Small,onClick:c},d),t[4]=c,t[5]=u):u=t[5],t[6]!==o?(m=()=>o(),t[6]=o,t[7]=m):m=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.__)("Delete Font","web-stories"),t[8]=p):p=t[8],t[9]!==m?(b=n.createElement(zt.Button,{type:Ft.ButtonType.Primary,size:Ft.ButtonSize.Small,onClick:m},p),t[9]=m,t[10]=b):b=t[10],t[11]!==u||t[12]!==b?(h=n.createElement(n.Fragment,null,u,b),t[11]=u,t[12]=b,t[13]=h):h=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(g=n.createElement(Na.Text.Paragraph,{size:io.TextSize.Small},(0,r.__)("Deleting a font will delete it from every previous story it’s in. Would you like to proceed?","web-stories")),t[14]=g):g=t[14],t[15]!==a||t[16]!==h?(_=n.createElement(f.ThemeProvider,{theme:i.theme},n.createElement(Aa.default,{isOpen:!0,onClose:a,title:s,actions:h},g)),t[15]=a,t[16]=h,t[17]=_):_=t[17],_}ConfirmationDialog.propTypes={onClose:h.func.isRequired,onPrimary:h.func.isRequired};const yd=ConfirmationDialog;const Sd=async function(e){const{load:t}=await Promise.all([a.e(945),a.e(8635)]).then(a.bind(a,60945)),o=await t(e);return{name:o.names.fullName.en,family:o.names.fullName.en,weights:[400],styles:["regular"],variants:[[0,400]],service:"custom",fallbacks:["sans-serif"],metrics:{upm:o.unitsPerEm,asc:o.ascender,des:o.descender,tAsc:o.tables.os2.sTypoAscender,tDes:o.tables.os2.sTypoDescender,tLGap:o.tables.os2.sTypoLineGap,wAsc:o.tables.os2.usWinAscent,wDes:o.tables.os2.usWinDescent,xH:o.tables.os2.sxHeight,capH:o.tables.os2.sCapHeight,yMin:o.tables.head.yMin,yMax:o.tables.head.yMax,hAsc:o.tables.hhea.ascender,hDes:o.tables.hhea.descender,lGap:o.tables.hhea.lineGap}}},Ed={ADD_CONTEXT:(0,r.__)("Add and manage your custom and brand fonts via link here. They’ll appear in your font list in the editor.","web-stories"),REMOVAL:(0,r.__)("Removing a font from this settings page will remove it from your font list in all stories.","web-stories"),SECTION_HEADING:(0,r.__)("Custom Fonts","web-stories"),LABEL:(0,r.__)("Insert Font URL","web-stories"),INPUT_CONTEXT:(0,r.__)("Insert a public URL to a font file. Allowed formats are .otf, .ttf, .woff.","web-stories"),INPUT_ERROR:(0,r.__)("Invalid URL format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Add Font","web-stories"),FONTS_HEADING:(0,r.__)("Current Fonts","web-stories"),FONTS_CONTEXT:(0,r.__)("Deleting fonts will delete them from your in-editor font list and all previous stories.","web-stories")},wd=(0,f.default)(mc).withConfig({displayName:"customFonts__AddButton",componentId:"sc-4md0nd-0"})(["min-width:90px;margin-top:32px;"]),vd=f.default.div.withConfig({displayName:"customFonts__InputsWrapper",componentId:"sc-4md0nd-1"})(["margin-top:8px;"]),Td=f.default.div.withConfig({displayName:"customFonts__FontsWrapper",componentId:"sc-4md0nd-2"})(["margin-top:34px;"]),Cd=(0,f.default)(Na.Text.Span).withConfig({displayName:"customFonts__ListHeading",componentId:"sc-4md0nd-3"})(["margin-bottom:10px;display:inline-block;"]),kd=f.default.div.withConfig({displayName:"customFonts__FontsList",componentId:"sc-4md0nd-4"})(["padding:12px 0;border:",";:focus-within{","}"],(({theme:e})=>`1px solid ${e.colors.divider.primary}`),(({theme:e})=>$t.focusCSS(e.colors.border.focus))),Id=(0,f.default)(zt.Button).withConfig({displayName:"customFonts__DeleteButton",componentId:"sc-4md0nd-5"})(["visibility:hidden;opacity:0;transition:visibility 0s,opacity ease-in-out 300ms;&:focus{","}"],(({theme:e})=>$t.focusCSS(e.colors.border.focus))),Ld=f.default.div.withConfig({displayName:"customFonts__FontRow",componentId:"sc-4md0nd-6"})(["padding:0 12px;display:flex;height:32px;width:100%;justify-content:space-between;transition:background-color ease-in-out 300ms;&[aria-selected='true'],&:hover,&:focus{background-color:",";button{visibility:visible;opacity:1;}}"],(({theme:e})=>e.colors.bg.secondary)),Ad=f.default.div.withConfig({displayName:"customFonts__FontData",componentId:"sc-4md0nd-7"})(["line-height:32px;white-space:nowrap;display:flex;font-size:14px;max-width:calc(100% - 32px);align-items:center;"]),xd=(0,f.default)(Na.Text.Paragraph).attrs({as:"span"}).withConfig({displayName:"customFonts__StyledText",componentId:"sc-4md0nd-8"})([""]),Od=(0,f.default)(xd).withConfig({displayName:"customFonts__FontUrl",componentId:"sc-4md0nd-9"})(["color:",";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(({theme:e})=>e.colors.fg.tertiary)),Dd=f.default.div.withConfig({displayName:"customFonts__Divider",componentId:"sc-4md0nd-10"})(["width:4px;height:4px;background-color:",";border-radius:",";margin:0 6px;align-self:center;"],(({theme:e})=>e.colors.standard.black),(({theme:e})=>e.borders.radius.round)),Nd=[".otf",".ttf",".woff"];const Pd=function CustomFontsSettings({customFonts:e=[],addCustomFont:t,deleteCustomFont:a}){const o=(0,vr.default)(),[l,s]=(0,y.useState)(""),[i,c]=(0,y.useState)(""),[d,u]=(0,y.useState)(!1),[m,p]=(0,y.useState)(null),f=!i&&l,b=(0,y.useRef)(null),h=(0,y.useRef)([]),[g,_]=(0,y.useState)(0),[S,E]=(0,y.useState)(),{showSnackbar:w}=(0,Br.useSnackbar)(),T=(0,y.useCallback)((e=>{const{value:t}=e.target;s(t),0===t.length||function(e){try{return new URL(e),!0}catch{return!1}}(gd(t))?c(""):c(Ed.INPUT_ERROR)}),[]),C=(0,y.useCallback)((async()=>{try{await a(m),o((0,r.__)("Font deleted","web-stories"))}catch(e){(0,v.trackError)("remove_custom_font",e?.message),w({"aria-label":yi.REMOVE_FONT.MESSAGE,message:yi.REMOVE_FONT.MESSAGE,dismissible:!0})}finally{p(null),u(!1),c("")}}),[a,m,w,o]),k=(0,y.useCallback)((async()=>{if(f){const e=gd(l);try{await fetch(e,{method:"HEAD"})}catch(e){return(0,v.trackError)("add_custom_font",e?.message),void c((0,r.__)("Please ensure correct CORS settings for allowing font usage on this site.","web-stories"))}let a;try{if((0,v.trackEvent)("add_custom_font",{url:e}),a=await Sd(e),!a.family)return void c((0,r.__)("Something went wrong, please try again.","web-stories"))}catch(e){return(0,v.trackError)("add_custom_font",e?.message),void c((0,Z.default)(/* translators: %s: list of allowed font types. */ /* translators: %s: list of allowed font types. */
(0,r.__)("Getting font data failed, please ensure the URL points directly to a %s file.","web-stories"),(0,hd.default)(Nd)))}try{await t({...a,url:e}),s("")}catch(e){(0,v.trackError)("add_custom_font",e?.message),c((0,Z.default)(/* translators: %s: font name. */ /* translators: %s: font name. */
(0,r.__)("A font with the name %s already exists.","web-stories"),a.family))}}}),[t,f,l]),I=(0,y.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),k())}),[k]);(0,y.useEffect)((()=>{const e=h.current[`row-${g}`];e&&(e.focus(),E(e.id))}),[g]);const L=(0,y.useCallback)((t=>{const{key:a}=t;"ArrowUp"===a?(t.preventDefault(),_((e=>Math.max(0,e-1)))):"ArrowDown"===a&&(t.preventDefault(),_((t=>Math.min(e.length-1,t+1))))}),[e]);return n.createElement(Xi,{onSubmit:e=>e.preventDefault()},n.createElement("div",null,n.createElement(Yi,{as:"h3"},Ed.SECTION_HEADING),n.createElement(tc,{size:io.TextSize.Small},Ed.ADD_CONTEXT),n.createElement(tc,{size:io.TextSize.Small},Ed.REMOVAL)),n.createElement(vd,null,n.createElement(fc,null,n.createElement(hc,{value:l,onChange:T,onKeyDown:I,hasError:Boolean(i),hint:i,label:Ed.LABEL}),n.createElement(wd,{type:Ft.ButtonType.Primary,size:Ft.ButtonSize.Small,disabled:!f,onClick:k},Ed.SUBMIT_BUTTON)),n.createElement(ac,{size:io.TextSize.Small},Ed.INPUT_CONTEXT),e?.length>0&&n.createElement(Td,null,n.createElement(Cd,null,Ed.FONTS_HEADING),n.createElement(kd,{ref:b,role:"listbox",tabIndex:0,onKeyDown:L,"aria-activedescendant":S||e[0]?.id},e.map((({id:e,family:t,url:a},o)=>{return n.createElement(Ld,{id:`font-${e}`,ref:e=>h.current[`row-${o}`]=e,key:t,role:"option",onClick:()=>{_(o)},"aria-selected":(l=o,g===l)},n.createElement(Ad,null,n.createElement(xd,null,t),n.createElement(Dd,null),n.createElement(Od,null,a)),n.createElement(Tooltip,{hasTail:!0,title:(0,r.__)("Delete font","web-stories")},n.createElement(Id,{"aria-label":(0,Z.default)(/*translators: %s: font family. */ /*translators: %s: font family. */
(0,r.__)("Delete %s","web-stories"),t),type:Ft.ButtonType.Tertiary,size:Ft.ButtonSize.Small,variant:Ft.ButtonVariant.Square,onClick:()=>{p(e),u(!0)}},n.createElement(_d.default,null))));var l}))),n.createElement(ac,{size:io.TextSize.Small},Ed.FONTS_CONTEXT))),d&&n.createElement(yd,{onClose:()=>u(!1),onPrimary:C}))};var Rd=a(19071);const Md=/[\w-]+\.myshopify\.com/i;function Bd(e=""){return Boolean(e.toLowerCase().match(Md))}const zd=f.default.div.withConfig({displayName:"shopify__Loading",componentId:"sc-ur0gaq-0"})(["position:relative;margin-top:10px;"]),Fd=f.default.div.withConfig({displayName:"shopify__Spinner",componentId:"sc-ur0gaq-1"})(["position:absolute;top:0;"]),Ud={HOST_CONTEXT:(0,Z.default)(/* translators: 1: first example. 2: second example. */ /* translators: 1: first example. 2: second example. */
(0,r.__)("Without <code>%1$s</code> or <code>%2$s</code>. Example: %3$s. <a>Find your URL</a>.","web-stories"),"https://","www.","yourstore.myshopify.com"),HOST_CONTEXT_LINK:(0,r.__)("https://help.shopify.com/en/manual/domains","web-stories"),HOST_PLACEHOLDER:(0,r.__)("Enter your .myshopify.com domain","web-stories"),HOST_LABEL:(0,r.__)("Shopify Domain","web-stories"),ACCESS_TOKEN_CONTEXT:(0,r.__)("<a>Learn how to get one</a>.","web-stories"),ACCESS_TOKEN_CONTEXT_LINK:(0,r.__)("https://help.shopify.com/en/manual/apps/custom-apps#get-the-api-credentials-for-a-custom-app","web-stories"),ACCESS_TOKEN_PLACEHOLDER:(0,r.__)("Enter your API access token","web-stories"),ACCESS_TOKEN_LABEL:(0,r.__)("Storefront API Access Token","web-stories"),INPUT_ERROR:(0,r.__)("Invalid format","web-stories"),SUBMIT_BUTTON:(0,r.__)("Save","web-stories"),CONNECTION_TEST_BUTTON:(0,r.__)("Test connection","web-stories"),CONNECTION_CHECKING:(0,r.__)("Testing connection…","web-stories"),CONNECTION_SUCCESS:(0,r.__)("Connection successful","web-stories"),CONNECTION_ERROR_DEFAULT:(0,r.__)("Connection failed. Please try again.","web-stories")};const Gd=function ShopifySettings({host:e,accessToken:t,handleUpdateHost:a,handleUpdateAccessToken:o}){const l=(0,vr.default)(),[s,i]=(0,y.useState)(e),[c,d]=(0,y.useState)(""),u=s!==e&&!c,m=!u,[p,f]=(0,y.useState)(t),[b,h]=(0,y.useState)(""),g=p!==t&&!b,_=!g,{apiCallbacks:{getProducts:S}}=w(),[E,T]=(0,y.useState)(!1),[C,k]=(0,y.useState)(""),[I,L]=(0,y.useState)(!1);(0,y.useEffect)((()=>{i(e)}),[e]),(0,y.useEffect)((()=>{f(t)}),[t]);const A=(0,y.useCallback)((e=>{const{value:t}=e.target;i(t),0===t.length||Bd(t)?d(""):d(Ud.INPUT_ERROR)}),[]),x=(0,y.useCallback)((e=>{const{value:t}=e.target;Bd(t)&&i(t.match(Md)[0])}),[]),O=(0,y.useCallback)((()=>{u&&a(s)}),[u,s,a]),D=(0,y.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),O())}),[O]),N=(0,y.useCallback)((e=>{const{value:t}=e.target;h(""),f(t)}),[]),P=(0,y.useCallback)((()=>{g&&o(p)}),[g,p,o]),R=(0,y.useCallback)((e=>{"Enter"===e.key&&(e.preventDefault(),P())}),[P]),M=(0,y.useCallback)((async()=>{L(!1),T(!0),l(Ud.CONNECTION_CHECKING),(0,v.trackEvent)("test_shopping_connection");try{await S((new Date).getTime()),k(Ud.CONNECTION_SUCCESS),l(Ud.CONNECTION_SUCCESS)}catch(e){(0,v.trackError)("test_shopping_connection",e?.message),L(!0),k(Ud.CONNECTION_ERROR_DEFAULT),l(Ud.CONNECTION_ERROR_DEFAULT)}finally{T(!1)}}),[S,l]),B=s&&!c&&p&&!b&&!E,z=(0,y.useCallback)((e=>(0,v.trackClick)(e,"click_shopify_docs")),[]);return n.createElement(n.Fragment,null,n.createElement(fc,null,n.createElement(bc,{htmlFor:"shopifyHost"},Ud.HOST_LABEL),n.createElement(hc,{"aria-label":Ud.HOST_LABEL,id:"shopifyHost",name:"shopifyHost","data-testid":"shopifyHost",value:s,onChange:A,onKeyDown:D,onBlur:x,placeholder:Ud.HOST_PLACEHOLDER,hasError:Boolean(c),hint:c}),n.createElement(mc,{type:Ft.ButtonType.Secondary,size:Ft.ButtonSize.Small,disabled:m,onClick:O,"data-testid":"shopifyHostButton"},Ud.SUBMIT_BUTTON)),n.createElement(ac,{size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:Ud.HOST_CONTEXT_LINK,rel:"noreferrer",target:"_blank",onClick:z,size:io.TextSize.Small})}},Ud.HOST_CONTEXT)),n.createElement(fc,null,n.createElement(bc,{htmlFor:"shopifyAccessToken"},Ud.ACCESS_TOKEN_LABEL),n.createElement(hc,{id:"shopifyAccessToken","aria-label":Ud.ACCESS_TOKEN_LABEL,name:"shopifyAccessToken","data-testid":"shopifyAccessToken",value:p,onChange:N,onKeyDown:R,placeholder:Ud.ACCESS_TOKEN_PLACEHOLDER,hasError:Boolean(b),hint:b}),n.createElement(mc,{type:Ft.ButtonType.Secondary,size:Ft.ButtonSize.Small,disabled:_,onClick:P,"data-testid":"shopifyAccessTokenButton"},Ud.SUBMIT_BUTTON)),n.createElement(ac,{size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:Ud.ACCESS_TOKEN_CONTEXT_LINK,rel:"noreferrer",target:"_blank",size:io.TextSize.Small})}},Ud.ACCESS_TOKEN_CONTEXT)),n.createElement(pc,{onFocus:()=>k(""),type:Ft.ButtonType.Secondary,size:Ft.ButtonSize.Small,disabled:!B,onClick:M},E?Ud.CONNECTION_CHECKING:Ud.CONNECTION_TEST_BUTTON),E&&n.createElement(zd,null,n.createElement(Fd,null,n.createElement(Rd.default,{size:24}))),C&&n.createElement(Qi,{"data-testid":"api-status","aria-label":(0,r.__)("API connection status","web-stories"),hasError:I,size:io.TextSize.Small},C))},Hd={SLOT_ID_LABEL:(0,r.__)("Shopping provider","web-stories")};function ShoppingProviderDropDown(e){const t=(0,l.c)(8),{vendors:a,shoppingProvider:o,handleUpdate:r}=e;let s,i,c;return t[0]!==a?(s=[],Object.entries(a).forEach((e=>{const[t,a]=e;return s.push({label:a,value:t})})),t[0]=a,t[1]=s):s=t[1],t[2]!==r?(i=(e,t)=>r(t),t[2]=r,t[3]=i):i=t[3],t[4]!==s||t[5]!==o||t[6]!==i?(c=n.createElement(Xn.default,{ariaLabel:Hd.SLOT_ID_LABEL,options:s,selectedValue:o,onMenuItemClick:i,fillWidth:!0}),t[4]=s,t[5]=o,t[6]=i,t[7]=c):c=t[7],c}ShoppingProviderDropDown.propTypes={vendors:h.object,handleUpdate:h.func,shoppingProvider:h.oneOf(Object.values(ki))};const jd=ShoppingProviderDropDown,qd={SECTION_HEADING:(0,r.__)("Shopping","web-stories"),SHOPPING_PROVIDER_HELPER_MESSAGE:(0,r.__)("Once configured you can add products from this provider.","web-stories"),HELPER_MESSAGE:(0,r.__)("Connect your store so you can easily add products to your stories.","web-stories"),WOOCOMMERCE_INSTALL:(0,r.__)("Install <a>WooCommerce</a> to easily add shoppable products to Web Stories.","web-stories"),WOOCOMMERCE_ACTIVE:(0,r.__)("Activate <a>WooCommerce</a> to easily add shoppable products to Web Stories.","web-stories"),WOOCOMMERCE_MANAGE:(0,r.__)("Manage products in <a>WooCommerce</a> to make them available in Web Stories.","web-stories")};function Shopping(e){const t=(0,l.c)(36),{updateSettings:a,shoppingProvider:o,shopifyHost:r,shopifyAccessToken:s,vendors:i,woocommerce:c}=e;let d,u;t[0]!==a?(d=e=>{a({shoppingProvider:e}),(0,v.trackEvent)("change_shopping_provider",{name:e})},u=[a],t[0]=a,t[1]=d,t[2]=u):(d=t[1],u=t[2]);const m=(0,y.useCallback)(d,u);let p,f;t[3]!==a?(p=e=>a({shopifyHost:e}),f=[a],t[3]=a,t[4]=p,t[5]=f):(p=t[4],f=t[5]);const b=(0,y.useCallback)(p,f);let h,g;t[6]!==a?(h=e=>a({shopifyAccessToken:e}),g=[a],t[6]=a,t[7]=h,t[8]=g):(h=t[7],g=t[8]);const _=(0,y.useCallback)(h,g);let S;t[9]===Symbol.for("react.memo_cache_sentinel")?(S=[],t[9]=S):S=t[9];const E=(0,y.useCallback)(Wd,S),{canManage:w,installed:T,active:C,link:k}=c;let I,L,A,x,O,D,N,P,R,M;return!1===T?I=qd.WOOCOMMERCE_INSTALL:!1===C?I=qd.WOOCOMMERCE_ACTIVE:!0===w&&(I=qd.WOOCOMMERCE_MANAGE),t[10]===Symbol.for("react.memo_cache_sentinel")?(L=n.createElement(Yi,null,qd.SECTION_HEADING),A=n.createElement(ac,{size:io.TextSize.Small},qd.HELPER_MESSAGE),t[10]=L,t[11]=A):(L=t[10],A=t[11]),t[12]!==k||t[13]!==E||t[14]!==o||t[15]!==I?(x=o===ki.WOOCOMMERCE&&I&&k&&n.createElement(ac,{"data-testid":"woocommerceMessage",size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{a:n.createElement(Ji,{href:k,rel:"noreferrer",target:"_blank",size:io.TextSize.Small,onClick:E})}},I)),t[12]=k,t[13]=E,t[14]=o,t[15]=I,t[16]=x):x=t[16],t[17]!==x?(O=n.createElement("div",null,L,A,x),t[17]=x,t[18]=O):O=t[18],t[19]!==m||t[20]!==o||t[21]!==i?(D=n.createElement(jd,{vendors:i,shoppingProvider:o,handleUpdate:m}),t[19]=m,t[20]=o,t[21]=i,t[22]=D):D=t[22],t[23]===Symbol.for("react.memo_cache_sentinel")?(N=n.createElement(ac,{size:io.TextSize.Small},qd.SHOPPING_PROVIDER_HELPER_MESSAGE),t[23]=N):N=t[23],t[24]!==_||t[25]!==b||t[26]!==s||t[27]!==r||t[28]!==o?(P=o===ki.SHOPIFY&&n.createElement(Gd,{handleUpdateHost:b,handleUpdateAccessToken:_,host:r,accessToken:s}),t[24]=_,t[25]=b,t[26]=s,t[27]=r,t[28]=o,t[29]=P):P=t[29],t[30]!==D||t[31]!==P?(R=n.createElement("div",null,D,N,P),t[30]=D,t[31]=P,t[32]=R):R=t[32],t[33]!==O||t[34]!==R?(M=n.createElement(gc,{onSubmit:Vd},O,R),t[33]=O,t[34]=R,t[35]=M):M=t[35],M}function Vd(e){return e.preventDefault()}function Wd(e){return(0,v.trackClick)(e,"click_woocommerce_link")}Shopping.propTypes={vendors:h.object.isRequired,woocommerce:h.object,updateSettings:h.func.isRequired,shoppingProvider:h.string,shopifyHost:h.string,shopifyAccessToken:h.string};const $d=Shopping;var Kd=a(56438),Xd=a(43250);const Yd={MIN:1,MAX:20},Jd={CONTEXT:(0,r.__)("All new stories will be set to this page advancement setting. Control whether a story auto-advances between pages, or whether the reader has to manually tap to advance.","web-stories"),SECTION_HEADING:(0,r.__)("Default Page Advancement","web-stories"),LABEL_AUTO:(0,r.__)("Auto","web-stories"),LABEL_MANUAL:(0,r.__)("Manual","web-stories"),SWITCH_LABEL:(0,r.__)("Page Advancement","web-stories"),INPUT_LABEL:(0,r.__)("Default page duration in seconds","web-stories"),INPUT_SUFFIX:(0,r.__)("Duration","web-stories"),INPUT_HELPER:(0,Z.default)(/* translators: 1: minimum duration. 2: maximum duration. */ /* translators: 1: minimum duration. 2: maximum duration. */
(0,r._n)("Duration between %1$d and %2$d second.","Duration between %1$d and %2$d seconds.",Yd.MAX,"web-stories"),Yd.MIN,Yd.MAX)},Zd=f.default.div.withConfig({displayName:"pageAdvancement__InputsWrapper",componentId:"sc-9snl1y-0"})(["margin-top:8px;"]),Qd=(0,f.default)(Kd.default).withConfig({displayName:"pageAdvancement__StyledSwitch",componentId:"sc-9snl1y-1"})(["width:186px;"]);function PageAdvancementSettings(e){const t=(0,l.c)(26),{updateSettings:a,autoAdvance:o,defaultPageDuration:s}=e,[i,c]=(0,y.useState)(o);let d,u;t[0]!==c||t[1]!==o||t[2]!==a?(d=()=>{(0,v.trackEvent)("change_auto_advance",{value:!o}),c(!o),a({autoAdvance:!o})},t[0]=c,t[1]=o,t[2]=a,t[3]=d):d=t[3],t[4]!==o||t[5]!==a?(u=[o,a],t[4]=o,t[5]=a,t[6]=u):u=t[6];const m=(0,y.useCallback)(d,u);let p,f,b,h;t[7]!==c||t[8]!==o?(p=()=>{c(o)},t[7]=c,t[8]=o,t[9]=p):p=t[9],t[10]!==o?(f=[o],t[10]=o,t[11]=f):f=t[11],(0,y.useEffect)(p,f),t[12]!==a?(b=(e,t)=>{a({defaultPageDuration:t}),(0,v.trackEvent)("change_default_page_duration",{value:t})},h=[a],t[12]=a,t[13]=b,t[14]=h):(b=t[13],h=t[14]);const g=(0,y.useCallback)(b,h);let _,S,E,w;return t[15]===Symbol.for("react.memo_cache_sentinel")?(_=n.createElement("div",null,n.createElement(Yi,{as:"h3"},Jd.SECTION_HEADING),n.createElement(tc,{size:io.TextSize.Small},Jd.CONTEXT)),t[15]=_):_=t[15],t[16]!==i||t[17]!==m?(S=n.createElement(fc,null,n.createElement(Qd,{groupLabel:Jd.SWITCH_LABEL,name:"page-advancement-switch",value:i,onLabel:Jd.LABEL_AUTO,offLabel:Jd.LABEL_MANUAL,onChange:m,darkTheme:!1})),t[16]=i,t[17]=m,t[18]=S):S=t[18],t[19]!==i||t[20]!==s||t[21]!==g?(E=i&&n.createElement(n.Fragment,null,n.createElement(fc,null,n.createElement(Xd.default,{unit:` ${(0,r.__)("seconds","web-stories")}`,suffix:Jd.INPUT_SUFFIX,value:s,onChange:g,"aria-label":Jd.INPUT_SUFFIX,min:Yd.MIN,max:Yd.MAX})),n.createElement(ac,{size:io.TextSize.Small},Jd.INPUT_HELPER)),t[19]=i,t[20]=s,t[21]=g,t[22]=E):E=t[22],t[23]!==S||t[24]!==E?(w=n.createElement(gc,{onSubmit:eu},_,n.createElement(Zd,null,S,E)),t[23]=S,t[24]=E,t[25]=w):w=t[25],w}function eu(e){return e.preventDefault()}PageAdvancementSettings.propTypes={updateSettings:h.func.isRequired,autoAdvance:h.bool.isRequired,defaultPageDuration:h.number.isRequired};const tu=PageAdvancementSettings,au=f.default.div.withConfig({displayName:"editorSettings__BodyViewOptionsHeader",componentId:"sc-1yxjpva-0"})([""]);function ou(e){const{height:t,width:a}=e;return t>=96&&a>=96}function nu(e){const{actions:t,state:a}=e,{fontsApi:o,settingsApi:n,pagesApi:r,mediaApi:l,publisherLogosApi:s}=t,{addCustomFont:i,deleteCustomFont:c,fetchCustomFonts:d}=o,{fetchSettings:u,updateSettings:m}=n,{searchPages:p,getPageById:f}=r,{uploadMedia:b}=l,{fetchPublisherLogos:h,addPublisherLogo:g,removePublisherLogo:_,setPublisherLogoAsDefault:y}=s,{settings:S,media:E,publisherLogos:w,customFonts:v}=a,{googleAnalyticsId:T,usingLegacyAnalytics:C,adSensePublisherId:k,adSenseSlotId:I,adManagerSlotId:L,mgidWidgetId:A,adNetwork:x,videoCache:O,dataRemoval:D,archive:N,archivePageId:P,shoppingProvider:R,shopifyHost:M,shopifyAccessToken:B,autoAdvance:z,defaultPageDuration:F,googleAnalyticsHandler:U}=S,{isLoading:G,newlyCreatedMediaIds:H}=E,{publisherLogos:j}=w;return{fetchSettings:u,updateSettings:m,googleAnalyticsId:T,usingLegacyAnalytics:C,adSensePublisherId:k,adSenseSlotId:I,adManagerSlotId:L,mgidWidgetId:A,adNetwork:x,uploadMedia:b,isMediaLoading:G,newlyCreatedMediaIds:H,videoCache:O,dataRemoval:D,archive:N,archivePageId:P,searchPages:p,getPageById:f,customFonts:v,addCustomFont:i,deleteCustomFont:c,fetchCustomFonts:d,fetchPublisherLogos:h,addPublisherLogo:g,removePublisherLogo:_,setPublisherLogoAsDefault:y,publisherLogos:j,shoppingProvider:R,shopifyHost:M,shopifyAccessToken:B,autoAdvance:z,defaultPageDuration:F,googleAnalyticsHandler:U}}const ru=function EditorSettings(){const e=(0,l.c)(103),{fetchSettings:t,updateSettings:a,googleAnalyticsId:o,usingLegacyAnalytics:s,adSensePublisherId:i,adSenseSlotId:c,adManagerSlotId:d,mgidWidgetId:u,adNetwork:m,uploadMedia:p,newlyCreatedMediaIds:f,isMediaLoading:b,videoCache:h,dataRemoval:g,archive:_,archivePageId:S,searchPages:E,getPageById:T,customFonts:C,addCustomFont:k,deleteCustomFont:I,fetchCustomFonts:L,publisherLogos:A,addPublisherLogo:x,fetchPublisherLogos:O,removePublisherLogo:D,setPublisherLogoAsDefault:N,shoppingProvider:P,shopifyHost:R,shopifyAccessToken:M,autoAdvance:B,defaultPageDuration:z,googleAnalyticsHandler:F}=Mi(nu),{capabilities:U,plugins:G,maxUpload:H,maxUploadFormatted:j,allowedImageMimeTypes:q,archiveURL:V,defaultArchiveURL:W,vendors:$}=w();let K;e[0]!==U?(K=void 0===U?{}:U,e[0]=U,e[1]=K):K=e[1];const{canUploadFiles:X,canManageSettings:Y}=K,{siteKit:J,woocommerce:Q}=G;let ee;e[2]!==J?(ee=void 0===J?{}:J,e[2]=J,e[3]=ee):ee=e[3];const te=ee;let ae;e[4]!==Q?(ae=void 0===Q?{}:Q,e[4]=Q,e[5]=ae):ae=e[5];const oe=ae,{disabled:ne,toggleWebStoriesTrackingOptIn:re,optedIn:le}=Gi(),{disabled:se,toggleWebStoriesMediaOptimization:ie,mediaOptimization:ce}=function(){const e=(0,l.c)(9),{showSnackbar:t}=(0,Br.useSnackbar)(),{currentUser:a,toggleWebStoriesMediaOptimization:o}=Mi(Bi),n=Boolean(a.data.meta?.webStoriesMediaOptimization);let r,s;e[0]!==n||e[1]!==t||e[2]!==o?(r=()=>{o(),(0,v.trackEvent)("video_optimization_optin",{status:n?"off":"on"}),t({"aria-label":_i.SETTINGS.UPDATED,message:_i.SETTINGS.UPDATED,dismissible:!0})},s=[n,t,o],e[0]=n,e[1]=t,e[2]=o,e[3]=r,e[4]=s):(r=e[3],s=e[4]);const i=(0,y.useCallback)(r,s);let c;return e[5]!==i||e[6]!==a.isUpdating||e[7]!==n?(c={mediaOptimization:n,disabled:a.isUpdating,toggleWebStoriesMediaOptimization:i},e[5]=i,e[6]=a.isUpdating,e[7]=n,e[8]=c):c=e[8],c}(),[de,ue]=(0,y.useState)("");let me,pe,fe,be,he,ge;e[6]!==Y||e[7]!==L||e[8]!==O||e[9]!==t?(me=()=>{Y&&(t(),O(),L())},pe=[t,O,Y,L],e[6]=Y,e[7]=L,e[8]=O,e[9]=t,e[10]=me,e[11]=pe):(me=e[10],pe=e[11]),(0,y.useEffect)(me,pe),e[12]!==x||e[13]!==f?(be=()=>{f.length>0&&x(f)},fe=[f,x],e[12]=x,e[13]=f,e[14]=fe,e[15]=be):(fe=e[14],be=e[15]),(0,y.useEffect)(be,fe),Wi(),e[16]!==a?(he=e=>a({googleAnalyticsId:e}),ge=[a],e[16]=a,e[17]=he,e[18]=ge):(he=e[17],ge=e[18]);const _e=(0,y.useCallback)(he,ge);let ye,Se;e[19]!==a?(ye=()=>a({usingLegacyAnalytics:!1}),Se=[a],e[19]=a,e[20]=ye,e[21]=Se):(ye=e[20],Se=e[21]);const Ee=(0,y.useCallback)(ye,Se);let we,ve;e[22]!==q||e[23]!==H||e[24]!==j||e[25]!==ue||e[26]!==p?(we=async e=>{let t,a,o;t=!0,a=!0,o=!1;const n=[];if(e.forEach((e=>{t=t&&e.size<=H;const o=q.includes(e.type);a=a&&o,o||n.push((0,qi.default)({src:URL.createObjectURL(e)}))})),!t){const t=1===e.length?(0,Z.default)((0,r.__)("Sorry, this file is too big. Make sure your logo is under %s.","web-stories"),j):(0,Z.default)((0,r.__)("Sorry, one or more of these files are too big. Make sure your logos are all under %s.","web-stories"),j);return ue(t)}if(!a){const t=1===e.length?(0,r.__)("Sorry, this file type is not supported. Only jpg, png, and static gifs are supported for publisher logos.","web-stories"):(0,r.__)("Sorry, one or more of these files are of an unsupported file type. Only jpg, png, and static gifs are supported for publisher logos.","web-stories");return ue(t)}const l=await Promise.all(n).catch((()=>{o=!0}));if(o){const t=1===e.length?(0,r.__)("Sorry, there was an error processing your upload. Please try again.","web-stories"):(0,r.__)("Sorry, there was an error processing one or more of your uploads. Please try again.","web-stories");return ue(t)}if(!l.every(ou)){const t=1===e.length?(0,Z.default)((0,r.__)("Sorry, this file is too small. Make sure your logo is larger than %s.","web-stories"),(0,Z.default)("%1$dx%2$dpx",96,96)):(0,Z.default)((0,r.__)("Sorry, one or more files are too small. Make sure your logos are all larger than %s.","web-stories"),(0,Z.default)("%1$dx%2$dpx",96,96));return ue(t)}return ue(""),p(e)},e[22]=q,e[23]=H,e[24]=j,e[25]=ue,e[26]=p,e[27]=we):we=e[27],e[28]!==q||e[29]!==H||e[30]!==j||e[31]!==p?(ve=[H,j,p,q],e[28]=q,e[29]=H,e[30]=j,e[31]=p,e[32]=ve):ve=e[32];const Te=(0,y.useCallback)(we,ve);let Ce,ke;e[33]!==D?(Ce=e=>{D(e.id)},ke=[D],e[33]=D,e[34]=Ce,e[35]=ke):(Ce=e[34],ke=e[35]);const Ie=(0,y.useCallback)(Ce,ke);let Le,Ae;e[36]!==N?(Le=e=>N(e.id),Ae=[N],e[36]=N,e[37]=Le,e[38]=Ae):(Le=e[37],Ae=e[38]);const xe=(0,y.useCallback)(Le,Ae);let Oe,De;e[39]!==a?(Oe=e=>a({googleAnalyticsHandler:e}),De=[a],e[39]=a,e[40]=Oe,e[41]=De):(Oe=e[40],De=e[41]);const Ne=(0,y.useCallback)(Oe,De);let Pe,Re,Me,Be,ze,Fe,Ue,Ge;return e[42]===Symbol.for("react.memo_cache_sentinel")?(Pe=n.createElement(Rr,{heading:(0,r.__)("Settings","web-stories")}),e[42]=Pe):Pe=e[42],e[43]===Symbol.for("react.memo_cache_sentinel")?(Re=n.createElement(La,null,n.createElement(au,{id:"body-view-options-header"})),e[43]=Re):Re=e[43],e[44]!==Y||e[45]!==X||e[46]!==F||e[47]!==o||e[48]!==Te||e[49]!==Ee||e[50]!==Ie||e[51]!==xe||e[52]!==Ne||e[53]!==_e||e[54]!==b||e[55]!==de||e[56]!==A||e[57]!==te||e[58]!==s?(Me=Y&&n.createElement(n.Fragment,null,n.createElement(bd,{googleAnalyticsId:o,handleUpdateAnalyticsId:_e,usingLegacyAnalytics:s,handleMigrateLegacyAnalytics:Ee,siteKitStatus:te,googleAnalyticsHandler:F,handleUpdateGoogleAnalyticsHandler:Ne}),n.createElement(qc,{onAddLogos:Te,onRemoveLogo:Ie,onUpdateDefaultLogo:xe,publisherLogos:A,canUploadFiles:X,isLoading:b,uploadError:de})),e[44]=Y,e[45]=X,e[46]=F,e[47]=o,e[48]=Te,e[49]=Ee,e[50]=Ie,e[51]=xe,e[52]=Ne,e[53]=_e,e[54]=b,e[55]=de,e[56]=A,e[57]=te,e[58]=s,e[59]=Me):Me=e[59],e[60]!==k||e[61]!==C||e[62]!==I?(Be=n.createElement(Pd,{customFonts:C,addCustomFont:k,deleteCustomFont:I}),e[60]=k,e[61]=C,e[62]=I,e[63]=Be):Be=e[63],e[64]!==ne||e[65]!==le||e[66]!==re?(ze=n.createElement(TelemetrySettings,{disabled:ne,onCheckboxSelected:re,selected:le}),e[64]=ne,e[65]=le,e[66]=re,e[67]=ze):ze=e[67],e[68]!==X||e[69]!==se||e[70]!==ce||e[71]!==ie?(Fe=X&&n.createElement(MediaOptimizationSettings,{disabled:se,onCheckboxSelected:ie,selected:ce}),e[68]=X,e[69]=se,e[70]=ce,e[71]=ie,e[72]=Fe):Fe=e[72],e[73]!==d||e[74]!==m||e[75]!==i||e[76]!==c||e[77]!==S||e[78]!==V||e[79]!==_||e[80]!==B||e[81]!==Y||e[82]!==g||e[83]!==W||e[84]!==z||e[85]!==T||e[86]!==u||e[87]!==E||e[88]!==M||e[89]!==R||e[90]!==P||e[91]!==te||e[92]!==a||e[93]!==$||e[94]!==h||e[95]!==oe?(Ue=Y&&n.createElement(n.Fragment,null,n.createElement(VideoCacheSettings,{isEnabled:h,updateSettings:a}),n.createElement(DataRemovalSettings,{isEnabled:g,updateSettings:a}),n.createElement(ArchiveSettings,{archive:_,archiveURL:V,defaultArchiveURL:W,updateSettings:a,searchPages:E,archivePageId:S,getPageById:T}),n.createElement(Bc,{updateSettings:a,adNetwork:m,publisherId:i,adSenseSlotId:c,adManagerSlotId:d,mgidWidgetId:u,siteKitStatus:te}),n.createElement($d,{updateSettings:a,shoppingProvider:P,shopifyHost:R,shopifyAccessToken:M,vendors:$,woocommerce:oe}),n.createElement(tu,{updateSettings:a,autoAdvance:B,defaultPageDuration:z})),e[73]=d,e[74]=m,e[75]=i,e[76]=c,e[77]=S,e[78]=V,e[79]=_,e[80]=B,e[81]=Y,e[82]=g,e[83]=W,e[84]=z,e[85]=T,e[86]=u,e[87]=E,e[88]=M,e[89]=R,e[90]=P,e[91]=te,e[92]=a,e[93]=$,e[94]=h,e[95]=oe,e[96]=Ue):Ue=e[96],e[97]!==Me||e[98]!==Be||e[99]!==ze||e[100]!==Fe||e[101]!==Ue?(Ge=n.createElement(Ya.Provider,null,n.createElement($i,{"data-testid":"editor-settings"},Pe,Re,n.createElement(Ya.Scrollable,null,n.createElement(Ki,null,Me,Be,ze,Fe,Ue)))),e[97]=Me,e[98]=Be,e[99]=ze,e[100]=Fe,e[101]=Ue,e[102]=Ge):Ge=e[102],Ge};function lu(){const[e,t]=(0,y.useState)({}),[a,o]=(0,y.useState)(!1),{api:{currentUser:n}}=w();(0,y.useEffect)((()=>{var a;Object.keys(e).length||(a=n,ei({path:a}).then(Qs.snakeToCamelCaseObjectKeys)).then(t)}),[n,e]);return{api:{toggleWebStoriesTrackingOptIn:(0,y.useCallback)((async()=>{o(!0);try{t(await function(e,t){return ei({path:e,data:{meta:{web_stories_tracking_optin:!t.meta.webStoriesTrackingOptin}},method:"POST"}).then(Qs.snakeToCamelCaseObjectKeys)}(n,e))}finally{o(!1)}}),[n,e]),toggleWebStoriesMediaOptimization:(0,y.useCallback)((async()=>{o(!0);try{t(await function(e,t){return ei({path:e,data:{meta:{web_stories_media_optimization:!t.meta.webStoriesMediaOptimization}},method:"POST"}).then(Qs.snakeToCamelCaseObjectKeys)}(n,e))}finally{o(!1)}}),[n,e])},currentUser:{data:e,isUpdating:a}}}const su="loading_media",iu="add_media_success",cu="add_media_failure",du={error:{},isLoading:!1,newlyCreatedMediaIds:[]};const uu=function(e,t){switch(t.type){case su:return{...e,isLoading:!0,newlyCreatedMediaIds:[]};case cu:return{...e,error:{...t.payload,id:Date.now()},isLoading:!1};case iu:return{...e,error:{},isLoading:!1,newlyCreatedMediaIds:t.payload.newlyCreatedMediaIds||e.newlyCreatedMediaIds};default:return e}};function mu(){const e=(0,l.c)(10),[t,a]=(0,y.useReducer)(uu,du),{api:o}=w(),{media:n}=o;let r,s;e[0]!==a||e[1]!==n?(r=async e=>{a({type:su});try{const t=await function(e,t){return Promise.all(Object.values(t).map((t=>{const a=new window.FormData;return a.append("file",t,t.name||t.type.replace("/",".")),ei({path:e,body:a,method:"POST"}).then(Qs.snakeToCamelCaseObjectKeys)})))}(n,e);a({type:iu,payload:{media:t,newlyCreatedMediaIds:t.map(pu)}})}catch{a({type:cu,payload:{message:yi.UPLOAD_PUBLISHER_LOGO[e.length>1?"MESSAGE_PLURAL":"MESSAGE"]}})}},e[0]=a,e[1]=n,e[2]=r):r=e[2],e[3]!==n?(s=[n],e[3]=n,e[4]=s):s=e[4];const i=(0,y.useCallback)(r,s);let c,d;return e[5]!==i?(c={uploadMedia:i},e[5]=i,e[6]=c):c=e[6],e[7]!==t||e[8]!==c?(d={media:t,api:c},e[7]=t,e[8]=c,e[9]=d):d=e[9],d}function pu(e){const{id:t}=e;return t}const fu="update_settings_success",bu="update_settings_failure",hu="setting_saved",gu="fetch_settings_success",_u="fetch_settings_failure",yu={error:{},googleAnalyticsId:"",usingLegacyAnalytics:!1,adSensePublisherId:"",adSenseSlotId:"",adManagerSlotId:"",mgidWidgetId:"",adNetwork:wi.NONE,archive:vi,archivePageId:0,videoCache:!1,dataRemoval:!1,settingSaved:!1,shoppingProvider:ki.NONE,shopifyHost:"",shopifyAccessToken:"",autoAdvance:!0,defaultPageDuration:7,googleAnalyticsHandler:Ii};const Su=function(e,t){switch(t.type){case hu:return{...e,settingSaved:t.payload};case bu:case _u:return{...e,error:{...t.payload,id:Date.now()}};case gu:case fu:return{...e,error:{},googleAnalyticsId:t.payload.googleAnalyticsId,usingLegacyAnalytics:t.payload.usingLegacyAnalytics,adSensePublisherId:t.payload.adSensePublisherId,adSenseSlotId:t.payload.adSenseSlotId,adManagerSlotId:t.payload.adManagerSlotId,mgidWidgetId:t.payload.mgidWidgetId,adNetwork:t.payload.adNetwork,videoCache:t.payload.videoCache,dataRemoval:t.payload.dataRemoval,archive:t.payload.archive,archivePageId:t.payload.archivePageId,shoppingProvider:t.payload.shoppingProvider,shopifyHost:t.payload.shopifyHost,shopifyAccessToken:t.payload.shopifyAccessToken,autoAdvance:t.payload.autoAdvance,defaultPageDuration:t.payload.defaultPageDuration,googleAnalyticsHandler:t.payload.googleAnalyticsHandler};default:return e}},Eu=e=>({googleAnalyticsId:e.web_stories_ga_tracking_id,usingLegacyAnalytics:e.web_stories_using_legacy_analytics,adSensePublisherId:e.web_stories_adsense_publisher_id,adSenseSlotId:e.web_stories_adsense_slot_id,adManagerSlotId:e.web_stories_ad_manager_slot_id,mgidWidgetId:e.web_stories_mgid_widget_id,adNetwork:e.web_stories_ad_network,videoCache:e.web_stories_video_cache,dataRemoval:e.web_stories_data_removal,archive:e.web_stories_archive,archivePageId:e.web_stories_archive_page_id,shoppingProvider:e.web_stories_shopping_provider,shopifyHost:e.web_stories_shopify_host,shopifyAccessToken:e.web_stories_shopify_access_token,autoAdvance:Boolean(e.web_stories_auto_advance),defaultPageDuration:e.web_stories_default_page_duration,googleAnalyticsHandler:e.web_stories_ga_tracking_handler});function wu(){const e=(0,l.c)(16),[t,a]=(0,y.useReducer)(Su,yu),{api:o}=w(),{settings:n}=o;let r,s;e[0]!==a||e[1]!==n?(r=async()=>{try{const t=await(e=n,ei({path:e}).then(Eu));a({type:gu,payload:t})}catch{a({type:_u,payload:{message:yi.LOAD_SETTINGS.MESSAGE}})}var e},e[0]=a,e[1]=n,e[2]=r):r=e[2],e[3]!==n?(s=[n],e[3]=n,e[4]=s):s=e[4];const i=(0,y.useCallback)(r,s);let c,d;e[5]!==a||e[6]!==n?(c=async e=>{a({type:hu});try{const t=await function(e,t){const{googleAnalyticsId:a,usingLegacyAnalytics:o,adSensePublisherId:n,adSenseSlotId:r,adManagerSlotId:l,mgidWidgetId:s,adNetwork:i,videoCache:c,dataRemoval:d,archive:u,archivePageId:m,shoppingProvider:p,shopifyHost:f,shopifyAccessToken:b,autoAdvance:h,defaultPageDuration:g,googleAnalyticsHandler:_}=t,y={};void 0!==a&&(y.web_stories_ga_tracking_id=a),void 0!==o&&(y.web_stories_using_legacy_analytics=o),void 0!==n&&(y.web_stories_adsense_publisher_id=n),void 0!==r&&(y.web_stories_adsense_slot_id=r),void 0!==l&&(y.web_stories_ad_manager_slot_id=l),void 0!==s&&(y.web_stories_mgid_widget_id=s),void 0!==i&&(y.web_stories_ad_network=i),void 0!==c&&(y.web_stories_video_cache=Boolean(c)),void 0!==d&&(y.web_stories_data_removal=Boolean(d)),void 0!==u&&(y.web_stories_archive=u),void 0!==m&&(y.web_stories_archive_page_id=m),void 0!==p&&(y.web_stories_shopping_provider=p),void 0!==f&&(y.web_stories_shopify_host=f),void 0!==b&&(y.web_stories_shopify_access_token=b),void 0!==h&&(y.web_stories_auto_advance=Boolean(h)),void 0!==g&&(y.web_stories_default_page_duration=g),void 0!==_&&(y.web_stories_ga_tracking_handler=_);const S=(0,Zs.default)(e,y);return ei({path:S,method:"POST"}).then(Eu)}(n,e);a({type:fu,payload:t}),a({type:hu,payload:!0})}catch{a({type:bu,payload:{message:yi.UPDATE_EDITOR_SETTINGS.MESSAGE}})}},e[5]=a,e[6]=n,e[7]=c):c=e[7],e[8]!==n?(d=[n],e[8]=n,e[9]=d):d=e[9];const u=(0,y.useCallback)(c,d);let m,p;return e[10]!==i||e[11]!==u?(m={fetchSettings:i,updateSettings:u},e[10]=i,e[11]=u,e[12]=m):m=e[12],e[13]!==t||e[14]!==m?(p={settings:t,api:m},e[13]=t,e[14]=m,e[15]=p):p=e[15],p}const vu=new DOMParser;function Tu(e){return vu.parseFromString(e,"text/html").body.textContent||""}document.createElement("div");function Cu(){const e=(0,l.c)(9),{api:t}=w(),{pages:a}=t;let o,n;e[0]!==a?(o=async e=>{try{const{title:t,link:o}=await function(e,t){const a=(0,Zs.default)(`${e}${t}/`,{_fields:oi});return ei({path:a})}(a,e);return{title:Tu(t.rendered),link:o}}catch{return null}},n=[a],e[0]=a,e[1]=o,e[2]=n):(o=e[1],n=e[2]);const r=(0,y.useCallback)(o,n);let s,i;e[3]!==a?(s=async e=>{try{const t=await function(e,t){const a=(0,Zs.default)(e,{per_page:100,search:t,_fields:ai});return ei({path:a})}(a,e);return t.map(ku)}catch{return[]}},i=[a],e[3]=a,e[4]=s,e[5]=i):(s=e[4],i=e[5]);const c=(0,y.useCallback)(s,i);let d;return e[6]!==r||e[7]!==c?(d={api:{searchPages:c,getPageById:r}},e[6]=r,e[7]=c,e[8]=d):d=e[8],d}function ku(e){const{id:t,title:a}=e;return{value:t,label:Tu(a.rendered)}}const Iu="loading",Lu="update_failure",Au="update_success",xu="fetch_failure",Ou="fetch_success",Du="remove_failure",Nu="remove_success",Pu="add_failure",Ru="add_success",Mu={error:{},isLoading:!1,publisherLogos:[],settingSaved:!1};const Bu=function(e,t){switch(t.type){case Iu:return{...e,isLoading:!0,settingSaved:!1};case Pu:case Lu:case Du:case xu:return{...e,error:{...t.payload,id:Date.now()},isLoading:!1,settingSaved:!1};case Ou:return{...e,error:{},isLoading:!1,publisherLogos:[...t.payload.publisherLogos]};case Ru:{const a=[...e.publisherLogos,t.payload.publisherLogo];return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:a}}case Au:{const a=[...e.publisherLogos].map((e=>(e.active=e.id===t.payload.publisherLogo.id,e)));return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:a}}case Nu:{const a=e.publisherLogos.some((({id:e,active:a})=>e===t.payload.id&&a)),o=[...e.publisherLogos].filter((({id:e})=>e!==t.payload.id)).map(((e,t)=>(e.active=a?0===t:e.active,e)));return{...e,error:{},isLoading:!1,settingSaved:!0,publisherLogos:o}}default:return e}};function zu(){const[e,t]=(0,y.useReducer)(Bu,Mu),{api:{publisherLogos:a}}=w(),o=(0,y.useCallback)((async()=>{t({type:Iu});try{const o=await(e=a,ei({path:e}));Array.isArray(o)?t({type:Ou,payload:{publisherLogos:o}}):t({type:xu,payload:{message:yi.LOAD_PUBLISHER_LOGOS.MESSAGE}})}catch{t({type:xu,payload:{message:yi.LOAD_PUBLISHER_LOGOS.MESSAGE}})}var e}),[a]),n=(0,y.useCallback)((async e=>{t({type:Iu});try{await function(e,t){const a=(0,Zs.default)(`${e}${t}/`,{_method:"DELETE"});return ei({path:a,method:"POST"})}(a,e),t({type:Nu,payload:{id:e}})}catch{t({type:xu,payload:{message:yi.REMOVE_PUBLISHER_LOGO.MESSAGE}})}}),[a]),r=(0,y.useCallback)((async e=>{t({type:Iu});try{const r=await(o=a,n=e,ei({path:o,data:{id:n},method:"POST"})),l=Array.isArray(r)?r:[r];for(const e of l)t({type:Ru,payload:{publisherLogo:e}})}catch{t({type:Pu,payload:{message:yi.UPLOAD_PUBLISHER_LOGO.MESSAGE}})}var o,n}),[a]);return{publisherLogos:e,api:{fetchPublisherLogos:o,addPublisherLogo:r,removePublisherLogo:n,setPublisherLogoAsDefault:(0,y.useCallback)((async e=>{t({type:Iu});try{const r=await(o=a,n=e,ei({path:`${o}${n}/`,data:{active:!0},method:"POST"}));t({type:Au,payload:{publisherLogo:r}})}catch{t({type:xu,payload:{message:yi.UPDATE_PUBLISHER_LOGO.MESSAGE}})}var o,n}),[a])}}}function Fu(){const e=(0,l.c)(26),{api:t}=w(),{fonts:a}=t,[o,n]=(0,y.useState)(null);let r,s;e[0]!==a||e[1]!==n?(r=async()=>{try{const e=(await function(e){const t=(0,Zs.default)(e,{per_page:100,service:"custom"});return ei({path:t})}(a)).map(Uu);return n(e),e}catch{return null}},e[0]=a,e[1]=n,e[2]=r):r=e[2],e[3]!==a?(s=[a],e[3]=a,e[4]=s):s=e[4];const i=(0,y.useCallback)(r,s);let c,d;e[5]!==o||e[6]!==a||e[7]!==n?(c=async e=>{const t=await function(e,t){const a=(0,Zs.default)(`${e}${t}/`,{_method:"DELETE"});return ei({path:a,method:"POST"})}(a,e),r=o.filter((t=>t.id!==e));return n(r),t},e[5]=o,e[6]=a,e[7]=n,e[8]=c):c=e[8],e[9]!==o||e[10]!==a?(d=[o,a],e[9]=o,e[10]=a,e[11]=d):d=e[11];const u=(0,y.useCallback)(c,d);let m,p;e[12]!==o||e[13]!==a||e[14]!==n?(m=async e=>{const t=await(r=a,l=e,ei({path:r,data:l,method:"POST"}));var r,l;const{id:s,family:i,url:c}=t,d={id:s,family:i,url:c};return n([d,...o]),d},e[12]=o,e[13]=a,e[14]=n,e[15]=m):m=e[15],e[16]!==o||e[17]!==a?(p=[o,a],e[16]=o,e[17]=a,e[18]=p):p=e[18];const f=(0,y.useCallback)(m,p);let b,h;return e[19]!==f||e[20]!==u||e[21]!==i?(b={addCustomFont:f,deleteCustomFont:u,fetchCustomFonts:i},e[19]=f,e[20]=u,e[21]=i,e[22]=b):b=e[22],e[23]!==o||e[24]!==b?(h={customFonts:o,api:b},e[23]=o,e[24]=b,e[25]=h):h=e[25],h}function Uu(e){const{id:t,family:a,url:o}=e;return{id:t,family:a,url:o}}function EditorSettingsProvider(e){const t=(0,l.c)(19),{children:a}=e,{customFonts:o,api:r}=Fu(),{currentUser:s,api:i}=lu(),{media:c,api:d}=mu(),{settings:u,api:m}=wu(),{api:p}=Cu(),{publisherLogos:f,api:b}=zu();let h,g,_;t[0]!==s||t[1]!==o||t[2]!==c||t[3]!==f||t[4]!==u?(h={media:c,settings:u,currentUser:s,customFonts:o,publisherLogos:f},t[0]=s,t[1]=o,t[2]=c,t[3]=f,t[4]=u,t[5]=h):h=t[5],t[6]!==r||t[7]!==d||t[8]!==p||t[9]!==b||t[10]!==m||t[11]!==i?(g={fontsApi:r,mediaApi:d,settingsApi:m,usersApi:i,pagesApi:p,publisherLogosApi:b},t[6]=r,t[7]=d,t[8]=p,t[9]=b,t[10]=m,t[11]=i,t[12]=g):g=t[12],t[13]!==h||t[14]!==g?(_={state:h,actions:g},t[13]=h,t[14]=g,t[15]=_):_=t[15];const y=_;let S;return t[16]!==a||t[17]!==y?(S=n.createElement(Ri.Provider,{value:y},a),t[16]=a,t[17]=y,t[18]=S):S=t[18],S}EditorSettingsProvider.propTypes={children:h.node};const Gu=EditorSettingsProvider;var Hu=a(10562);function ju(){return ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},ju.apply(null,arguments)}const qu=(0,f.default)(So.Headline).withConfig({displayName:"banner__Title",componentId:"sc-z6zfp9-0"})(["grid-area:title;padding-left:8px;"]),Vu=f.default.div.withConfig({displayName:"banner__Content",componentId:"sc-z6zfp9-1"})(["grid-area:content;margin-bottom:4px;max-width:600px;min-width:50%;"]),Wu=(0,f.default)(zt.Button).withConfig({displayName:"banner__CloseButton",componentId:"sc-z6zfp9-2"})(["grid-area:closeButton;justify-self:end;align-self:flex-start;"]),$u=f.default.div.withConfig({displayName:"banner__CloseButtonPlaceholder",componentId:"sc-z6zfp9-3"})(["grid-area:closeButton;justify-self:end;align-self:flex-start;width:32px;height:32px;"]),Ku=f.default.div.withConfig({displayName:"banner__Container",componentId:"sc-z6zfp9-4"})(["display:grid;width:100%;min-height:60px;align-items:baseline;padding:6px 8px;background-color:",";border-radius:",";max-height:184px;grid-template-columns:1fr 32px;grid-template-rows:3;grid-column-gap:0;grid-template-areas:'. closeButton' 'title title' 'content content';text-align:center;& + &{margin-top:18px;}","{padding-left:0;margin-top:-10px;}","{margin:8px auto 18px;max-width:600px;}"],(({theme:e})=>e.colors.gray[5]),(({theme:e})=>e.borders.radius.medium),qu,Vu),Xu=(0,y.forwardRef)(((e,t)=>{const a=(0,l.c)(19);let o,r,s,i,c,d,u,m,p;return a[0]!==e?(({children:o,closeButtonLabel:r,title:c,onClose:s,...i}=e),a[0]=e,a[1]=o,a[2]=r,a[3]=s,a[4]=i,a[5]=c):(o=a[1],r=a[2],s=a[3],i=a[4],c=a[5]),a[6]!==c?(d=n.createElement(qu,{as:"h2",size:io.TextSize.XSmall},c),a[6]=c,a[7]=d):d=a[7],a[8]!==r||a[9]!==s?(u=s?n.createElement(Wu,{type:Ft.ButtonType.Tertiary,variant:Ft.ButtonVariant.Square,size:Ft.ButtonSize.Small,"aria-label":r,onClick:s},n.createElement(Hu.default,{"aria-hidden":!0})):n.createElement($u,null),a[8]=r,a[9]=s,a[10]=u):u=a[10],a[11]!==o?(m=n.createElement(Vu,null,o),a[11]=o,a[12]=m):m=a[12],a[13]!==t||a[14]!==i||a[15]!==d||a[16]!==u||a[17]!==m?(p=n.createElement(Ku,ju({ref:t},i),d,u,m),a[13]=t,a[14]=i,a[15]=d,a[16]=u,a[17]=m,a[18]=p):p=a[18],p}));function Yu(){return Yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)({}).hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},Yu.apply(null,arguments)}const Ju=f.default.label.attrs({htmlFor:"telemetry-banner-opt-in"}).withConfig({displayName:"telemetryBanner__Label",componentId:"sc-inh4j2-0"})(["display:flex;cursor:pointer;"]),Zu=(0,f.default)(Na.Text.Span).withConfig({displayName:"telemetryBanner__LabelText",componentId:"sc-inh4j2-1"})(["margin-bottom:16px;margin-left:8px;color:",";"],(({theme:e})=>e.colors.fg.secondary)),Qu=(0,f.default)(Na.Text.Span).withConfig({displayName:"telemetryBanner__VisitSettingsText",componentId:"sc-inh4j2-2"})(["color:",";"],(({theme:e})=>e.colors.fg.tertiary)),em=(0,f.default)(ca.Link).withConfig({displayName:"telemetryBanner__NavLink",componentId:"sc-inh4j2-3"})(["display:inline-block;margin:0;"]),tm=(0,y.forwardRef)((({visible:e=!0,disabled:t=!1,onChange:a=()=>{},onClose:o=()=>{},checked:l=!1},s)=>{const i=(0,y.useRef)(),c=(0,y.useRef)(!1),d=l?(0,r.__)("Your selection has been updated. Thank you for helping to improve the editor!","web-stories"):(0,r.__)("Help improve the editor!","web-stories");return(0,y.useEffect)((()=>{c.current&&i.current.focus()})),e?n.createElement(Xu,{closeButtonLabel:(0,r.__)("Dismiss telemetry banner","web-stories"),onClose:o,title:d,ref:s},n.createElement(Ju,null,n.createElement(Wc.default,{id:"telemetry-banner-opt-in",checked:l,disabled:t,onChange:()=>{a(),c.current=!0},onBlur:()=>{c.current=!1},ref:i}),n.createElement(Zu,{"aria-checked":l,size:io.TextSize.Small},n.createElement(Nn.default,{mapping:{a:n.createElement(em,{size:io.TextSize.Small,href:(0,r.__)("https://policies.google.com/privacy","web-stories"),rel:"noreferrer",target:"_blank","aria-label":(0,r.__)("Learn more by visiting Google Privacy Policy","web-stories")})}},(0,r.__)("Check the box to help us improve the Web Stories plugin by allowing tracking of product usage stats. All data are treated in accordance with <a>Google Privacy Policy</a>.","web-stories")))),n.createElement(Qu,{size:io.TextSize.XSmall},n.createElement(Nn.default,{mapping:{a:n.createElement(em,{size:io.TextSize.XSmall,href:bo(Si),"aria-label":(0,r.__)("Settings","web-stories")})}},(0,r.__)("You can update your selection later by visiting <a>Settings</a>.","web-stories")))):null}));function TelemetryBannerContainer(e){const{bannerVisible:t,closeBanner:a,optedIn:o,disabled:r,toggleWebStoriesTrackingOptIn:l}=Gi(),s=(0,y.useRef)(),i=(0,y.useRef)(t);return(0,y.useLayoutEffect)((()=>{t&&!1===i.current&&s.current?i.current=!0:!t&&i.current&&(i.current=!1)}),[t]),n.createElement(tm,Yu({ref:s,visible:t,checked:o,disabled:r,onChange:l,onClose:a},e))}function TelemetryBanner(){const{currentPath:e,hasAvailableRoutes:t}=fo((({state:e})=>({currentPath:e.currentPath,hasAvailableRoutes:e.availableRoutes.length>0}))),a=(0,y.useRef)(null),[,o]=(0,y.useState)(!1);return(0,y.useEffect)((()=>{t&&[tt.DASHBOARD,tt.TEMPLATES_GALLERY].includes(e)&&(a.current=document.getElementById("body-view-options-header"),o((e=>!e)))}),[e,t]),a.current?(0,y.createPortal)(n.createElement(TelemetryBannerContainer,null),a.current):null}tm.displayName="TelemetryOptInBanner";const am=(0,f.default)(Xu).withConfig({displayName:"updateBanner__StyledBanner",componentId:"sc-1lpd8jt-0"})(["background:",";"],(({theme:e})=>e.colors.interactiveBg.brandNormal)),om=(0,f.default)(ca.Link).withConfig({displayName:"updateBanner__StyledLink",componentId:"sc-1lpd8jt-1"})(["color:",";text-decoration:underline;&:hover{color:",";}&:focus{color:",";}"],(({theme:e})=>e.colors.interactiveFg.brandNormal),(({theme:e})=>e.colors.interactiveFg.brandHover),(({theme:e})=>e.colors.interactiveFg.brandPress));function NoLink({children:e}){return e}const nm="web_stories_update_banner_closed";function UpdateBannerContainer(){const e=(0,l.c)(22),{bannerVisible:t}=Gi(),{plugins:a}=w(),{"web-stories":o}=a;let s;e[0]!==o?(s=void 0===o?{}:o,e[0]=o,e[1]=s):s=e[1];const i=s,{needsUpdate:c,updateLink:d}=i,u=(0,y.useRef)(),[m,p]=(0,y.useState)(!1);let f,b,h,g;e[2]!==c||e[3]!==p?(f=()=>{p(function(){const e=zi.getItemByKey(nm);return!e||(new Date).getTime()>e&&(zi.setItemByKey(nm,null),!0)}()&&c)},e[2]=c,e[3]=p,e[4]=f):f=e[4],e[5]!==c?(b=[c],e[5]=c,e[6]=b):b=e[6],(0,y.useEffect)(f,b),e[7]!==p?(h=()=>{const e=(new Date).getTime()+1728e5;zi.setItemByKey(nm,e),p(!1)},e[7]=p,e[8]=h):h=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(g=[],e[9]=g):g=e[9];const _=(0,y.useCallback)(h,g);if(!m)return null;if(t)return null;const S=d?om:NoLink;let E,v,T,C,k,I;return e[10]===Symbol.for("react.memo_cache_sentinel")?(E=(0,r.__)("Dismiss update notification","web-stories"),e[10]=E):E=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(v=(0,r.__)("Update available.","web-stories"),e[11]=v):v=e[11],e[12]!==S||e[13]!==d?(T={a:n.createElement(S,{href:d})},e[12]=S,e[13]=d,e[14]=T):T=e[14],e[15]===Symbol.for("react.memo_cache_sentinel")?(C=(0,r.__)("A new version of the plugin is available. <a>Please update now</a>.","web-stories"),e[15]=C):C=e[15],e[16]!==T?(k=n.createElement(Na.Text.Paragraph,null,n.createElement(Nn.default,{mapping:T},C)),e[16]=T,e[17]=k):k=e[17],e[18]!==_||e[19]!==u||e[20]!==k?(I=n.createElement(am,{closeButtonLabel:E,onClose:_,title:v,ref:u},k),e[18]=_,e[19]=u,e[20]=k,e[21]=I):I=e[21],I}function UpdateBanner(){const{currentPath:e,hasAvailableRoutes:t}=fo((({state:e})=>({currentPath:e.currentPath,hasAvailableRoutes:e.availableRoutes.length>0}))),a=(0,y.useRef)(null),[,o]=(0,y.useState)(!1);return(0,y.useEffect)((()=>{t&&[tt.DASHBOARD,tt.TEMPLATES_GALLERY,Si].includes(e)&&(a.current=document.getElementById("body-view-options-header"),o((e=>!e)))}),[e,t]),a.current?(0,y.createPortal)(n.createElement(UpdateBannerContainer,null),a.current):null}const rm=(0,f.default)(Xu).withConfig({displayName:"ga4Banner__StyledBanner",componentId:"sc-jq5r9t-0"})(["background:",";"],(({theme:e})=>e.colors.interactiveBg.brandNormal)),lm=(0,f.default)(ca.Link).withConfig({displayName:"ga4Banner__StyledLink",componentId:"sc-jq5r9t-1"})(["color:",";text-decoration:underline;&:hover{color:",";}&:focus{color:",";}"],(({theme:e})=>e.colors.interactiveFg.brandNormal),(({theme:e})=>e.colors.interactiveFg.brandHover),(({theme:e})=>e.colors.interactiveFg.brandPress));function GoogleAnalytics4BannerContainer(){const e=(0,l.c)(12),{capabilities:t,plugins:a}=w();let o;e[0]!==t?(o=void 0===t?{}:t,e[0]=t,e[1]=o):o=e[1];const{canManageSettings:s}=o,{siteKit:i}=a,c=void 0===i?{}:i,d=Mi(um);let u,m;e[2]!==s||e[3]!==d?(u=()=>{s&&d()},m=[s,d],e[2]=s,e[3]=d,e[4]=u,e[5]=m):(u=e[4],m=e[5]),(0,y.useEffect)(u,m);const p=Mi(dm),{currentPath:f}=fo(cm),b=(0,y.useRef)();if(c.analyticsActive)return null;if(!p)return null;if(f===Si)return null;let h,g,_,S,E;return e[6]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.__)("Update your Google Analytics configuration.","web-stories"),e[6]=h):h=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(g=n.createElement(ca.Link,{href:(0,r.__)("https://support.google.com/analytics/answer/11583528?hl=en","web-stories"),rel:"noreferrer",target:"_blank",onClick:im}),e[7]=g):g=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(_=n.createElement(Na.Text.Paragraph,null,n.createElement(Nn.default,{mapping:{a:g,a2:n.createElement(ca.Link,{href:(0,r.__)("https://support.google.com/analytics/answer/10089681?hl=en","web-stories"),rel:"noreferrer",target:"_blank",onClick:sm})}},(0,r.__)("Universal Analytics <a>stopped processing new visits</a> starting <b>July 1, 2023</b>. We recommend switching to <a2>Google Analytics 4</a2> (GA4).","web-stories"))),e[8]=_):_=e[8],e[9]===Symbol.for("react.memo_cache_sentinel")?(S=n.createElement(Na.Text.Paragraph,null,n.createElement(Nn.default,{mapping:{a:n.createElement(lm,{href:bo(Si)})}},(0,r.__)("<a>Update your settings now</a>.","web-stories"))),e[9]=S):S=e[9],e[10]!==b?(E=n.createElement(rm,{title:h,ref:b},_,S),e[10]=b,e[11]=E):E=e[11],E}function sm(e){return(0,v.trackClick)(e,"click_ga4_docs")}function im(e){return(0,v.trackClick)(e,"click_ua_deprecation_docs")}function cm(e){const{state:t}=e,{currentPath:a}=t;return{currentPath:a}}function dm(e){const{state:t}=e,{settings:a}=t,{googleAnalyticsId:o}=a;return o?.toLowerCase().startsWith("ua-")}function um(e){const{actions:t}=e,{settingsApi:a}=t,{fetchSettings:o}=a;return o}function GoogleAnalytics4Banner(){const{currentPath:e,hasAvailableRoutes:t}=fo((({state:e})=>({currentPath:e.currentPath,hasAvailableRoutes:e.availableRoutes.length>0}))),a=(0,y.useRef)(null),[,o]=(0,y.useState)(!1);return(0,y.useEffect)((()=>{t&&[tt.DASHBOARD,tt.TEMPLATES_GALLERY,Si].includes(e)&&(a.current=document.getElementById("body-view-options-header"),o((e=>!e)))}),[e,t]),a.current?(0,y.createPortal)(n.createElement(GoogleAnalytics4BannerContainer,null),a.current):null}const mm=function(){const e=(0,l.c)(1);let t;return Pi(),e[0]===Symbol.for("react.memo_cache_sentinel")?(t=n.createElement(Gu,null,n.createElement(Xs,{additionalRoutes:[{path:Si,component:n.createElement(ru,null)}]}),n.createElement(TelemetryBanner,null),n.createElement(UpdateBanner,null),n.createElement(GoogleAnalytics4Banner,null)),e[0]=t):t=e[0],t};window.webStories=window.webStories||{},window.webStories.initializeStoryDashboard=(e,t)=>{const a=document.getElementById(e);(0,Ys.setAppElement)(a),(0,_t.updateSettings)(t.locale),(0,v.initializeTracking)("Dashboard",!1);const l={...t,apiCallbacks:(0,Js.default)(o,t),leftRailSecondaryNavigation:Ei,documentTitleSuffix:(0,r.__)("Web Stories − WordPress","web-stories"),styleConstants:{topOffset:32,leftOffset:36},containerId:"wpbody"};(0,y.render)(n.createElement(y.StrictMode,null,n.createElement(Dn,{config:l},n.createElement(xi,null),n.createElement(mm,null))),a)}},63408:(e,t,a)=>{a.d(t,{fullSizeAbsolute:()=>n});var o=a(72240);const n=(0,o.css)(["position:absolute;top:0;right:0;bottom:0;left:0;"]);(0,o.css)(["position:relative;top:0;left:0;height:100%;width:100%;"])},64746:(e,t,a)=>{a.d(t,{Fragment:()=>r.Fragment,StrictMode:()=>r.StrictMode,cloneElement:()=>r.cloneElement,createContext:()=>n.createContext,createElement:()=>r.createElement,createPortal:()=>l.createPortal,createRef:()=>r.createRef,forwardRef:()=>r.forwardRef,identity:()=>n.identity,memo:()=>r.memo,render:()=>l.render,useBatchingCallback:()=>s.default,useCallback:()=>r.useCallback,useCombinedRefs:()=>i.default,useContext:()=>n.useContext,useContextReact:()=>r.useContext,useContextSelector:()=>c.default,useDebouncedCallback:()=>o.useDebouncedCallback,useEffect:()=>r.useEffect,useFocusOut:()=>d.default,useLayoutEffect:()=>r.useLayoutEffect,useMemo:()=>r.useMemo,usePrevious:()=>u.default,useReducer:()=>r.useReducer,useRef:()=>r.useRef,useResizeEffect:()=>m.default,useState:()=>r.useState});var o=a(81591),n=(a(7997),a(78546)),r=a(96540),l=a(40961),s=a(10621),i=a(28379),c=a(33758),d=a(43118),u=a(73095),m=a(83855);a(65848);a(21728);a(18135)},67537:(e,t,a)=>{a.d(t,{disableTracking:()=>l,enableTracking:()=>n.default,getTimeTracker:()=>p.default,initializeTracking:()=>o.default,trackClick:()=>i.default,trackError:()=>c.default,trackEvent:()=>d.default,trackScreenView:()=>m});var o=a(37172),n=a(53843),r=a(79532);const l=function(){r.config.trackingEnabled=!1};var s=a(11891),i=a(17624),c=a(39782),d=a(37620);var u=a(41718);const m=async function(e){if(!await(0,s.default)())return Promise.resolve();const t={screen_name:e};return(0,u.default)("screen_view",t)};var p=a(96306)},89912:(e,t,a)=>{a.d(t,{useKeyDownEffect:()=>s});a(96540),a(21728);var o=a(64746),n=a(77200),r=a(21976);function l(e,t,a,l,s){const{keys:i}=(0,o.useContext)(n.default),c=(0,o.useBatchingCallback)(l,s||[]);(0,o.useEffect)((()=>{const o=(0,r.getNodeFromRefOrNode)(e);if(!o)return;if(o.nodeType!==Node.ELEMENT_NODE&&o.nodeType!==Node.DOCUMENT_NODE)throw new Error("only an element or a document node can be used");const n=(0,r.resolveKeySpec)(i,t);if(1===n.key.length&&""===n.key[0])return;const l=(0,r.getOrCreateMousetrap)(o),s=(0,r.createKeyHandler)(o,n,c);return l.bind(n.key,s,a),()=>{l.unbind(n.key,a)}}),[c,i])}function s(e,t,a,o){l(e,t,"keydown",a,o)}}},n={};function __webpack_require__(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}};return o[e].call(a.exports,a,a.exports,__webpack_require__),a.exports}__webpack_require__.m=o,e=[],__webpack_require__.O=(t,a,o,n)=>{if(!a){var r=1/0;for(c=0;c<e.length;c++){for(var[a,o,n]=e[c],l=!0,s=0;s<a.length;s++)(!1&n||r>=n)&&Object.keys(__webpack_require__.O).every((e=>__webpack_require__.O[e](a[s])))?a.splice(s--,1):(l=!1,n<r&&(r=n));if(l){e.splice(c--,1);var i=o();void 0!==i&&(t=i)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[a,o,n]},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var a in t)__webpack_require__.o(t,a)&&!__webpack_require__.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,a)=>(__webpack_require__.f[a](e,t),t)),[])),__webpack_require__.u=e=>7512===e?"7512.js":({5:"chunk-web-stories-template-0",17:"chunk-web-stories-template-19-metaData",78:"chunk-web-stories-template-58-metaData",177:"chunk-web-stories-template-20-metaData",276:"chunk-web-stories-template-7-metaData",288:"chunk-web-stories-template-3-metaData",345:"chunk-web-stories-template-59",421:"chunk-web-stories-template-46",656:"chunk-web-stories-template-34-metaData",850:"chunk-web-stories-template-18-metaData",948:"chunk-web-stories-template-30-metaData",954:"chunk-web-stories-template-30",993:"chunk-web-stories-template-4",1045:"chunk-web-stories-template-51-metaData",1186:"chunk-web-stories-template-36-metaData",1187:"chunk-web-stories-template-26",1198:"chunk-web-stories-template-23",1369:"chunk-web-stories-template-11-metaData",1381:"chunk-web-stories-template-42-metaData",1409:"chunk-web-stories-template-42",1507:"chunk-web-stories-template-26-metaData",1550:"chunk-web-stories-template-34",1785:"chunk-web-stories-template-60",1788:"chunk-web-stories-template-49-metaData",1839:"chunk-web-stories-template-22-metaData",1861:"chunk-web-stories-template-19",1931:"chunk-web-stories-template-39",1981:"chunk-web-stories-template-8",1990:"chunk-web-stories-template-25-metaData",2018:"chunk-web-stories-template-1-metaData",2177:"chunk-web-stories-template-51",2186:"chunk-web-stories-template-27",2253:"chunk-web-stories-template-11",2365:"chunk-web-stories-template-60-metaData",2386:"chunk-web-stories-template-49",2452:"chunk-web-stories-template-27-metaData",2492:"chunk-web-stories-template-38-metaData",2570:"chunk-web-stories-template-9-metaData",2773:"chunk-web-stories-template-55",2814:"chunk-web-stories-template-3",2838:"chunk-web-stories-template-12",2922:"chunk-web-stories-template-52",3155:"chunk-web-stories-template-40-metaData",3173:"chunk-web-stories-template-4-metaData",3214:"chunk-web-stories-template-14-metaData",3219:"chunk-web-stories-template-40",3230:"chunk-web-stories-template-45",3553:"chunk-web-stories-template-0-metaData",3632:"chunk-web-stories-template-45-metaData",3647:"chunk-web-stories-template-2-metaData",3779:"chunk-web-stories-template-31-metaData",3802:"chunk-web-stories-template-7",3826:"chunk-web-stories-template-16",3991:"chunk-web-stories-template-13-metaData",3996:"chunk-web-stories-template-21",4007:"chunk-web-stories-template-22",4191:"chunk-web-stories-template-57-metaData",4218:"chunk-web-stories-template-41",4336:"chunk-web-stories-template-56-metaData",4342:"chunk-web-stories-template-50-metaData",4359:"chunk-web-stories-template-35",4387:"chunk-web-stories-template-6",4743:"chunk-web-stories-template-57",4890:"chunk-web-stories-template-29-metaData",4962:"chunk-web-stories-template-47-metaData",4984:"chunk-web-stories-template-25",5045:"chunk-web-stories-template-24-metaData",5110:"chunk-web-stories-template-43-metaData",5133:"chunk-web-stories-template-28",5187:"chunk-web-stories-template-31",5195:"chunk-web-stories-template-48",5336:"chunk-web-stories-template-32",5439:"chunk-web-stories-template-35-metaData",5571:"chunk-web-stories-template-53",5582:"chunk-web-stories-template-56",5647:"chunk-web-stories-template-13",5812:"chunk-web-stories-template-41-metaData",5972:"chunk-web-stories-template-29",6039:"chunk-web-stories-template-44",6152:"chunk-web-stories-template-12-metaData",6177:"chunk-web-stories-template-55-metaData",6393:"chunk-web-stories-templates",6457:"chunk-web-stories-template-28-metaData",6624:"chunk-web-stories-template-14",6635:"chunk-web-stories-template-17",7016:"chunk-web-stories-template-43",7069:"chunk-web-stories-template-59-metaData",7157:"chunk-web-stories-template-37",7196:"chunk-web-stories-template-1",7207:"chunk-web-stories-template-2",7414:"chunk-web-stories-template-32-metaData",7507:"chunk-web-stories-template-53-metaData",7536:"chunk-web-stories-template-58",7554:"chunk-web-stories-template-21-metaData",7588:"chunk-web-stories-template-9",7590:"chunk-web-stories-template-5-metaData",7612:"chunk-web-stories-template-47",7793:"chunk-web-stories-template-24",7905:"chunk-web-stories-template-37-metaData",7931:"chunk-web-stories-template-39-metaData",7939:"chunk-web-stories-template-6-metaData",7996:"chunk-web-stories-template-36",8145:"chunk-web-stories-template-33",8184:"chunk-web-stories-template-5",8252:"chunk-web-stories-template-16-metaData",8267:"chunk-web-stories-template-17-metaData",8336:"chunk-web-stories-template-23-metaData",8380:"chunk-web-stories-template-54",8389:"chunk-web-stories-template-20",8452:"chunk-web-stories-template-52-metaData",8545:"chunk-web-stories-template-46-metaData",8635:"chunk-opentype",9017:"chunk-web-stories-template-8-metaData",9052:"chunk-web-stories-template-18",9122:"chunk-web-stories-template-38",9167:"chunk-web-stories-template-44-metaData",9368:"chunk-web-stories-template-50",9433:"chunk-web-stories-template-15",9444:"chunk-web-stories-template-10",9557:"chunk-web-stories-template-33-metaData",9725:"chunk-web-stories-template-15-metaData",9755:"chunk-web-stories-template-48-metaData",9866:"chunk-web-stories-template-10-metaData",9906:"chunk-web-stories-template-54-metaData"}[e]||e)+".js?v="+{5:"2f2a4aeceb0480011dca",17:"83395007090533a9454b",78:"42eab9925764c993af34",177:"f4ab4d00ee9d84496c4f",276:"a21c85640dac8e6f8000",288:"e7106c0eac07ce936118",345:"507586efd738e59778af",421:"08373db7c692b4a35410",656:"fe0ed35774c94370f75f",850:"e53370c8e3de76b34851",945:"fb66bd87b873cc60cc34",948:"2df6a93c66c3e4a5bf20",954:"420601c15ddc9a45feb0",993:"5692f29cd4db52d8dc99",1045:"00a963955ae6a34d2404",1186:"6ae484f533a670e9a453",1187:"1ff150e5fe60fb44fdc3",1198:"50b099393b40c3f87c03",1369:"214aae5385c7581abf90",1381:"1837f2ddfb857c66b636",1409:"e816cb4a3040d5ff1de8",1507:"870e32032fab250636d5",1550:"0db7cdde4a5ef3aa4d73",1785:"a2e8349c879e3e92a8dd",1788:"84594010f7f87adb3978",1839:"9d7484f06bb4e1cd8374",1861:"65ff8df27e7324ae83ad",1931:"fee692a6d7a8df58eeb9",1981:"c023a4b08dde1f2ce89a",1990:"29b0c1161cf47f5ae87b",2018:"ae625075a74de336c3b0",2177:"724efb8ebbd32310cf1f",2186:"6aa18f2b066b0f702d22",2253:"1237f4d26068869441e0",2365:"4013cfd4ebb774f073dc",2386:"7b3cc0bb56a027a0a36a",2452:"020d182c4c6d526ac7ff",2492:"95bdac012311f94e8200",2570:"6db72a7661d437f232ac",2773:"6c00b4f567b41eb85bbf",2814:"9636d7e0be04f956bbaf",2838:"3a94ba0d8b032a849443",2922:"9da9130762fd9fd34d7d",3155:"e55b0471d53247b70d5b",3173:"b55428d0f55ef7146a7e",3214:"42f4031dc9c3b874ba6c",3219:"e7f23848ceb931eaee91",3230:"c5d242e908ab92d603a0",3553:"79bb4c997394d74b933e",3632:"97543f878511ca0bd9ef",3647:"be15bb1d9ace41741fa6",3779:"80802425598f310a1c60",3802:"c6cf7dbacd7117dc7968",3826:"66fc2f75465a7fdaa55a",3991:"b559f0125bb1cba5cbe8",3996:"807e3a8751a6024a5843",4007:"e53832998eb13ba087d4",4191:"aeec16b51112b3c38110",4218:"eed9e2ac6268e92c374b",4336:"a552d5f20961c7a602d9",4342:"61c048c242336d663848",4359:"d2516c19d17b32186680",4387:"2ec2190a5f59023ee615",4743:"39e3a1b6279c68b63957",4890:"ae1248eeff7942db66a2",4962:"58b4f7ebcb45b178378e",4984:"f57cb393104eab010a08",5045:"abd06295e5235c99b9cb",5110:"1e35255822bbba044edc",5133:"6f40e4f75eac8f07c5c5",5187:"7666647aaa47a6bfa492",5195:"69bce297638f0d4e5a92",5336:"e6697f7439a15e7a1948",5439:"d620ce38f86b1faed5b1",5571:"127c0556d15ae7f3fbf9",5582:"6258da133927454fd3bb",5647:"11f8333a7c54e93f52f7",5812:"34dd5cb222aa65898a5a",5972:"a63378861f97b70952ba",6039:"caf09174ab60d1e70026",6152:"47ea28f41a50ba5ebc47",6177:"23797b74381d3900c905",6393:"ebe3fa513d9c2125915f",6457:"b865cf3aa89168123f12",6624:"8713927ae222bfb03ae5",6635:"c90bb9762bb5421975ce",7016:"6825cfb07c2bcd2b2843",7069:"22b0c1816b60bc62eb99",7157:"969235604b2333ec24c7",7196:"f9d49fa7ad68fbf05790",7207:"f68e7ea2b38a6b140542",7414:"14e5f4aeb1d3f267ab85",7507:"10b12c0034fd669173f9",7536:"840c3e8befddee4fb40a",7554:"bd26294569b7bf72bfd2",7588:"3a564252339e69bf6287",7590:"20d66ef1e38b6bce8bac",7612:"7fae708e065e0470107b",7793:"0206e5fa5baaa99cd259",7905:"fbae250ef713ed6d8477",7931:"b4b58ac873e921265988",7939:"488216d84590e8c6bf32",7996:"f60749dff8c2d8a67e4e",8145:"de66fcee8a0e8f34349a",8184:"51a0606500b3a603a03b",8252:"2654b763b6918c5727a0",8267:"4011f8b6e768432921c4",8336:"3739f6c35972efd4b860",8380:"077c9e2be2070e1d3314",8389:"40fd3a414c8b0fffc412",8452:"e0fc5f60c97ba1b1a186",8545:"9a4c3ca79827ad2475a2",8635:"3525ad192030cc7f570e",9017:"116db21373b2684218a0",9052:"60bcf51a1fece381ba6c",9122:"b3f0bc2a82a2d85eacc4",9167:"3ed6326523ef6bec70b7",9368:"84214923e8d7d3e3e1a4",9433:"8068927a2abe8e38c395",9444:"195448222f3b6ad72f6f",9557:"f6f0df36dff1f8841d26",9725:"44a7082b2b5dd5dadced",9755:"af8aafe0be11d397fba5",9866:"3112a11f802f13408e95",9906:"1e1dd14a612e906099d5"}[e],__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},a="web-stories-wp:",__webpack_require__.l=(e,o,n,r)=>{if(t[e])t[e].push(o);else{var l,s;if(void 0!==n)for(var i=document.getElementsByTagName("script"),c=0;c<i.length;c++){var d=i[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==a+n){l=d;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,__webpack_require__.nc&&l.setAttribute("nonce",__webpack_require__.nc),l.setAttribute("data-webpack",a+n),l.src=e),t[e]=[o];var u=(a,o)=>{l.onerror=l.onload=null,clearTimeout(m);var n=t[e];if(delete t[e],l.parentNode&&l.parentNode.removeChild(l),n&&n.forEach((e=>e(o))),a)return a(o)},m=setTimeout(u.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=u.bind(null,l.onerror),l.onload=u.bind(null,l.onload),s&&document.head.appendChild(l)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var o=a.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=a[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e={6412:0};__webpack_require__.f.j=(t,a)=>{var o=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var n=new Promise(((a,n)=>o=e[t]=[a,n]));a.push(o[2]=n);var r=__webpack_require__.p+__webpack_require__.u(t),l=new Error;__webpack_require__.l(r,(a=>{if(__webpack_require__.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var n=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,o[1](l)}}),"chunk-"+t,t)}},__webpack_require__.O.j=t=>0===e[t];var t=(t,a)=>{var o,n,[r,l,s]=a,i=0;if(r.some((t=>0!==e[t]))){for(o in l)__webpack_require__.o(l,o)&&(__webpack_require__.m[o]=l[o]);if(s)var c=s(__webpack_require__)}for(t&&t(a);i<r.length;i++)n=r[i],__webpack_require__.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return __webpack_require__.O(c)},a=globalThis.webpackChunkweb_stories_wp=globalThis.webpackChunkweb_stories_wp||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),__webpack_require__.nc=void 0;var r=__webpack_require__.O(void 0,[9633,6314,7830],(()=>__webpack_require__(57e3)));r=__webpack_require__.O(r)})();