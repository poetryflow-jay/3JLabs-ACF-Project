function initTimelineProgress(){document.querySelectorAll(".tpgb-timeline-list").forEach(e=>{let t=e.querySelector(".post-loop-inner"),l=e.querySelector(".timeline-track-draw"),i=e.querySelectorAll(".timeline-item-wrap"),r=e.querySelectorAll(".timeline-tooltip-wrap"),o=e.querySelector(".timeline-track");if(!t||!l||!i.length)return;let n=e.getAttribute("data-anim-color")||t?.getAttribute("data-anim-color")||"";Object.assign(l.style,{backgroundColor:n,height:"0%",transition:"height 0.3s ease",position:"absolute",display:"block",top:"0",left:"50%",width:o.style.width,marginLeft:"-.5px",zIndex:"2"}),r.forEach(e=>e.style.transition="background-color 0.3s ease");let s=o.offsetWidth,a=`calc(100% + ${s/2}px)`,c=`calc(100% - ${s/2}px)`;e.querySelectorAll(".point-icon").forEach(e=>{let t=e.previousElementSibling||e.nextElementSibling;t?.classList.contains("text-right")?(e.style.left=a,e.style.right=""):t?.classList.contains("text-left")&&(e.style.right=c,e.style.left="")});let g=(e,t,l,i)=>.1>Math.abs(e-t)?i:(e-1)/(t-1)*l-50;e.querySelectorAll(".tpgb-beginning-icon").forEach(e=>e.style.transform=`translateX(${.1>Math.abs(s-15)?5:.1>Math.abs(s-1)?-50:g(s,14,55,-50)}%)`),e.querySelectorAll(".timeline-end-icon").forEach(e=>e.style.transform=`translateX(${.1>Math.abs(s-20)?1.6429:.1>Math.abs(s-1)?-50:g(s,19,51.6429,-50)}%)`),e.updateProgress=()=>{let e=t.getBoundingClientRect(),o=e.top<=window.innerHeight/2?e.bottom>window.innerHeight/2?Math.min(100,Math.max(0,(window.innerHeight/2-e.top)/t.offsetHeight*100)):100:0;l.style.height=o+"%",o>0&&(l.style.backgroundColor=n),i.forEach((e,l)=>{let i=(e.offsetTop-t.offsetTop)/t.offsetHeight*100,s=r[l];s&&(s.style.backgroundColor=o>0&&o>=i?n:"")})},e.updateProgress()});let e=!1,t=()=>{e||(requestAnimationFrame(()=>{document.querySelectorAll(".tpgb-timeline-list").forEach(e=>e.updateProgress?.()),e=!1}),e=!0)};window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",()=>document.querySelectorAll(".tpgb-timeline-list").forEach(e=>e.updateProgress?.()))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initTimelineProgress):initTimelineProgress();